import{a as I,u as w,b as O,j as $}from"./tanstack-BOxH6YKw.js";import{I as K,J as R,K as y,c as g,L as T}from"./index-BXe40jck.js";import{X as k}from"./mui-CKojuwUz.js";const i=K(),u=R(),p="colors",b=async e=>{if(!i||!u)return[];const o=`https://sheets.googleapis.com/v4/spreadsheets/${i}/values/${p}?key=${u}`;return(await(await fetch(o,{signal:e})).json()).values.slice(1).map(([a,c,n,l])=>({vendor:a,...c&&{color:c},...n&&{backgroundColor:n},...l&&{borderColor:l}}))},j=async({vendor:e})=>{const s=(await b()).findIndex(t=>t.vendor===e);if(s!==-1){const t=`${p}!A${s+2}:F${s+2}`,r=`https://sheets.googleapis.com/v4/spreadsheets/${i}/values/${t}:clear?key=${u}`;await y(r,{method:"POST"})}},x=async({vendor:e,color:o,borderColor:s,backgroundColor:t})=>{const a=(await b()).findIndex(n=>n.vendor===e),c={values:[[e,o,t,s]]};if(a===-1){const n=`${p}!A1`,l=`https://sheets.googleapis.com/v4/spreadsheets/${i}/values/${n}:append?valueInputOption=RAW&key=${u}`;await y(l,{body:JSON.stringify(c),method:"POST"})}if(a!==-1){const n=`${p}!A:D${a+2}`,l=`https://sheets.googleapis.com/v4/spreadsheets/${i}/values/${n}?valueInputOption=RAW&key=${u}`;await y(l,{body:JSON.stringify(c),method:"PUT"})}},S=()=>[T];function P(e,o,s){const t={vendor:e};let r=!1;return o.color!==s.color&&(t.color=o.color,r=!0),o.borderColor!==s.borderColor&&(t.borderColor=o.borderColor,r=!0),o.backgroundColor!==s.backgroundColor&&(t.backgroundColor=o.backgroundColor,r=!0),r?t:null}function q(e,o){const s={added:[],removed:[],changed:[]};for(const t in e){const r=e[t],a=o[t];if(!a)s.added.push({vendor:t,...r});else{const c=P(t,r,a);c&&s.changed.push(c)}}for(const t in o)e[t]||s.removed.push({vendor:t,...o[t]});return s}const z=()=>{const e=g.c(2),o=w();let s;return e[0]!==o?(s={async onSettled(){return await o.invalidateQueries({queryKey:S()})},mutationFn:F},e[0]=o,e[1]=s):s=e[1],O(s)},Q=()=>{const e=g.c(6);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={staleTime:1/0,queryKey:S(),queryFn:G,select(l){return l.reduce(H,{})}},e[0]=o):o=e[0];const{data:s,isLoading:t}=I(o);let r;e[1]!==s?(r=s===void 0?{}:s,e[1]=s,e[2]=r):r=e[2];const c=r;let n;return e[3]!==t||e[4]!==c?(n={colors:c,isLoading:t},e[3]=t,e[4]=c,e[5]=n):n=e[5],n};async function F(e){const{currentColors:o,colors:s}=e,t=q(s,o);for(const r of t.added)await x(r);for(const r of t.changed)await x(r);for(const r of t.removed)await j(r)}function G(e){const{signal:o}=e;return b(o)}function H(e,o){const{vendor:s,...t}=o;return{...e,[s]:t}}const J=e=>{const o=g.c(3),{colors:s}=Q();let t;return o[0]!==s||o[1]!==e?(t=s[e]||{},o[0]=s,o[1]=e,o[2]=t):t=o[2],t},B=e=>{const o=g.c(9),{vendor:s,color:t,borderColor:r,backgroundColor:a,source:c,onClick:n}=e,l=c===void 0?"live":c,{color:_,borderColor:A,backgroundColor:E}=J(s),C=(l==="live"?_:t)||"secondary",m=(l==="live"?A:r)||"secondary.main",h=l==="live"?E:a;let d;o[0]!==n||o[1]!==s?(d=()=>{n&&n(s)},o[0]=n,o[1]=s,o[2]=d):d=o[2];const v=d;let f;return o[3]!==h||o[4]!==m||o[5]!==C||o[6]!==v||o[7]!==s?(f=s!=="base"?$.jsx(k,{"data-no-export":!0,label:s,size:"small",variant:"outlined",onClick:v,sx:{borderWidth:"2px",borderColor:m,color:C,backgroundColor:h}}):$.jsx(k,{"data-no-export":!0,label:s,color:"primary",size:"small"}),o[3]=h,o[4]=m,o[5]=C,o[6]=v,o[7]=s,o[8]=f):f=o[8],f};export{B as V,z as a,Q as u};
