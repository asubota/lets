var ws=e=>{throw TypeError(e)};var ze=(e,t,s)=>t.has(e)||ws("Cannot "+s);var u=(e,t,s)=>(ze(e,t,"read from private field"),s?s.call(e):t.get(e)),w=(e,t,s)=>t.has(e)?ws("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),g=(e,t,s,r)=>(ze(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),L=(e,t,s)=>(ze(e,t,"access private method"),s);var Me=(e,t,s,r)=>({set _(n){g(e,t,n,s)},get _(){return u(e,t,r)}});import{r as R,a as Ir}from"./react-BtIrUdbE.js";var Ys={exports:{}},Qe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tr=R,jr=Symbol.for("react.element"),Dr=Symbol.for("react.fragment"),kr=Object.prototype.hasOwnProperty,Ar=Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qr={key:!0,ref:!0,__self:!0,__source:!0};function Zs(e,t,s){var r,n={},o=null,i=null;s!==void 0&&(o=""+s),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)kr.call(t,r)&&!Qr.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:jr,type:e,key:o,ref:i,props:n,_owner:Ar.current}}Qe.Fragment=Dr;Qe.jsx=Zs;Qe.jsxs=Zs;Ys.exports=Qe;var C=Ys.exports;const _s="pushstate",Cs="popstate",tr="beforeunload",er=e=>(e.preventDefault(),e.returnValue=""),Ur=()=>{removeEventListener(tr,er,{capture:!0})};function sr(e){let t=e.getLocation();const s=new Set;let r=[];const n=()=>{t=e.getLocation(),s.forEach(i=>i())},o=async(i,a)=>{var l;if(!((a==null?void 0:a.ignoreBlocker)??!1)&&typeof document<"u"&&r.length){for(const d of r)if(!await d()){(l=e.onBlocked)==null||l.call(e,n);return}}i()};return{get location(){return t},subscribers:s,subscribe:i=>(s.add(i),()=>{s.delete(i)}),push:(i,a,l)=>{a=Se(a),o(()=>{e.pushState(i,a),n()},l)},replace:(i,a,l)=>{a=Se(a),o(()=>{e.replaceState(i,a),n()},l)},go:(i,a)=>{o(()=>{e.go(i),n()},a)},back:i=>{o(()=>{e.back(),n()},i)},forward:i=>{o(()=>{e.forward(),n()},i)},createHref:i=>e.createHref(i),block:i=>(r.push(i),r.length===1&&addEventListener(tr,er,{capture:!0}),()=>{r=r.filter(a=>a!==i),r.length||Ur()}),flush:()=>{var i;return(i=e.flush)==null?void 0:i.call(e)},destroy:()=>{var i;return(i=e.destroy)==null?void 0:i.call(e)},notify:n}}function Se(e){return e||(e={}),{...e,key:rr()}}function Br(e){const t=typeof document<"u"?window:void 0,s=t.history.pushState,r=t.history.replaceState,n=m=>m,o=()=>Ye(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state);let i=o(),a;const l=()=>i;let c,d;const h=()=>{if(!c)return;(c.isPush?s:r).call(t.history,c.state,"",c.href),c=void 0,d=void 0,a=void 0},f=(m,v,P)=>{const x=n(v);d||(a=i),i=Ye(v,P),c={href:x,state:P,isPush:(c==null?void 0:c.isPush)||m==="push"},d||(d=Promise.resolve().then(()=>h()))},p=()=>{i=o(),y.notify()},y=sr({getLocation:l,pushState:(m,v)=>f("push",m,v),replaceState:(m,v)=>f("replace",m,v),back:()=>t.history.back(),forward:()=>t.history.forward(),go:m=>t.history.go(m),createHref:m=>n(m),flush:h,destroy:()=>{t.history.pushState=s,t.history.replaceState=r,t.removeEventListener(_s,p),t.removeEventListener(Cs,p)},onBlocked:m=>{a&&i!==a&&(i=a,m())}});return t.addEventListener(_s,p),t.addEventListener(Cs,p),t.history.pushState=function(...m){const v=s.apply(t.history,m);return p(),v},t.history.replaceState=function(...m){const v=r.apply(t.history,m);return p(),v},y}function Nr(e={initialEntries:["/"]}){const t=e.initialEntries;let s=e.initialIndex??t.length-1,r={key:rr()};return sr({getLocation:()=>Ye(t[s],r),pushState:(o,i)=>{r=i,t.splice,s<t.length-1&&t.splice(s+1),t.push(o),s=Math.max(t.length-1,0)},replaceState:(o,i)=>{r=i,t[s]=o},back:()=>{r=Se(r),s=Math.max(s-1,0)},forward:()=>{r=Se(r),s=Math.min(s+1,t.length-1)},go:o=>{r=Se(r),s=Math.min(Math.max(s+o,0),t.length-1)},createHref:o=>o})}function Ye(e,t){const s=e.indexOf("#"),r=e.indexOf("?");return{href:e,pathname:e.substring(0,s>0?r>0?Math.min(s,r):s:r>0?r:e.length),hash:s>-1?e.substring(s):"",search:r>-1?e.slice(r,s===-1?void 0:s):"",state:t||{}}}function rr(){return(Math.random()+1).toString(36).substring(7)}var $r="Invariant failed";function st(e,t){if(!e)throw new Error($r)}const He=R.createContext(null);function nr(){return typeof document>"u"?He:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=He,He)}function xt(e){const t=R.useContext(nr());return e==null||e.warn,t}var ir={exports:{}},or={},ar={exports:{}},ur={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pe=R;function Kr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qr=typeof Object.is=="function"?Object.is:Kr,zr=pe.useState,Hr=pe.useEffect,Vr=pe.useLayoutEffect,Wr=pe.useDebugValue;function Gr(e,t){var s=t(),r=zr({inst:{value:s,getSnapshot:t}}),n=r[0].inst,o=r[1];return Vr(function(){n.value=s,n.getSnapshot=t,Ve(n)&&o({inst:n})},[e,s,t]),Hr(function(){return Ve(n)&&o({inst:n}),e(function(){Ve(n)&&o({inst:n})})},[e]),Wr(s),s}function Ve(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!qr(e,s)}catch{return!0}}function Jr(e,t){return t()}var Xr=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jr:Gr;ur.useSyncExternalStore=pe.useSyncExternalStore!==void 0?pe.useSyncExternalStore:Xr;ar.exports=ur;var Yr=ar.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ue=R,Zr=Yr;function tn(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var en=typeof Object.is=="function"?Object.is:tn,sn=Zr.useSyncExternalStore,rn=Ue.useRef,nn=Ue.useEffect,on=Ue.useMemo,an=Ue.useDebugValue;or.useSyncExternalStoreWithSelector=function(e,t,s,r,n){var o=rn(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=on(function(){function l(p){if(!c){if(c=!0,d=p,p=r(p),n!==void 0&&i.hasValue){var y=i.value;if(n(y,p))return h=y}return h=p}if(y=h,en(d,p))return y;var m=r(p);return n!==void 0&&n(y,m)?y:(d=p,h=m)}var c=!1,d,h,f=s===void 0?null:s;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,s,r,n]);var a=sn(e,o[0],o[1]);return nn(function(){i.hasValue=!0,i.value=a},[a]),an(a),a};ir.exports=or;var un=ir.exports;class cn{constructor(t,s){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=r=>{var n,o;this.listeners.add(r);const i=(o=(n=this.options)==null?void 0:n.onSubscribe)==null?void 0:o.call(n,r,this);return()=>{this.listeners.delete(r),i==null||i()}},this.setState=r=>{var n,o,i;const a=this.state;this.state=(n=this.options)!=null&&n.updateFn?this.options.updateFn(a)(r):r(a),(i=(o=this.options)==null?void 0:o.onUpdate)==null||i.call(o),this._flush()},this._flush=()=>{if(this._batching)return;const r=++this._flushing;this.listeners.forEach(n=>{this._flushing===r&&n()})},this.batch=r=>{if(this._batching)return r();this._batching=!0,r(),this._batching=!1,this._flush()},this.state=t,this.options=s}}function ln(e,t=s=>s){return un.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,hn)}function hn(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!1;for(let r=0;r<s.length;r++)if(!Object.prototype.hasOwnProperty.call(t,s[r])||!Object.is(e[s[r]],t[s[r]]))return!1;return!0}const it="__root__";function dn(e,t){let s,r,n,o="";for(s in e)if((n=e[s])!==void 0)if(Array.isArray(n))for(r=0;r<n.length;r++)o&&(o+="&"),o+=encodeURIComponent(s)+"="+encodeURIComponent(n[r]);else o&&(o+="&"),o+=encodeURIComponent(s)+"="+encodeURIComponent(n);return""+o}function xs(e){if(!e)return"";const t=decodeURIComponent(e);return t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t}function fn(e,t){let s,r;const n={},o=e.split("&");for(;s=o.shift();){const i=s.indexOf("=");if(i!==-1){r=s.slice(0,i);const a=s.slice(i+1);n[r]!==void 0?n[r]=[].concat(n[r],xs(a)):n[r]=xs(a)}else r=s,n[r]=""}return n}const pn=vn(JSON.parse),mn=yn(JSON.stringify,JSON.parse);function vn(e){return t=>{t.substring(0,1)==="?"&&(t=t.substring(1));const s=fn(t);for(const r in s){const n=s[r];if(typeof n=="string")try{s[r]=e(n)}catch{}}return s}}function yn(e,t){function s(r){if(typeof r=="object"&&r!==null)try{return e(r)}catch{}else if(typeof r=="string"&&typeof t=="function")try{return t(r),e(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(o=>{const i=r[o];typeof i>"u"||i===void 0?delete r[o]:r[o]=s(i)});const n=dn(r).toString();return n?`?${n}`:""}}function Ie(e){return e[e.length-1]}function gn(e){return typeof e=="function"}function Yt(e,t){return gn(e)?e(t):e}function Pe(e,t){return t.reduce((s,r)=>(s[r]=e[r],s),{})}function vt(e,t){if(e===t)return e;const s=t,r=Ms(e)&&Ms(s);if(r||Te(e)&&Te(s)){const n=r?e:Object.keys(e),o=n.length,i=r?s:Object.keys(s),a=i.length,l=r?[]:{};let c=0;for(let d=0;d<a;d++){const h=r?d:i[d];(!r&&n.includes(h)||r)&&e[h]===void 0&&s[h]===void 0?(l[h]=void 0,c++):(l[h]=vt(e[h],s[h]),l[h]===e[h]&&e[h]!==void 0&&c++)}return o===a&&c===o?e:l}return s}function Te(e){if(!Es(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const s=t.prototype;return!(!Es(s)||!s.hasOwnProperty("isPrototypeOf"))}function Es(e){return Object.prototype.toString.call(e)==="[object Object]"}function Ms(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zt(e,t,s=!1){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Te(e)&&Te(t)){const r=Object.keys(e).filter(o=>e[o]!==void 0),n=Object.keys(t).filter(o=>t[o]!==void 0);return!s&&r.length!==n.length?!1:!n.some(o=>!(o in e)||!Zt(e[o],t[o],s))}return Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:!e.some((r,n)=>!Zt(r,t[n],s)):!1}const We=typeof window<"u"?R.useLayoutEffect:R.useEffect;function Xt(e){let t,s;const r=new Promise((n,o)=>{t=n,s=o});return r.status="pending",r.resolve=n=>{r.status="resolved",r.value=n,t(n),e==null||e(n)},r.reject=n=>{r.status="rejected",s(n)},r}function Ls(e){const t=R.useRef({value:e,prev:null}),s=t.current.value;return e!==s&&(t.current={value:e,prev:s}),t.current.prev}function bn(e,t,s={},r={}){const n=R.useRef(typeof IntersectionObserver=="function"),o=R.useRef(null);return R.useEffect(()=>{if(!(!e.current||!n.current||r.disabled))return o.current=new IntersectionObserver(([i])=>{t(i)},s),o.current.observe(e.current),()=>{var i;(i=o.current)==null||i.disconnect()}},[t,s,r.disabled,e]),o.current}function Sn(e){const t=R.useRef(null);return R.useEffect(()=>{e&&(typeof e=="function"?e(t.current):e.current=t.current)}),t}function At(e){return Be(e.filter(t=>t!==void 0).join("/"))}function Be(e){return e.replace(/\/{2,}/g,"/")}function ds(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function Ut(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function Pn(e){return Ut(ds(e))}function je(e,t){return e.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function Rn(e,t,s){return je(e,s)===je(t,s)}function wn({basepath:e,base:t,to:s,trailingSlash:r="never"}){var n,o;t=De(e,t),s=De(e,s);let i=me(t);const a=me(s);i.length>1&&((n=Ie(i))==null?void 0:n.value)==="/"&&i.pop(),a.forEach((c,d)=>{c.value==="/"?d?d===a.length-1&&i.push(c):i=[c]:c.value===".."?i.pop():c.value==="."||i.push(c)}),i.length>1&&(((o=Ie(i))==null?void 0:o.value)==="/"?r==="never"&&i.pop():r==="always"&&i.push({type:"pathname",value:"/"}));const l=At([e,...i.map(c=>c.value)]);return Be(l)}function me(e){if(!e)return[];e=Be(e);const t=[];if(e.slice(0,1)==="/"&&(e=e.substring(1),t.push({type:"pathname",value:"/"})),!e)return t;const s=e.split("/").filter(Boolean);return t.push(...s.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURIComponent(r)})),e.slice(-1)==="/"&&(e=e.substring(1),t.push({type:"pathname",value:"/"})),t}function Ge({path:e,params:t,leaveWildcards:s,leaveParams:r}){const n=me(e),o={};for(const[i,a]of Object.entries(t)){const l=typeof a=="string";["*","_splat"].includes(i)?o[i]=l?encodeURI(a):a:o[i]=l?encodeURIComponent(a):a}return At(n.map(i=>{if(i.type==="wildcard"){const a=o._splat;return s?`${i.value}${a??""}`:a}if(i.type==="param"){if(r){const a=o[i.value];return`${i.value}${a??""}`}return o[i.value.substring(1)]??"undefined"}return i.value}))}function Le(e,t,s){const r=_n(e,t,s);if(!(s.to&&!r))return r??{}}function De(e,t){switch(!0){case e==="/":return t;case t===e:return"";case t.length<e.length:return t;case t[e.length]!=="/":return t;case t.startsWith(e):return t.slice(e.length);default:return t}}function _n(e,t,s){t=De(e,t);const r=De(e,`${s.to??"$"}`),n=me(t),o=me(r);t.startsWith("/")||n.unshift({type:"pathname",value:"/"}),r.startsWith("/")||o.unshift({type:"pathname",value:"/"});const i={};return(()=>{for(let l=0;l<Math.max(n.length,o.length);l++){const c=n[l],d=o[l],h=l>=n.length-1,f=l>=o.length-1;if(d){if(d.type==="wildcard"){if(c!=null&&c.value){const p=decodeURI(At(n.slice(l).map(y=>y.value)));return i["*"]=p,i._splat=p,!0}return!1}if(d.type==="pathname"){if(d.value==="/"&&!(c!=null&&c.value))return!0;if(c){if(s.caseSensitive){if(d.value!==c.value)return!1}else if(d.value.toLowerCase()!==c.value.toLowerCase())return!1}}if(!c)return!1;if(d.type==="param"){if(c.value==="/")return!1;c.value.charAt(0)!=="$"&&(i[d.value.substring(1)]=decodeURIComponent(c.value))}}if(!h&&f)return i["**"]=At(n.slice(l+1).map(p=>p.value)),!!s.fuzzy&&(d==null?void 0:d.value)!=="/"}return!0})()?i:void 0}function Qt(e){return!!(e!=null&&e.isRedirect)}function Os(e){return!!(e!=null&&e.isRedirect)&&e.href}function fs(e){const t=e.errorComponent??Ne;return C.jsx(Cn,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:s,reset:r})=>s?R.createElement(t,{error:s,reset:r}):e.children})}class Cn extends R.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,s){s.error&&s.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,s){this.props.onCatch&&this.props.onCatch(t,s)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Ne({error:e}){const[t,s]=R.useState(!1);return C.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[C.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[C.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),C.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>s(r=>!r),children:t?"Hide Error":"Show Error"})]}),C.jsx("div",{style:{height:".25rem"}}),t?C.jsx("div",{children:C.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?C.jsx("code",{children:e.message}):null})}):null]})}function rt(e){const t=xt({warn:(e==null?void 0:e.router)===void 0});return ln(((e==null?void 0:e.router)||t).__store,e==null?void 0:e.select)}function xn(e={}){if(e.isNotFound=!0,e.throw)throw e;return e}function yt(e){return!!(e!=null&&e.isNotFound)}function En(e){const t=rt({select:s=>`not-found-${s.location.pathname}-${s.status}`});return C.jsx(fs,{getResetKey:()=>t,onCatch:(s,r)=>{var n;if(yt(s))(n=e.onCatch)==null||n.call(e,s,r);else throw s},errorComponent:({error:s})=>{var r;return(r=e.fallback)==null?void 0:r.call(e,s)},children:e.children})}function Mn(){return C.jsx("p",{children:"Not Found"})}const Ln=["component","errorComponent","pendingComponent","notFoundComponent"];function xi(e){return new On(e)}class On{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.subscribers=new Set,this.startReactTransition=s=>s(),this.update=s=>{s.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options;this.options={...this.options,...s},this.isServer=this.options.isServer??typeof document>"u",(!this.basepath||s.basepath&&s.basepath!==r.basepath)&&(s.basepath===void 0||s.basepath===""||s.basepath==="/"?this.basepath="/":this.basepath=`/${Pn(s.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?Nr({initialEntries:[this.basepath||"/"]}):Br()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new cn(Tn(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(n=>!["redirected"].includes(n.status))}}}))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999}),this.routesById[s.id]=s);const r=i=>{i.forEach((a,l)=>{a.init({originalIndex:l});const c=this.routesById[a.id];if(st(!c,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const h=Ut(a.fullPath);(!this.routesByPath[h]||a.fullPath.endsWith("/"))&&(this.routesByPath[h]=a)}const d=a.children;d!=null&&d.length&&r(d)})};r([this.routeTree]);const n=[];Object.values(this.routesById).forEach((i,a)=>{var l;if(i.isRoot||!i.path)return;const c=ds(i.fullPath),d=me(c);for(;d.length>1&&((l=d[0])==null?void 0:l.value)==="/";)d.shift();const h=d.map(f=>f.value==="/"?.75:f.type==="param"?.5:f.type==="wildcard"?.25:1);n.push({child:i,trimmed:c,parsed:d,index:a,scores:h})}),this.flatRoutes=n.sort((i,a)=>{const l=Math.min(i.scores.length,a.scores.length);for(let c=0;c<l;c++)if(i.scores[c]!==a.scores[c])return a.scores[c]-i.scores[c];if(i.scores.length!==a.scores.length)return a.scores.length-i.scores.length;for(let c=0;c<l;c++)if(i.parsed[c].value!==a.parsed[c].value)return i.parsed[c].value>a.parsed[c].value?1:-1;return i.index-a.index}).map((i,a)=>(i.child.rank=a,i.child))},this.subscribe=(s,r)=>{const n={eventType:s,fn:r};return this.subscribers.add(n),()=>{this.subscribers.delete(n)}},this.emit=s=>{this.subscribers.forEach(r=>{r.eventType===s.type&&r.fn(s)})},this.parseLocation=s=>{const r=({pathname:a,search:l,hash:c,state:d})=>{const h=this.options.parseSearch(l),f=this.options.stringifySearch(h);return{pathname:a,searchStr:f,search:vt(s==null?void 0:s.search,h),hash:c.split("#").reverse()[0]??"",href:`${a}${f}${c}`,state:vt(s==null?void 0:s.state,d)}},n=r(this.history.location),{__tempLocation:o,__tempKey:i}=n.state;if(o&&(!i||i===this.tempLocationKey)){const a=r(o);return a.state.key=n.state.key,delete a.state.__tempLocation,{...a,maskedLocation:n}}return n},this.resolvePathWithBase=(s,r)=>wn({basepath:this.basepath,base:s,to:Be(r),trailingSlash:this.options.trailingSlash}),this.matchRoutes=(s,r,n)=>{let o={};const i=this.flatRoutes.find(p=>{const y=Le(this.basepath,Ut(s),{to:p.fullPath,caseSensitive:p.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});return y?(o=y,!0):!1});let a=i||this.routesById[it];const l=[a];let c=!1;for((i?i.path!=="/"&&o["**"]:Ut(s))&&(this.options.notFoundRoute?l.push(this.options.notFoundRoute):c=!0);a.parentRoute;)a=a.parentRoute,l.unshift(a);const d=(()=>{if(c){if(this.options.notFoundMode!=="root")for(let p=l.length-1;p>=0;p--){const y=l[p];if(y.children)return y.id}return it}})(),h=l.map(p=>{var y;let m;const v=((y=p.options.params)==null?void 0:y.parse)??p.options.parseParams;if(v)try{const P=v(o);Object.assign(o,P)}catch(P){if(m=new In(P.message,{cause:P}),n!=null&&n.throwOnError)throw m;return m}}),f=[];return l.forEach((p,y)=>{var m,v,P,x,b,E,T,F,_,S;const M=f[y-1],[Q,k]=(()=>{const B=(M==null?void 0:M.search)??r;try{const z=typeof p.options.validateSearch=="object"?p.options.validateSearch.parse:p.options.validateSearch,G=(z==null?void 0:z(B))??{};return[{...B,...G},void 0]}catch(z){const G=new Fn(z.message,{cause:z});if(n!=null&&n.throwOnError)throw G;return[B,G]}})(),A=((v=(m=p.options).loaderDeps)==null?void 0:v.call(m,{search:Q}))??"",j=A?JSON.stringify(A):"",K=Ge({path:p.fullPath,params:o}),W=Ge({path:p.id,params:o,leaveWildcards:!0})+j,ht=this.getMatch(W),dt=this.state.matches.find(B=>B.id===W)?"stay":"enter";let D;if(ht)D={...ht,cause:dt,params:o};else{const B=p.options.loader||p.options.beforeLoad||p.lazyFn?"pending":"success";D={id:W,index:y,routeId:p.id,params:o,pathname:At([this.basepath,K]),updatedAt:Date.now(),search:{},searchError:void 0,status:B,isFetching:!1,error:void 0,paramsError:h[y],routeContext:void 0,context:void 0,abortController:new AbortController,fetchCount:0,cause:dt,loaderDeps:A,invalid:!1,preload:!1,links:(x=(P=p.options).links)==null?void 0:x.call(P),scripts:(E=(b=p.options).scripts)==null?void 0:E.call(b),staticData:p.options.staticData||{},loadPromise:Xt()}}D.status==="success"&&(D.meta=(F=(T=p.options).meta)==null?void 0:F.call(T,{matches:f,match:D,params:D.params,loaderData:D.loaderData}),D.headers=(S=(_=p.options).headers)==null?void 0:S.call(_,{loaderData:D.loaderData})),n!=null&&n.preload||(D.globalNotFound=d===p.id),D.search=vt(D.search,Q),D.searchError=k,f.push(D)}),f},this.cancelMatch=s=>{const r=this.getMatch(s);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var s;(s=this.state.pendingMatches)==null||s.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=s=>{const r=(o={},i)=>{var a,l,c;const d=o._fromLocation!=null?this.matchRoutes(o._fromLocation.pathname,o.fromSearch||o._fromLocation.search):this.state.matches,h=o.from!=null?d.find(j=>Le(this.basepath,Ut(j.pathname),{to:o.from,caseSensitive:!1,fuzzy:!1})):void 0,f=(h==null?void 0:h.pathname)||this.latestLocation.pathname;st(o.from==null||h!=null,"Could not find match for from: "+o.from);const p=((a=Ie(d))==null?void 0:a.search)||this.latestLocation.search,y=i==null?void 0:i.filter(j=>d.find(K=>K.routeId===j.routeId)),m=this.routesById[(l=y==null?void 0:y.find(j=>j.pathname===f))==null?void 0:l.routeId];let v=o.to?this.resolvePathWithBase(f,`${o.to}`):this.resolvePathWithBase(f,(m==null?void 0:m.to)??f);const P={...(c=Ie(d))==null?void 0:c.params};let x=(o.params??!0)===!0?P:{...P,...Yt(o.params,P)};Object.keys(x).length>0&&(i==null||i.map(j=>{var K;const W=this.looseRoutesById[j.routeId];return((K=W==null?void 0:W.options.params)==null?void 0:K.stringify)??W.options.stringifyParams}).filter(Boolean).forEach(j=>{x={...x,...j(x)}})),v=Ge({path:v,params:x??{},leaveWildcards:!1,leaveParams:s.leaveParams});const b=(y==null?void 0:y.map(j=>this.looseRoutesById[j.routeId].options.preSearchFilters??[]).flat().filter(Boolean))??[],E=(y==null?void 0:y.map(j=>this.looseRoutesById[j.routeId].options.postSearchFilters??[]).flat().filter(Boolean))??[],T=b.length?b.reduce((j,K)=>K(j),p):p,F=o.search===!0?T:o.search?Yt(o.search,T):b.length?T:{},_=E.length?E.reduce((j,K)=>K(j),F):F,S=vt(p,_),M=this.options.stringifySearch(S),Q=o.hash===!0?this.latestLocation.hash:o.hash?Yt(o.hash,this.latestLocation.hash):void 0,k=Q?`#${Q}`:"";let A=o.state===!0?this.latestLocation.state:o.state?Yt(o.state,this.latestLocation.state):{};return A=vt(this.latestLocation.state,A),{pathname:v,search:S,searchStr:M,state:A,hash:Q??"",href:`${v}${M}${k}`,unmaskOnReload:o.unmaskOnReload}},n=(o={},i)=>{var a;const l=r(o);let c=i?r(i):void 0;if(!c){let y={};const m=(a=this.options.routeMasks)==null?void 0:a.find(v=>{const P=Le(this.basepath,l.pathname,{to:v.from,caseSensitive:!1,fuzzy:!1});return P?(y=P,!0):!1});if(m){const{from:v,...P}=m;i={...Pe(s,["from"]),...P,params:y},c=r(i)}}const d=this.matchRoutes(l.pathname,l.search),h=c?this.matchRoutes(c.pathname,c.search):void 0,f=c?r(i,h):void 0,p=r(o,d);return f&&(p.maskedLocation=f),p};return s.mask?n(s,{...Pe(s,["from"]),...s.mask}):n(s)},this.commitLocation=({viewTransition:s,ignoreBlocker:r,...n})=>{const o=()=>{n.state.key=this.latestLocation.state.key;const l=Zt(n.state,this.latestLocation.state);return delete n.state.key,l},i=this.latestLocation.href===n.href,a=this.commitLocationPromise;if(this.commitLocationPromise=Xt(()=>{a==null||a.resolve()}),i&&o())this.load();else{let{maskedLocation:l,...c}=n;l&&(c={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...c,search:c.searchStr,state:{...c.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(c.unmaskOnReload??this.options.unmaskOnReload??!1)&&(c.state.__tempKey=this.tempLocationKey)),this.shouldViewTransition=s,this.history[n.replace?"replace":"push"](c.href,c.state,{ignoreBlocker:r})}return this.resetNextScroll=n.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:s,resetScroll:r,viewTransition:n,ignoreBlocker:o,...i}={})=>{const a=this.buildLocation(i);return this.commitLocation({...a,viewTransition:n,replace:s,resetScroll:r,ignoreBlocker:o})},this.navigate=({from:s,to:r,__isRedirect:n,...o})=>{const i=String(r);let a;try{new URL(`${i}`),a=!0}catch{}return st(!a),this.buildAndCommitLocation({...o,from:s,to:r})},this.load=async()=>{this.latestLocation=this.parseLocation(this.latestLocation),this.__store.setState(o=>({...o,loadedAt:Date.now()}));let s,r;const n=new Promise(o=>{this.startReactTransition(async()=>{var i;try{const a=this.latestLocation,l=this.state.resolvedLocation,c=l.href!==a.href;this.cancelMatches();let d;this.__store.batch(()=>{d=this.matchRoutes(a.pathname,a.search),this.__store.setState(h=>({...h,status:"pending",isLoading:!0,location:a,pendingMatches:d,cachedMatches:h.cachedMatches.filter(f=>!d.find(p=>p.id===f.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:l,toLocation:a,pathChanged:c}),this.emit({type:"onBeforeLoad",fromLocation:l,toLocation:a,pathChanged:c}),await this.loadMatches({matches:d,location:a,onReady:async()=>{this.startViewTransition(async()=>{let h,f,p;this.__store.batch(()=>{this.__store.setState(y=>{const m=y.matches,v=y.pendingMatches||y.matches;return h=m.filter(P=>!v.find(x=>x.id===P.id)),f=v.filter(P=>!m.find(x=>x.id===P.id)),p=m.filter(P=>v.find(x=>x.id===P.id)),{...y,isLoading:!1,matches:v,pendingMatches:void 0,cachedMatches:[...y.cachedMatches,...h.filter(P=>P.status!=="error")]}}),this.cleanCache()}),[[h,"onLeave"],[f,"onEnter"],[p,"onStay"]].forEach(([y,m])=>{y.forEach(v=>{var P,x;(x=(P=this.looseRoutesById[v.routeId].options)[m])==null||x.call(P,v)})})})}})}catch(a){Os(a)?(s=a,this.isServer||this.navigate({...a,replace:!0,__isRedirect:!0})):yt(a)&&(r=a),this.__store.setState(l=>({...l,statusCode:s?s.statusCode:r?404:l.matches.some(c=>c.status==="error")?500:200,redirect:s}))}this.latestLoadPromise===n&&((i=this.commitLocationPromise)==null||i.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})});for(this.latestLoadPromise=n,await n;this.latestLoadPromise&&n!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=s=>{var r,n;const o=this.shouldViewTransition??this.options.defaultViewTransition;delete this.shouldViewTransition,(n=(r=o&&typeof document<"u"?document:void 0)==null?void 0:r.startViewTransition)!=null&&n.call(r,s)||s()},this.updateMatch=(s,r)=>{var n;let o;const i=(n=this.state.pendingMatches)==null?void 0:n.find(c=>c.id===s),a=this.state.matches.find(c=>c.id===s),l=i?"pendingMatches":a?"matches":"cachedMatches";return this.__store.setState(c=>{var d;return{...c,[l]:(d=c[l])==null?void 0:d.map(h=>h.id===s?o=r(h):h)}}),o},this.getMatch=s=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===s),this.loadMatches=async({location:s,matches:r,preload:n,onReady:o,updateMatch:i=this.updateMatch})=>{let a,l=!1;const c=async()=>{l||(l=!0,await(o==null?void 0:o()))};!this.isServer&&!this.state.matches.length&&c();const d=(h,f)=>{var p,y,m;if(Os(f))throw f;if(Qt(f)||yt(f)){if(i(h.id,v=>({...v,status:Qt(f)?"redirected":yt(f)?"notFound":"error",isFetching:!1,error:f,beforeLoadPromise:void 0,loaderPromise:void 0})),f.routeId||(f.routeId=h.routeId),(p=h.beforeLoadPromise)==null||p.resolve(),(y=h.loaderPromise)==null||y.resolve(),(m=h.loadPromise)==null||m.resolve(),Qt(f))throw l=!0,f=this.resolveRedirect({...f,_fromLocation:s}),f;if(yt(f))throw this._handleNotFound(r,f,{updateMatch:i}),f}};try{await new Promise((h,f)=>{(async()=>{var p,y,m;try{const v=(b,E,T)=>{var F,_;const{id:S,routeId:M}=r[b],Q=this.looseRoutesById[M];if(E instanceof Promise)throw E;E.routerCode=T,a=a??b,d(this.getMatch(S),E);try{(_=(F=Q.options).onError)==null||_.call(F,E)}catch(k){E=k,d(this.getMatch(S),E)}i(S,k=>{var A;return(A=k.beforeLoadPromise)==null||A.resolve(),{...k,error:E,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[b,{id:E,routeId:T}]of r.entries()){const F=this.getMatch(E);if(F.beforeLoadPromise||F.loaderPromise)await F.beforeLoadPromise;else{try{i(E,N=>({...N,loadPromise:Xt(()=>{var ot;(ot=N.loadPromise)==null||ot.resolve()}),beforeLoadPromise:Xt()}));const _=this.looseRoutesById[T],S=new AbortController,M=(p=r[b-1])==null?void 0:p.id,Q=()=>M?this.getMatch(M).context??this.options.context??{}:this.options.context??{},k=_.options.pendingMs??this.options.defaultPendingMs,A=!!(o&&!this.isServer&&!n&&(_.options.loader||_.options.beforeLoad)&&typeof k=="number"&&k!==1/0&&(_.options.pendingComponent??this.options.defaultPendingComponent));let j;A&&(j=setTimeout(()=>{try{c()}catch{}},k));const{paramsError:K,searchError:W}=this.getMatch(E);K&&v(b,K,"PARSE_PARAMS"),W&&v(b,W,"VALIDATE_SEARCH");const ht=Q();i(E,N=>({...N,isFetching:"beforeLoad",fetchCount:N.fetchCount+1,routeContext:vt(N.routeContext,ht),context:vt(N.context,ht),abortController:S,pendingTimeout:j}));const{search:dt,params:D,routeContext:B,cause:z}=this.getMatch(E),G={search:dt,abortController:S,params:D,preload:!!n,context:B,location:s,navigate:N=>this.navigate({...N,_fromLocation:s}),buildLocation:this.buildLocation,cause:n?"preload":z},Z=await((m=(y=_.options).beforeLoad)==null?void 0:m.call(y,G))??{};(Qt(Z)||yt(Z))&&v(b,Z,"BEFORE_LOAD"),i(E,N=>{const ot={...N.routeContext,...Z};return{...N,routeContext:vt(N.routeContext,ot),context:vt(N.context,ot),abortController:S}})}catch(_){v(b,_,"BEFORE_LOAD")}i(E,_=>{var S;return(S=_.beforeLoadPromise)==null||S.resolve(),{..._,beforeLoadPromise:void 0,isFetching:!1}})}}const P=r.slice(0,a),x=[];P.forEach(({id:b,routeId:E},T)=>{x.push((async()=>{const{loaderPromise:F}=this.getMatch(b);if(F)await F;else{const _=x[T-1],S=this.looseRoutesById[E],M=()=>{const{params:B,loaderDeps:z,abortController:G,context:Z,cause:N}=this.getMatch(b);return{params:B,deps:z,preload:!!n,parentMatchPromise:_,abortController:G,context:Z,location:s,navigate:ot=>this.navigate({...ot,_fromLocation:s}),cause:n?"preload":N,route:S}},Q=Date.now()-this.getMatch(b).updatedAt,k=n?S.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:S.options.staleTime??this.options.defaultStaleTime??0,A=S.options.shouldReload,j=typeof A=="function"?A(M()):A;i(b,B=>({...B,loaderPromise:Xt(),preload:!!n&&!this.state.matches.find(z=>z.id===b)}));const K=async()=>{var B,z,G,Z,N,ot,ye,Ee;try{const Gt=async()=>{const ft=this.getMatch(b);ft.minPendingPromise&&await ft.minPendingPromise};try{S._lazyPromise=S._lazyPromise||(S.lazyFn?S.lazyFn().then(mt=>{Object.assign(S.options,mt.options)}):Promise.resolve());const ft=this.getMatch(b).componentsPromise||S._lazyPromise.then(()=>Promise.all(Ln.map(async mt=>{const Jt=S.options[mt];Jt!=null&&Jt.preload&&await Jt.preload()})));i(b,mt=>({...mt,isFetching:"loader",componentsPromise:ft})),await S._lazyPromise;let J=await((z=(B=S.options).loader)==null?void 0:z.call(B,M()));this.serializeLoaderData&&(J=this.serializeLoaderData(J,{router:this,match:this.getMatch(b)})),d(this.getMatch(b),J),await Gt();const pt=(Z=(G=S.options).meta)==null?void 0:Z.call(G,{matches:r,match:this.getMatch(b),params:this.getMatch(b).params,loaderData:J}),ge=(ot=(N=S.options).headers)==null?void 0:ot.call(N,{loaderData:J});i(b,mt=>({...mt,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:J,meta:pt,headers:ge}))}catch(ft){let J=ft;await Gt(),d(this.getMatch(b),ft);try{(Ee=(ye=S.options).onError)==null||Ee.call(ye,ft)}catch(pt){J=pt,d(this.getMatch(b),pt)}i(b,pt=>({...pt,error:J,status:"error",isFetching:!1}))}await this.getMatch(b).componentsPromise}catch(Gt){d(this.getMatch(b),Gt)}},{status:W,invalid:ht}=this.getMatch(b);W==="success"&&(ht||(j??Q>k))?(async()=>{try{await K()}catch{}})():W!=="success"&&await K();const{loaderPromise:dt,loadPromise:D}=this.getMatch(b);dt==null||dt.resolve(),D==null||D.resolve()}i(b,_=>({..._,isFetching:!1,loaderPromise:void 0}))})())}),await Promise.all(x),h()}catch(v){f(v)}})()}),await c()}catch(h){if(Qt(h)||yt(h))throw yt(h)&&!n&&await c(),h}return r},this.invalidate=()=>{const s=r=>({...r,invalid:!0,...r.status==="error"?{status:"pending",error:void 0}:{}});return this.__store.setState(r=>{var n;return{...r,matches:r.matches.map(s),cachedMatches:r.cachedMatches.map(s),pendingMatches:(n=r.pendingMatches)==null?void 0:n.map(s)}}),this.load()},this.resolveRedirect=s=>{const r=s;return r.href||(r.href=this.buildLocation(r).href),r},this.cleanCache=()=>{this.__store.setState(s=>({...s,cachedMatches:s.cachedMatches.filter(r=>{const n=this.looseRoutesById[r.routeId];if(!n.options.loader)return!1;const o=(r.preload?n.options.preloadGcTime??this.options.defaultPreloadGcTime:n.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return r.status!=="error"&&Date.now()-r.updatedAt<o})}))},this.preloadRoute=async s=>{const r=this.buildLocation(s);let n=this.matchRoutes(r.pathname,r.search,{throwOnError:!0,preload:!0});const o=Object.fromEntries([...this.state.matches,...this.state.pendingMatches??[],...this.state.cachedMatches].map(a=>[a.id,!0]));this.__store.batch(()=>{n.forEach(a=>{o[a.id]||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,a]}))})});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id));try{return n=await this.loadMatches({matches:n,location:r,preload:!0,updateMatch:(a,l)=>{i.has(a)?n=n.map(c=>c.id===a?l(c):c):this.updateMatch(a,l)}}),n}catch(a){if(Qt(a))return await this.preloadRoute({...a,_fromLocation:r});console.error(a);return}},this.matchRoute=(s,r)=>{const n={...s,to:s.to?this.resolvePathWithBase(s.from||"",s.to):void 0,params:s.params||{},leaveParams:!0},o=this.buildLocation(n);if(r!=null&&r.pending&&this.state.status!=="pending")return!1;const a=((r==null?void 0:r.pending)===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,l=Le(this.basepath,a.pathname,{...r,to:o.pathname});return!l||s.params&&!Zt(l,s.params,!0)?!1:l&&((r==null?void 0:r.includeSearch)??!0)?Zt(a.search,o.search,!0)?l:!1:l},this.dehydrate=()=>{var s;const r=((s=this.options.errorSerializer)==null?void 0:s.serialize)??jn;return{state:{dehydratedMatches:this.state.matches.map(n=>({...Pe(n,["id","status","updatedAt"]),error:n.error?{data:r(n.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var s,r,n;let o;typeof document<"u"&&(o=this.options.transformer.parse((s=window.__TSR__)==null?void 0:s.dehydrated)),st(o),this.dehydratedData=o.payload,(n=(r=this.options).hydrate)==null||n.call(r,o.payload);const i=o.router.state,a=this.matchRoutes(this.state.location.pathname,this.state.location.search).map(l=>{const c=i.dehydratedMatches.find(d=>d.id===l.id);return st(c,`Could not find a client-side match for dehydrated match with id: ${l.id}!`),{...l,...c}});this.__store.setState(l=>({...l,matches:a})),this.manifest=o.router.manifest},this.injectedHtml=[],this.injectHtml=s=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(n=>n!==r),s);this.injectedHtml.push(r)},this.streamedKeys=new Set,this.getStreamedValue=s=>{var r;if(this.isServer)return;const n=(r=window.__TSR__)==null?void 0:r.streamedValues[s];if(n)return n.parsed||(n.parsed=this.options.transformer.parse(n.value)),n.parsed},this.streamValue=(s,r)=>{var n;this.streamedKeys.has(s),this.streamedKeys.add(s);const o=`__TSR__.streamedValues['${s}'] = { value: ${(n=this.serializer)==null?void 0:n.call(this,this.options.transformer.stringify(r))}}`;this.injectHtml(`<script class='tsr-once'>${o}; __TSR__.cleanScripts()<\/script>`)},this._handleNotFound=(s,r,{updateMatch:n=this.updateMatch}={})=>{const o=Object.fromEntries(s.map(l=>[l.routeId,l]));let i=(r.global?this.looseRoutesById[it]:this.looseRoutesById[r.routeId])||this.looseRoutesById[it];for(;!i.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&i.id!==it;)i=i.parentRoute,st(i);const a=o[i.id];st(a,"Could not find match for route: "+i.id),n(a.id,l=>({...l,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&i.parentRoute&&(r.routeId=i.parentRoute.id,this._handleNotFound(s,r,{updateMatch:n}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(s=>s.status==="notFound"||s.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??mn,parseSearch:t.parseSearch??pn,transformer:t.transformer??{parse:JSON.parse,stringify:JSON.stringify}}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}}class Fn extends Error{}class In extends Error{}function Tn(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...e},location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function jn(e){return e instanceof Error?{name:e.name,message:e.message}:{data:e}}function Fs(e){return!(typeof e=="object"&&e&&"data"in e)||!("__isServerError"in e&&e.__isServerError)||!(typeof e.data=="object"&&e.data)?!1:e.__isServerError===!0}function Is(e){if("name"in e&&"message"in e){const t=new Error(e.message);return t.name=e.name,t}return e.data}const $e=R.createContext(void 0);function Rt(e){const t=R.useContext($e);return rt({select:r=>{const n=r.matches.find(o=>e.from?e.from===o.routeId:o.id===t);if(st(!((e.shouldThrow??!0)&&!n),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),n!==void 0)return e.select?e.select(n):n}})}function ps(e){return Rt({...e,select:t=>typeof e.select=="function"?e.select(t.loaderDeps):t.loaderDeps})}function ms(e){return Rt({...e,select:t=>typeof e.select=="function"?e.select(t.loaderData):t.loaderData})}function vs(e){return Rt({...e,select:t=>e.select?e.select(t.params):t.params})}function ys(e){return Rt({...e,select:t=>e.select?e.select(t.search):t.search})}function gs(e){const{navigate:t}=xt();return R.useCallback(s=>t({...s}),[t])}function Ei(e){return new Dn({id:e})}class Dn{constructor({id:t}){this.useMatch=s=>Rt({select:s==null?void 0:s.select,from:this.id}),this.useRouteContext=s=>Rt({from:this.id,select:r=>s!=null&&s.select?s.select(r.context):r.context}),this.useSearch=s=>ys({...s,from:this.id}),this.useParams=s=>vs({...s,from:this.id}),this.useLoaderDeps=s=>ps({...s,from:this.id,strict:!1}),this.useLoaderData=s=>ms({...s,from:this.id,strict:!1}),this.useNavigate=()=>gs({from:this.id}),this.notFound=s=>xn({routeId:this.id,...s}),this.id=t}}class cr{constructor(t){this.init=s=>{var r,n;this.originalIndex=s.originalIndex;const o=this.options,i=!(o!=null&&o.path)&&!(o!=null&&o.id);this.parentRoute=(n=(r=this.options)==null?void 0:r.getParentRoute)==null?void 0:n.call(r),i?this.path=it:st(this.parentRoute);let a=i?it:o.path;a&&a!=="/"&&(a=ds(a));const l=(o==null?void 0:o.id)||a;let c=i?it:At([this.parentRoute.id===it?"":this.parentRoute.id,l]);a===it&&(a="/"),c!==it&&(c=At(["/",c]));const d=c===it?"/":At([this.parentRoute.fullPath,a]);this.path=a,this.id=c,this.fullPath=d,this.to=d},this.updateLoader=s=>(Object.assign(this.options,s),this),this.update=s=>(Object.assign(this.options,s),this),this.lazy=s=>(this.lazyFn=s,this),this.useMatch=s=>Rt({...s,from:this.id}),this.useRouteContext=s=>Rt({...s,from:this.id,select:r=>s!=null&&s.select?s.select(r.context):r.context}),this.useSearch=s=>ys({...s,from:this.id}),this.useParams=s=>vs({...s,from:this.id}),this.useLoaderDeps=s=>ps({...s,from:this.id}),this.useLoaderData=s=>ms({...s,from:this.id}),this.useNavigate=()=>gs({from:this.id}),this.options=t||{},this.isRoot=!(t!=null&&t.getParentRoute),st(!(t!=null&&t.id&&(t!=null&&t.path))),this.$$typeof=Symbol.for("react.memo")}addChildren(t){return this.children=Array.isArray(t)?t:Object.values(t),this}}function kn(e){return new cr(e)}class An extends cr{constructor(t){super(t)}addChildren(t){return super.addChildren(t)}}function Mi(e){return new An(e)}function Li(e){return new Qn(e,{silent:!0}).createRoute}class Qn{constructor(t,s){this.path=t,this.createRoute=r=>{this.silent;const n=kn(r);return n.isRoot=!1,n},this.silent=s==null?void 0:s.silent}}class Un{constructor(t){this.useMatch=s=>Rt({select:s==null?void 0:s.select,from:this.options.id}),this.useRouteContext=s=>Rt({from:this.options.id,select:r=>s!=null&&s.select?s.select(r.context):r.context}),this.useSearch=s=>ys({...s,from:this.options.id}),this.useParams=s=>vs({...s,from:this.options.id}),this.useLoaderDeps=s=>ps({...s,from:this.options.id}),this.useLoaderData=s=>ms({...s,from:this.options.id}),this.useNavigate=()=>gs({from:this.options.id}),this.options=t,this.$$typeof=Symbol.for("react.memo")}}function Oi(e){return t=>new Un({id:e,...t})}const Bn="Error preloading route! ☝️";function Nn(e,t){const s=xt(),[r,n]=R.useState(!1),o=Sn(t),{activeProps:i=()=>({className:"active"}),inactiveProps:a=()=>({}),activeOptions:l,hash:c,search:d,params:h,to:f,state:p,mask:y,preload:m,preloadDelay:v,replace:P,startTransition:x,resetScroll:b,viewTransition:E,children:T,target:F,disabled:_,style:S,className:M,onClick:Q,onFocus:k,onMouseEnter:A,onMouseLeave:j,onTouchStart:K,ignoreBlocker:W,...ht}=e,dt=R.useMemo(()=>{try{return new URL(`${f}`),"external"}catch{}return"internal"},[f]),D=R.useMemo(()=>s.buildLocation(e),[s,e]),B=R.useMemo(()=>m??s.options.defaultPreload,[s.options.defaultPreload,m]),z=v??s.options.defaultPreloadDelay??0,G=rt({select:$=>{const H=je($.location.pathname,s.basepath).split("/"),qe=je(D.pathname,s.basepath).split("/").every((Or,Fr)=>Or===H[Fr]),Er=l!=null&&l.exact?Rn($.location.pathname,D.pathname,s.basepath):qe,Mr=l!=null&&l.includeHash?$.location.hash===D.hash:!0,Lr=(l==null?void 0:l.includeSearch)??!0?Zt($.location.search,D.search,!(l!=null&&l.exact)):!0;return Er&&Mr&&Lr}}),Z=R.useCallback(()=>{s.preloadRoute(e).catch($=>{console.warn($),console.warn(Bn)})},[e,s]),N=R.useCallback($=>{$!=null&&$.isIntersecting&&Z()},[Z]);if(bn(o,N,{rootMargin:"100px"},{disabled:!!_||B!=="viewport"}),dt==="external")return{...ht,ref:o,type:dt,href:f,...T&&{children:T},...F&&{target:F},..._&&{disabled:_},...S&&{style:S},...M&&{className:M},...Q&&{onClick:Q},...k&&{onFocus:k},...A&&{onMouseEnter:A},...j&&{onMouseLeave:j},...K&&{onTouchStart:K}};const ot=$=>{if(!_&&!$n($)&&!$.defaultPrevented&&(!F||F==="_self")&&$.button===0){$.preventDefault(),Ir.flushSync(()=>{n(!0)});const H=s.subscribe("onResolved",()=>{H(),n(!1)});s.commitLocation({...D,replace:P,resetScroll:b,startTransition:x,viewTransition:E,ignoreBlocker:W})}},ye=$=>{_||B&&Z()},Ee=ye,Gt=$=>{if(_)return;const H=$.target||{};if(B){if(H.preloadTimeout)return;H.preloadTimeout=setTimeout(()=>{H.preloadTimeout=null,Z()},z)}},ft=$=>{if(_)return;const H=$.target||{};H.preloadTimeout&&(clearTimeout(H.preloadTimeout),H.preloadTimeout=null)},J=$=>H=>{var Ke;(Ke=H.persist)==null||Ke.call(H),$.filter(Boolean).forEach(qe=>{H.defaultPrevented||qe(H)})},pt=G?Yt(i,{})??{}:{},ge=G?{}:Yt(a,{}),mt=[M,pt.className,ge.className].filter(Boolean).join(" "),Jt={...S,...pt.style,...ge.style};return{...pt,...ge,...ht,href:_?void 0:D.maskedLocation?s.history.createHref(D.maskedLocation.href):s.history.createHref(D.href),ref:o,onClick:J([Q,ot]),onFocus:J([k,ye]),onMouseEnter:J([A,Gt]),onMouseLeave:J([j,ft]),onTouchStart:J([K,Ee]),disabled:!!_,target:F,...Object.keys(Jt).length&&{style:Jt},...mt&&{className:mt},..._&&{role:"link","aria-disabled":!0},...G&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}const Fi=R.forwardRef((e,t)=>{const{_asChild:s,...r}=e,{type:n,ref:o,...i}=Nn(r,t),a=typeof r.children=="function"?r.children({isActive:i["data-status"]==="active"}):r.children;return typeof s>"u"&&delete i.disabled,R.createElement(s||"a",{...i,ref:o},a)});function $n(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Kn(){const e=xt(),t=R.useRef({router:e,mounted:!1}),s=rt({select:c=>Pe(c,["isLoading","location","resolvedLocation","isTransitioning"])}),[r,n]=R.useTransition(),o=rt({select:c=>c.matches.some(d=>d.status==="pending")}),i=Ls(s.isLoading),a=s.isLoading||r||o,l=Ls(a);return e.isServer||(e.startReactTransition=n),R.useEffect(()=>{const c=e.history.subscribe(e.load),d=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0});return Ut(e.latestLocation.href)!==Ut(d.href)&&e.commitLocation({...d,replace:!0}),()=>{c()}},[e,e.history]),We(()=>{var c;if((c=window.__TSR__)!=null&&c.dehydrated||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(h){console.error(h)}})()},[e]),We(()=>{if(i&&!s.isLoading){const c=e.state.location,d=e.state.resolvedLocation,h=d.href!==c.href;e.emit({type:"onLoad",fromLocation:d,toLocation:c,pathChanged:h})}},[i,e,s.isLoading]),We(()=>{if(l&&!a){const c=e.state.location,d=e.state.resolvedLocation,h=d.href!==c.href;if(e.emit({type:"onResolved",fromLocation:d,toLocation:c,pathChanged:h}),e.__store.setState(f=>({...f,status:"idle",resolvedLocation:f.location})),document.querySelector&&e.state.location.hash!==""){const f=document.getElementById(e.state.location.hash);f&&f.scrollIntoView()}}},[a,l,e]),null}function Je(e){return C.jsx(C.Fragment,{children:e.children})}function lr(e,t,s){return t.options.notFoundComponent?C.jsx(t.options.notFoundComponent,{data:s}):e.options.defaultNotFoundComponent?C.jsx(e.options.defaultNotFoundComponent,{data:s}):C.jsx(Mn,{})}const hr=R.memo(function({matchId:t}){var s,r;const n=xt(),o=rt({select:v=>{var P;return(P=v.matches.find(x=>x.id===t))==null?void 0:P.routeId}});st(o);const i=n.routesById[o],a=i.options.pendingComponent??n.options.defaultPendingComponent,l=a?C.jsx(a,{}):null,c=i.options.errorComponent??n.options.defaultErrorComponent,d=i.options.onCatch??n.options.defaultOnCatch,h=i.isRoot?i.options.notFoundComponent??((s=n.options.notFoundRoute)==null?void 0:s.options.component):i.options.notFoundComponent,f=(!i.isRoot||i.options.wrapInSuspense)&&(i.options.wrapInSuspense??a??((r=i.options.errorComponent)==null?void 0:r.preload))?R.Suspense:Je,p=c?fs:Je,y=h?En:Je,m=rt({select:v=>v.loadedAt});return C.jsx($e.Provider,{value:t,children:C.jsx(f,{fallback:l,children:C.jsx(p,{getResetKey:()=>m,errorComponent:c||Ne,onCatch:(v,P)=>{if(yt(v))throw v;d==null||d(v,P)},children:C.jsx(y,{fallback:v=>{if(!h||v.routeId&&v.routeId!==o||!v.routeId&&!i.isRoot)throw v;return R.createElement(h,v)},children:C.jsx(qn,{matchId:t})})})})})}),qn=R.memo(function({matchId:t}){var s,r,n;const o=xt(),{match:i,matchIndex:a,routeId:l}=rt({select:f=>{const p=f.matches.findIndex(v=>v.id===t),y=f.matches[p];return{routeId:y.routeId,matchIndex:p,match:Pe(y,["id","status","error","loadPromise"])}}}),c=o.routesById[l],d=R.useMemo(()=>{const f=c.options.component??o.options.defaultComponent;return f?C.jsx(f,{},l):C.jsx(zn,{})},[l,c.options.component,o.options.defaultComponent]),h=(c.options.errorComponent??o.options.defaultErrorComponent)||Ne;if(i.status==="notFound"){let f;return Fs(i.error)?f=(((s=o.options.errorSerializer)==null?void 0:s.deserialize)??Is)(i.error.data):f=i.error,st(yt(f)),lr(o,c,f)}if(i.status==="redirected")throw st(Qt(i.error)),i.loadPromise;if(i.status==="error"){if(o.isServer)return C.jsx(h,{error:i.error,info:{componentStack:""}});throw Fs(i.error)?(((r=o.options.errorSerializer)==null?void 0:r.deserialize)??Is)(i.error.data):i.error}if(i.status==="pending"){const f=c.options.pendingMinMs??o.options.defaultPendingMinMs;if(f&&!((n=o.getMatch(i.id))!=null&&n.minPendingPromise)&&!o.isServer){const p=Xt();Promise.resolve().then(()=>{o.updateMatch(i.id,y=>({...y,minPendingPromise:p}))}),setTimeout(()=>{p.resolve(),o.updateMatch(i.id,y=>({...y,minPendingPromise:void 0}))},f)}throw i.loadPromise}return C.jsxs(C.Fragment,{children:[d,o.AfterEachMatch?C.jsx(o.AfterEachMatch,{match:i,matchIndex:a}):null]})}),zn=R.memo(function(){const t=xt(),s=R.useContext($e),r=rt({select:c=>{var d;return(d=c.matches.find(h=>h.id===s))==null?void 0:d.routeId}}),n=t.routesById[r],{parentGlobalNotFound:o}=rt({select:c=>{const h=c.matches.find(f=>f.id===s);return st(h),{parentGlobalNotFound:h.globalNotFound}}}),i=rt({select:c=>{var d;const h=c.matches,f=h.findIndex(p=>p.id===s);return(d=h[f+1])==null?void 0:d.id}});if(o)return lr(t,n,void 0);if(!i)return null;const a=C.jsx(hr,{matchId:i}),l=t.options.defaultPendingComponent?C.jsx(t.options.defaultPendingComponent,{}):null;return s===it?C.jsx(R.Suspense,{fallback:l,children:a}):a});function Hn(){const e=xt(),t=e.options.defaultPendingComponent?C.jsx(e.options.defaultPendingComponent,{}):null,s=C.jsxs(R.Suspense,{fallback:t,children:[C.jsx(Kn,{}),C.jsx(Vn,{})]});return e.options.InnerWrap?C.jsx(e.options.InnerWrap,{children:s}):s}function Vn(){const e=rt({select:s=>{var r;return(r=s.matches[0])==null?void 0:r.id}}),t=rt({select:s=>s.loadedAt});return C.jsx($e.Provider,{value:e,children:C.jsx(fs,{getResetKey:()=>t,errorComponent:Ne,onCatch:s=>{s.message||s.toString()},children:e?C.jsx(hr,{matchId:e}):null})})}function Ii(){const e=xt();return rt({select:t=>[t.location.href,t.resolvedLocation.href,t.status]}),R.useCallback(t=>{const{pending:s,caseSensitive:r,fuzzy:n,includeSearch:o,...i}=t;return e.matchRoute(i,{pending:s,caseSensitive:r,fuzzy:n,includeSearch:o})},[e])}function Wn({router:e,children:t,...s}){e.update({...e.options,...s,context:{...e.options.context,...s.context}});const r=nr(),n=C.jsx(r.Provider,{value:e,children:t});return e.options.Wrap?C.jsx(e.options.Wrap,{children:n}):n}function Ti({router:e,...t}){return C.jsx(Wn,{router:e,...t,children:C.jsx(Hn,{})})}var ve=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vt=typeof window>"u"||"Deno"in globalThis;function ut(){}function Gn(e,t){return typeof e=="function"?e(t):e}function Ze(e){return typeof e=="number"&&e>=0&&e!==1/0}function dr(e,t){return Math.max(e+(t||0)-Date.now(),0)}function te(e,t){return typeof e=="function"?e(t):e}function lt(e,t){return typeof e=="function"?e(t):e}function Ts(e,t){const{type:s="all",exact:r,fetchStatus:n,predicate:o,queryKey:i,stale:a}=e;if(i){if(r){if(t.queryHash!==bs(i,t.options))return!1}else if(!Re(t.queryKey,i))return!1}if(s!=="all"){const l=t.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||n&&n!==t.state.fetchStatus||o&&!o(t))}function js(e,t){const{exact:s,status:r,predicate:n,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(s){if(Wt(t.options.mutationKey)!==Wt(o))return!1}else if(!Re(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function bs(e,t){return((t==null?void 0:t.queryKeyHashFn)||Wt)(e)}function Wt(e){return JSON.stringify(e,(t,s)=>ts(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function Re(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(s=>!Re(e[s],t[s])):!1}function fr(e,t){if(e===t)return e;const s=Ds(e)&&Ds(t);if(s||ts(e)&&ts(t)){const r=s?e:Object.keys(e),n=r.length,o=s?t:Object.keys(t),i=o.length,a=s?[]:{};let l=0;for(let c=0;c<i;c++){const d=s?c:o[c];(!s&&r.includes(d)||s)&&e[d]===void 0&&t[d]===void 0?(a[d]=void 0,l++):(a[d]=fr(e[d],t[d]),a[d]===e[d]&&e[d]!==void 0&&l++)}return n===i&&l===n?e:a}return t}function ke(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Ds(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function ts(e){if(!ks(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!ks(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ks(e){return Object.prototype.toString.call(e)==="[object Object]"}function Jn(e){return new Promise(t=>{setTimeout(t,e)})}function es(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?fr(e,t):t}function Xn(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function Yn(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var Ss=Symbol();function pr(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Ss?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Bt,Mt,ee,$s,Zn=($s=class extends ve{constructor(){super();w(this,Bt);w(this,Mt);w(this,ee);g(this,ee,t=>{if(!Vt&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){u(this,Mt)||this.setEventListener(u(this,ee))}onUnsubscribe(){var t;this.hasListeners()||((t=u(this,Mt))==null||t.call(this),g(this,Mt,void 0))}setEventListener(t){var s;g(this,ee,t),(s=u(this,Mt))==null||s.call(this),g(this,Mt,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){u(this,Bt)!==t&&(g(this,Bt,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof u(this,Bt)=="boolean"?u(this,Bt):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Bt=new WeakMap,Mt=new WeakMap,ee=new WeakMap,$s),Ps=new Zn,se,Lt,re,Ks,ti=(Ks=class extends ve{constructor(){super();w(this,se,!0);w(this,Lt);w(this,re);g(this,re,t=>{if(!Vt&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){u(this,Lt)||this.setEventListener(u(this,re))}onUnsubscribe(){var t;this.hasListeners()||((t=u(this,Lt))==null||t.call(this),g(this,Lt,void 0))}setEventListener(t){var s;g(this,re,t),(s=u(this,Lt))==null||s.call(this),g(this,Lt,t(this.setOnline.bind(this)))}setOnline(t){u(this,se)!==t&&(g(this,se,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return u(this,se)}},se=new WeakMap,Lt=new WeakMap,re=new WeakMap,Ks),Ae=new ti;function ss(){let e,t;const s=new Promise((n,o)=>{e=n,t=o});s.status="pending",s.catch(()=>{});function r(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{r({status:"fulfilled",value:n}),e(n)},s.reject=n=>{r({status:"rejected",reason:n}),t(n)},s}function ei(e){return Math.min(1e3*2**e,3e4)}function mr(e){return(e??"online")==="online"?Ae.isOnline():!0}var vr=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function Xe(e){return e instanceof vr}function yr(e){let t=!1,s=0,r=!1,n;const o=ss(),i=m=>{var v;r||(f(new vr(m)),(v=e.abort)==null||v.call(e))},a=()=>{t=!0},l=()=>{t=!1},c=()=>Ps.isFocused()&&(e.networkMode==="always"||Ae.isOnline())&&e.canRun(),d=()=>mr(e.networkMode)&&e.canRun(),h=m=>{var v;r||(r=!0,(v=e.onSuccess)==null||v.call(e,m),n==null||n(),o.resolve(m))},f=m=>{var v;r||(r=!0,(v=e.onError)==null||v.call(e,m),n==null||n(),o.reject(m))},p=()=>new Promise(m=>{var v;n=P=>{(r||c())&&m(P)},(v=e.onPause)==null||v.call(e)}).then(()=>{var m;n=void 0,r||(m=e.onContinue)==null||m.call(e)}),y=()=>{if(r)return;let m;const v=s===0?e.initialPromise:void 0;try{m=v??e.fn()}catch(P){m=Promise.reject(P)}Promise.resolve(m).then(h).catch(P=>{var F;if(r)return;const x=e.retry??(Vt?0:3),b=e.retryDelay??ei,E=typeof b=="function"?b(s,P):b,T=x===!0||typeof x=="number"&&s<x||typeof x=="function"&&x(s,P);if(t||!T){f(P);return}s++,(F=e.onFail)==null||F.call(e,s,P),Jn(E).then(()=>c()?void 0:p()).then(()=>{t?f(P):y()})})};return{promise:o,cancel:i,continue:()=>(n==null||n(),o),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?y():p().then(y),o)}}function si(){let e=[],t=0,s=a=>{a()},r=a=>{a()},n=a=>setTimeout(a,0);const o=a=>{t?e.push(a):n(()=>{s(a)})},i=()=>{const a=e;e=[],a.length&&n(()=>{r(()=>{a.forEach(l=>{s(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||i()}return l},batchCalls:a=>(...l)=>{o(()=>{a(...l)})},schedule:o,setNotifyFunction:a=>{s=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{n=a}}}var q=si(),Nt,qs,gr=(qs=class{constructor(){w(this,Nt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ze(this.gcTime)&&g(this,Nt,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Vt?1/0:5*60*1e3))}clearGcTimeout(){u(this,Nt)&&(clearTimeout(u(this,Nt)),g(this,Nt,void 0))}},Nt=new WeakMap,qs),ne,ie,at,V,we,$t,ct,wt,zs,ri=(zs=class extends gr{constructor(t){super();w(this,ct);w(this,ne);w(this,ie);w(this,at);w(this,V);w(this,we);w(this,$t);g(this,$t,!1),g(this,we,t.defaultOptions),this.setOptions(t.options),this.observers=[],g(this,at,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,g(this,ne,ni(this.options)),this.state=t.state??u(this,ne),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=u(this,V))==null?void 0:t.promise}setOptions(t){this.options={...u(this,we),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&u(this,at).remove(this)}setData(t,s){const r=es(this.state.data,t,this.options);return L(this,ct,wt).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(t,s){L(this,ct,wt).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var r,n;const s=(r=u(this,V))==null?void 0:r.promise;return(n=u(this,V))==null||n.cancel(t),s?s.then(ut).catch(ut):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(u(this,ne))}isActive(){return this.observers.some(t=>lt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ss||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!dr(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=u(this,V))==null||s.continue()}onOnline(){var s;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=u(this,V))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),u(this,at).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(u(this,V)&&(u(this,$t)?u(this,V).cancel({revert:!0}):u(this,V).cancelRetry()),this.scheduleGc()),u(this,at).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||L(this,ct,wt).call(this,{type:"invalidate"})}fetch(t,s){var l,c,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(u(this,V))return u(this,V).continueRetry(),u(this,V).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const r=new AbortController,n=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(g(this,$t,!0),r.signal)})},o=()=>{const h=pr(this.options,s),f={queryKey:this.queryKey,meta:this.meta};return n(f),g(this,$t,!1),this.options.persister?this.options.persister(h,f,this):h(f)},i={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};n(i),(l=this.options.behavior)==null||l.onFetch(i,this),g(this,ie,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((c=i.fetchOptions)==null?void 0:c.meta))&&L(this,ct,wt).call(this,{type:"fetch",meta:(d=i.fetchOptions)==null?void 0:d.meta});const a=h=>{var f,p,y,m;Xe(h)&&h.silent||L(this,ct,wt).call(this,{type:"error",error:h}),Xe(h)||((p=(f=u(this,at).config).onError)==null||p.call(f,h,this),(m=(y=u(this,at).config).onSettled)==null||m.call(y,this.state.data,h,this)),this.scheduleGc()};return g(this,V,yr({initialPromise:s==null?void 0:s.initialPromise,fn:i.fetchFn,abort:r.abort.bind(r),onSuccess:h=>{var f,p,y,m;if(h===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(v){a(v);return}(p=(f=u(this,at).config).onSuccess)==null||p.call(f,h,this),(m=(y=u(this,at).config).onSettled)==null||m.call(y,h,this.state.error,this),this.scheduleGc()},onError:a,onFail:(h,f)=>{L(this,ct,wt).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{L(this,ct,wt).call(this,{type:"pause"})},onContinue:()=>{L(this,ct,wt).call(this,{type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0})),u(this,V).start()}},ne=new WeakMap,ie=new WeakMap,at=new WeakMap,V=new WeakMap,we=new WeakMap,$t=new WeakMap,ct=new WeakSet,wt=function(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...br(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return Xe(n)&&n.revert&&u(this,ie)?{...u(this,ie),fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),q.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),u(this,at).notify({query:this,type:"updated",action:t})})},zs);function br(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:mr(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ni(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var gt,Hs,ii=(Hs=class extends ve{constructor(t={}){super();w(this,gt);this.config=t,g(this,gt,new Map)}build(t,s,r){const n=s.queryKey,o=s.queryHash??bs(n,s);let i=this.get(o);return i||(i=new ri({cache:this,queryKey:n,queryHash:o,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(i)),i}add(t){u(this,gt).has(t.queryHash)||(u(this,gt).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=u(this,gt).get(t.queryHash);s&&(t.destroy(),s===t&&u(this,gt).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){q.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return u(this,gt).get(t)}getAll(){return[...u(this,gt).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Ts(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>Ts(t,r)):s}notify(t){q.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){q.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){q.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},gt=new WeakMap,Hs),bt,X,Kt,St,Et,Vs,oi=(Vs=class extends gr{constructor(t){super();w(this,St);w(this,bt);w(this,X);w(this,Kt);this.mutationId=t.mutationId,g(this,X,t.mutationCache),g(this,bt,[]),this.state=t.state||Sr(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){u(this,bt).includes(t)||(u(this,bt).push(t),this.clearGcTimeout(),u(this,X).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){g(this,bt,u(this,bt).filter(s=>s!==t)),this.scheduleGc(),u(this,X).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){u(this,bt).length||(this.state.status==="pending"?this.scheduleGc():u(this,X).remove(this))}continue(){var t;return((t=u(this,Kt))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var n,o,i,a,l,c,d,h,f,p,y,m,v,P,x,b,E,T,F,_;g(this,Kt,yr({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(S,M)=>{L(this,St,Et).call(this,{type:"failed",failureCount:S,error:M})},onPause:()=>{L(this,St,Et).call(this,{type:"pause"})},onContinue:()=>{L(this,St,Et).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>u(this,X).canRun(this)}));const s=this.state.status==="pending",r=!u(this,Kt).canStart();try{if(!s){L(this,St,Et).call(this,{type:"pending",variables:t,isPaused:r}),await((o=(n=u(this,X).config).onMutate)==null?void 0:o.call(n,t,this));const M=await((a=(i=this.options).onMutate)==null?void 0:a.call(i,t));M!==this.state.context&&L(this,St,Et).call(this,{type:"pending",context:M,variables:t,isPaused:r})}const S=await u(this,Kt).start();return await((c=(l=u(this,X).config).onSuccess)==null?void 0:c.call(l,S,t,this.state.context,this)),await((h=(d=this.options).onSuccess)==null?void 0:h.call(d,S,t,this.state.context)),await((p=(f=u(this,X).config).onSettled)==null?void 0:p.call(f,S,null,this.state.variables,this.state.context,this)),await((m=(y=this.options).onSettled)==null?void 0:m.call(y,S,null,t,this.state.context)),L(this,St,Et).call(this,{type:"success",data:S}),S}catch(S){try{throw await((P=(v=u(this,X).config).onError)==null?void 0:P.call(v,S,t,this.state.context,this)),await((b=(x=this.options).onError)==null?void 0:b.call(x,S,t,this.state.context)),await((T=(E=u(this,X).config).onSettled)==null?void 0:T.call(E,void 0,S,this.state.variables,this.state.context,this)),await((_=(F=this.options).onSettled)==null?void 0:_.call(F,void 0,S,t,this.state.context)),S}finally{L(this,St,Et).call(this,{type:"error",error:S})}}finally{u(this,X).runNext(this)}}},bt=new WeakMap,X=new WeakMap,Kt=new WeakMap,St=new WeakSet,Et=function(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),q.batch(()=>{u(this,bt).forEach(r=>{r.onMutationUpdate(t)}),u(this,X).notify({mutation:this,type:"updated",action:t})})},Vs);function Sr(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var nt,_e,Ws,ai=(Ws=class extends ve{constructor(t={}){super();w(this,nt);w(this,_e);this.config=t,g(this,nt,new Map),g(this,_e,Date.now())}build(t,s,r){const n=new oi({mutationCache:this,mutationId:++Me(this,_e)._,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){const s=Oe(t),r=u(this,nt).get(s)??[];r.push(t),u(this,nt).set(s,r),this.notify({type:"added",mutation:t})}remove(t){var r;const s=Oe(t);if(u(this,nt).has(s)){const n=(r=u(this,nt).get(s))==null?void 0:r.filter(o=>o!==t);n&&(n.length===0?u(this,nt).delete(s):u(this,nt).set(s,n))}this.notify({type:"removed",mutation:t})}canRun(t){var r;const s=(r=u(this,nt).get(Oe(t)))==null?void 0:r.find(n=>n.state.status==="pending");return!s||s===t}runNext(t){var r;const s=(r=u(this,nt).get(Oe(t)))==null?void 0:r.find(n=>n!==t&&n.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}clear(){q.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...u(this,nt).values()].flat()}find(t){const s={exact:!0,...t};return this.getAll().find(r=>js(s,r))}findAll(t={}){return this.getAll().filter(s=>js(t,s))}notify(t){q.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return q.batch(()=>Promise.all(t.map(s=>s.continue().catch(ut))))}},nt=new WeakMap,_e=new WeakMap,Ws);function Oe(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function As(e){return{onFetch:(t,s)=>{var d,h,f,p,y;const r=t.options,n=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,o=((p=t.state.data)==null?void 0:p.pages)||[],i=((y=t.state.data)==null?void 0:y.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const c=async()=>{let m=!1;const v=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},P=pr(t.options,t.fetchOptions),x=async(b,E,T)=>{if(m)return Promise.reject();if(E==null&&b.pages.length)return Promise.resolve(b);const F={queryKey:t.queryKey,pageParam:E,direction:T?"backward":"forward",meta:t.options.meta};v(F);const _=await P(F),{maxPages:S}=t.options,M=T?Yn:Xn;return{pages:M(b.pages,_,S),pageParams:M(b.pageParams,E,S)}};if(n&&o.length){const b=n==="backward",E=b?ui:Qs,T={pages:o,pageParams:i},F=E(r,T);a=await x(T,F,b)}else{const b=e??o.length;do{const E=l===0?i[0]??r.initialPageParam:Qs(r,a);if(l>0&&E==null)break;a=await x(a,E),l++}while(l<b)}return a};t.options.persister?t.fetchFn=()=>{var m,v;return(v=(m=t.options).persister)==null?void 0:v.call(m,c,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=c}}}function Qs(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function ui(e,{pages:t,pageParams:s}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,s[0],s):void 0}var U,Ot,Ft,oe,ae,It,ue,ce,Gs,ji=(Gs=class{constructor(e={}){w(this,U);w(this,Ot);w(this,Ft);w(this,oe);w(this,ae);w(this,It);w(this,ue);w(this,ce);g(this,U,e.queryCache||new ii),g(this,Ot,e.mutationCache||new ai),g(this,Ft,e.defaultOptions||{}),g(this,oe,new Map),g(this,ae,new Map),g(this,It,0)}mount(){Me(this,It)._++,u(this,It)===1&&(g(this,ue,Ps.subscribe(async e=>{e&&(await this.resumePausedMutations(),u(this,U).onFocus())})),g(this,ce,Ae.subscribe(async e=>{e&&(await this.resumePausedMutations(),u(this,U).onOnline())})))}unmount(){var e,t;Me(this,It)._--,u(this,It)===0&&((e=u(this,ue))==null||e.call(this),g(this,ue,void 0),(t=u(this,ce))==null||t.call(this),g(this,ce,void 0))}isFetching(e){return u(this,U).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return u(this,Ot).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=u(this,U).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const s=this.defaultQueryOptions(e),r=u(this,U).build(this,s);return e.revalidateIfStale&&r.isStaleByTime(te(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(t)}}getQueriesData(e){return u(this,U).findAll(e).map(({queryKey:t,state:s})=>{const r=s.data;return[t,r]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),n=u(this,U).get(r.queryHash),o=n==null?void 0:n.state.data,i=Gn(t,o);if(i!==void 0)return u(this,U).build(this,r).setData(i,{...s,manual:!0})}setQueriesData(e,t,s){return q.batch(()=>u(this,U).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=u(this,U).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=u(this,U);q.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=u(this,U),r={type:"active",...e};return q.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const s={revert:!0,...t},r=q.batch(()=>u(this,U).findAll(e).map(n=>n.cancel(s)));return Promise.all(r).then(ut).catch(ut)}invalidateQueries(e={},t={}){return q.batch(()=>{if(u(this,U).findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const s={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(s,t)})}refetchQueries(e={},t){const s={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},r=q.batch(()=>u(this,U).findAll(e).filter(n=>!n.isDisabled()).map(n=>{let o=n.fetch(void 0,s);return s.throwOnError||(o=o.catch(ut)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(ut)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=u(this,U).build(this,t);return s.isStaleByTime(te(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ut).catch(ut)}fetchInfiniteQuery(e){return e.behavior=As(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ut).catch(ut)}ensureInfiniteQueryData(e){return e.behavior=As(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ae.isOnline()?u(this,Ot).resumePausedMutations():Promise.resolve()}getQueryCache(){return u(this,U)}getMutationCache(){return u(this,Ot)}getDefaultOptions(){return u(this,Ft)}setDefaultOptions(e){g(this,Ft,e)}setQueryDefaults(e,t){u(this,oe).set(Wt(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...u(this,oe).values()];let s={};return t.forEach(r=>{Re(e,r.queryKey)&&(s={...s,...r.defaultOptions})}),s}setMutationDefaults(e,t){u(this,ae).set(Wt(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...u(this,ae).values()];let s={};return t.forEach(r=>{Re(e,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...u(this,Ft).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=bs(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Ss&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...u(this,Ft).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){u(this,U).clear(),u(this,Ot).clear()}},U=new WeakMap,Ot=new WeakMap,Ft=new WeakMap,oe=new WeakMap,ae=new WeakMap,It=new WeakMap,ue=new WeakMap,ce=new WeakMap,Gs),tt,O,Ce,Y,qt,le,Tt,Pt,xe,he,de,zt,Ht,jt,fe,I,be,rs,ns,is,os,as,us,cs,Pr,Js,ci=(Js=class extends ve{constructor(t,s){super();w(this,I);w(this,tt);w(this,O);w(this,Ce);w(this,Y);w(this,qt);w(this,le);w(this,Tt);w(this,Pt);w(this,xe);w(this,he);w(this,de);w(this,zt);w(this,Ht);w(this,jt);w(this,fe,new Set);this.options=s,g(this,tt,t),g(this,Pt,null),g(this,Tt,ss()),this.options.experimental_prefetchInRender||u(this,Tt).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(u(this,O).addObserver(this),Us(u(this,O),this.options)?L(this,I,be).call(this):this.updateResult(),L(this,I,os).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ls(u(this,O),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ls(u(this,O),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,L(this,I,as).call(this),L(this,I,us).call(this),u(this,O).removeObserver(this)}setOptions(t,s){const r=this.options,n=u(this,O);if(this.options=u(this,tt).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof lt(this.options.enabled,u(this,O))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");L(this,I,cs).call(this),u(this,O).setOptions(this.options),r._defaulted&&!ke(this.options,r)&&u(this,tt).getQueryCache().notify({type:"observerOptionsUpdated",query:u(this,O),observer:this});const o=this.hasListeners();o&&Bs(u(this,O),n,this.options,r)&&L(this,I,be).call(this),this.updateResult(s),o&&(u(this,O)!==n||lt(this.options.enabled,u(this,O))!==lt(r.enabled,u(this,O))||te(this.options.staleTime,u(this,O))!==te(r.staleTime,u(this,O)))&&L(this,I,rs).call(this);const i=L(this,I,ns).call(this);o&&(u(this,O)!==n||lt(this.options.enabled,u(this,O))!==lt(r.enabled,u(this,O))||i!==u(this,jt))&&L(this,I,is).call(this,i)}getOptimisticResult(t){const s=u(this,tt).getQueryCache().build(u(this,tt),t),r=this.createResult(s,t);return hi(this,r)&&(g(this,Y,r),g(this,le,this.options),g(this,qt,u(this,O).state)),r}getCurrentResult(){return u(this,Y)}trackResult(t,s){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),s==null||s(n),t[n])})}),r}trackProp(t){u(this,fe).add(t)}getCurrentQuery(){return u(this,O)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=u(this,tt).defaultQueryOptions(t),r=u(this,tt).getQueryCache().build(u(this,tt),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return L(this,I,be).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),u(this,Y)))}createResult(t,s){var S;const r=u(this,O),n=this.options,o=u(this,Y),i=u(this,qt),a=u(this,le),c=t!==r?t.state:u(this,Ce),{state:d}=t;let h={...d},f=!1,p;if(s._optimisticResults){const M=this.hasListeners(),Q=!M&&Us(t,s),k=M&&Bs(t,r,s,n);(Q||k)&&(h={...h,...br(d.data,t.options)}),s._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:y,errorUpdatedAt:m,status:v}=h;if(s.select&&h.data!==void 0)if(o&&h.data===(i==null?void 0:i.data)&&s.select===u(this,xe))p=u(this,he);else try{g(this,xe,s.select),p=s.select(h.data),p=es(o==null?void 0:o.data,p,s),g(this,he,p),g(this,Pt,null)}catch(M){g(this,Pt,M)}else p=h.data;if(s.placeholderData!==void 0&&p===void 0&&v==="pending"){let M;if(o!=null&&o.isPlaceholderData&&s.placeholderData===(a==null?void 0:a.placeholderData))M=o.data;else if(M=typeof s.placeholderData=="function"?s.placeholderData((S=u(this,de))==null?void 0:S.state.data,u(this,de)):s.placeholderData,s.select&&M!==void 0)try{M=s.select(M),g(this,Pt,null)}catch(Q){g(this,Pt,Q)}M!==void 0&&(v="success",p=es(o==null?void 0:o.data,M,s),f=!0)}u(this,Pt)&&(y=u(this,Pt),p=u(this,he),m=Date.now(),v="error");const P=h.fetchStatus==="fetching",x=v==="pending",b=v==="error",E=x&&P,T=p!==void 0,_={status:v,fetchStatus:h.fetchStatus,isPending:x,isSuccess:v==="success",isError:b,isInitialLoading:E,isLoading:E,data:p,dataUpdatedAt:h.dataUpdatedAt,error:y,errorUpdatedAt:m,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>c.dataUpdateCount||h.errorUpdateCount>c.errorUpdateCount,isFetching:P,isRefetching:P&&!x,isLoadingError:b&&!T,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:b&&T,isStale:Rs(t,s),refetch:this.refetch,promise:u(this,Tt)};if(this.options.experimental_prefetchInRender){const M=A=>{_.status==="error"?A.reject(_.error):_.data!==void 0&&A.resolve(_.data)},Q=()=>{const A=g(this,Tt,_.promise=ss());M(A)},k=u(this,Tt);switch(k.status){case"pending":t.queryHash===r.queryHash&&M(k);break;case"fulfilled":(_.status==="error"||_.data!==k.value)&&Q();break;case"rejected":(_.status!=="error"||_.error!==k.reason)&&Q();break}}return _}updateResult(t){const s=u(this,Y),r=this.createResult(u(this,O),this.options);if(g(this,qt,u(this,O).state),g(this,le,this.options),u(this,qt).data!==void 0&&g(this,de,u(this,O)),ke(r,s))return;g(this,Y,r);const n={},o=()=>{if(!s)return!0;const{notifyOnChangeProps:i}=this.options,a=typeof i=="function"?i():i;if(a==="all"||!a&&!u(this,fe).size)return!0;const l=new Set(a??u(this,fe));return this.options.throwOnError&&l.add("error"),Object.keys(u(this,Y)).some(c=>{const d=c;return u(this,Y)[d]!==s[d]&&l.has(d)})};(t==null?void 0:t.listeners)!==!1&&o()&&(n.listeners=!0),L(this,I,Pr).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&L(this,I,os).call(this)}},tt=new WeakMap,O=new WeakMap,Ce=new WeakMap,Y=new WeakMap,qt=new WeakMap,le=new WeakMap,Tt=new WeakMap,Pt=new WeakMap,xe=new WeakMap,he=new WeakMap,de=new WeakMap,zt=new WeakMap,Ht=new WeakMap,jt=new WeakMap,fe=new WeakMap,I=new WeakSet,be=function(t){L(this,I,cs).call(this);let s=u(this,O).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(ut)),s},rs=function(){L(this,I,as).call(this);const t=te(this.options.staleTime,u(this,O));if(Vt||u(this,Y).isStale||!Ze(t))return;const r=dr(u(this,Y).dataUpdatedAt,t)+1;g(this,zt,setTimeout(()=>{u(this,Y).isStale||this.updateResult()},r))},ns=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(u(this,O)):this.options.refetchInterval)??!1},is=function(t){L(this,I,us).call(this),g(this,jt,t),!(Vt||lt(this.options.enabled,u(this,O))===!1||!Ze(u(this,jt))||u(this,jt)===0)&&g(this,Ht,setInterval(()=>{(this.options.refetchIntervalInBackground||Ps.isFocused())&&L(this,I,be).call(this)},u(this,jt)))},os=function(){L(this,I,rs).call(this),L(this,I,is).call(this,L(this,I,ns).call(this))},as=function(){u(this,zt)&&(clearTimeout(u(this,zt)),g(this,zt,void 0))},us=function(){u(this,Ht)&&(clearInterval(u(this,Ht)),g(this,Ht,void 0))},cs=function(){const t=u(this,tt).getQueryCache().build(u(this,tt),this.options);if(t===u(this,O))return;const s=u(this,O);g(this,O,t),g(this,Ce,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},Pr=function(t){q.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(u(this,Y))}),u(this,tt).getQueryCache().notify({query:u(this,O),type:"observerResultsUpdated"})})},Js);function li(e,t){return lt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Us(e,t){return li(e,t)||e.state.data!==void 0&&ls(e,t,t.refetchOnMount)}function ls(e,t,s){if(lt(t.enabled,e)!==!1){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&Rs(e,t)}return!1}function Bs(e,t,s,r){return(e!==t||lt(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Rs(e,s)}function Rs(e,t){return lt(t.enabled,e)!==!1&&e.isStaleByTime(te(t.staleTime,e))}function hi(e,t){return!ke(e.getCurrentResult(),t)}var Dt,kt,et,_t,Ct,Fe,hs,Xs,di=(Xs=class extends ve{constructor(t,s){super();w(this,Ct);w(this,Dt);w(this,kt);w(this,et);w(this,_t);g(this,Dt,t),this.setOptions(s),this.bindMethods(),L(this,Ct,Fe).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=u(this,Dt).defaultMutationOptions(t),ke(this.options,s)||u(this,Dt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:u(this,et),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Wt(s.mutationKey)!==Wt(this.options.mutationKey)?this.reset():((r=u(this,et))==null?void 0:r.state.status)==="pending"&&u(this,et).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=u(this,et))==null||t.removeObserver(this)}onMutationUpdate(t){L(this,Ct,Fe).call(this),L(this,Ct,hs).call(this,t)}getCurrentResult(){return u(this,kt)}reset(){var t;(t=u(this,et))==null||t.removeObserver(this),g(this,et,void 0),L(this,Ct,Fe).call(this),L(this,Ct,hs).call(this)}mutate(t,s){var r;return g(this,_t,s),(r=u(this,et))==null||r.removeObserver(this),g(this,et,u(this,Dt).getMutationCache().build(u(this,Dt),this.options)),u(this,et).addObserver(this),u(this,et).execute(t)}},Dt=new WeakMap,kt=new WeakMap,et=new WeakMap,_t=new WeakMap,Ct=new WeakSet,Fe=function(){var s;const t=((s=u(this,et))==null?void 0:s.state)??Sr();g(this,kt,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},hs=function(t){q.batch(()=>{var s,r,n,o,i,a,l,c;if(u(this,_t)&&this.hasListeners()){const d=u(this,kt).variables,h=u(this,kt).context;(t==null?void 0:t.type)==="success"?((r=(s=u(this,_t)).onSuccess)==null||r.call(s,t.data,d,h),(o=(n=u(this,_t)).onSettled)==null||o.call(n,t.data,null,d,h)):(t==null?void 0:t.type)==="error"&&((a=(i=u(this,_t)).onError)==null||a.call(i,t.error,d,h),(c=(l=u(this,_t)).onSettled)==null||c.call(l,void 0,t.error,d,h))}this.listeners.forEach(d=>{d(u(this,kt))})})},Xs),Rr=R.createContext(void 0),wr=e=>{const t=R.useContext(Rr);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Di=({client:e,children:t})=>(R.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),C.jsx(Rr.Provider,{value:e,children:t})),_r=R.createContext(!1),fi=()=>R.useContext(_r);_r.Provider;function pi(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var mi=R.createContext(pi()),vi=()=>R.useContext(mi);function Cr(e,t){return typeof e=="function"?e(...t):!!e}function xr(){}var yi=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},gi=e=>{R.useEffect(()=>{e.clearReset()},[e])},bi=({result:e,errorResetBoundary:t,throwOnError:s,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Cr(s,[e.error,r]),Si=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Pi=(e,t)=>e.isLoading&&e.isFetching&&!t,Ri=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ns=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function wi(e,t,s){var d,h,f,p,y;const r=wr(),n=fi(),o=vi(),i=r.defaultQueryOptions(e);(h=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,i),i._optimisticResults=n?"isRestoring":"optimistic",Si(i),yi(i,o),gi(o);const a=!r.getQueryCache().get(i.queryHash),[l]=R.useState(()=>new t(r,i)),c=l.getOptimisticResult(i);if(R.useSyncExternalStore(R.useCallback(m=>{const v=n?()=>{}:l.subscribe(q.batchCalls(m));return l.updateResult(),v},[l,n]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),R.useEffect(()=>{l.setOptions(i,{listeners:!1})},[i,l]),Ri(i,c))throw Ns(i,l,o);if(bi({result:c,errorResetBoundary:o,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash)}))throw c.error;if((p=(f=r.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||p.call(f,i,c),i.experimental_prefetchInRender&&!Vt&&Pi(c,n)){const m=a?Ns(i,l,o):(y=r.getQueryCache().get(i.queryHash))==null?void 0:y.promise;m==null||m.catch(xr).finally(()=>{l.hasListeners()||l.updateResult()})}return i.notifyOnChangeProps?c:l.trackResult(c)}function ki(e,t){return wi(e,ci)}function Ai(e,t){const s=wr(),[r]=R.useState(()=>new di(s,e));R.useEffect(()=>{r.setOptions(e)},[r,e]);const n=R.useSyncExternalStore(R.useCallback(i=>r.subscribe(q.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=R.useCallback((i,a)=>{r.mutate(i,a).catch(xr)},[r]);if(n.error&&Cr(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}export{Fi as L,zn as O,ji as Q,Ti as R,Ai as a,ki as b,Mi as c,Di as d,Ii as e,Li as f,Ei as g,vs as h,gs as i,C as j,xi as k,Oi as l,wr as u};
