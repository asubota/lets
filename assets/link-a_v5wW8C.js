import"./mui-C7jVnYTO.js";import{r as l,d as oe}from"./react-C9_qfvjK.js";import{l as re,m as ne,n as se,r as q,o as le,p as ie,q as ce,s as A}from"./index-DPCiE7HL.js";const ue="Error preloading route! ☝️";function de(o,f){const t=re(),[i,m]=l.useState(!1),c=ne(f),{activeProps:u=()=>({className:"active"}),inactiveProps:v=()=>({}),activeOptions:n,hash:he,search:fe,params:me,to:y,state:ve,mask:ye,preload:D,preloadDelay:B,replace:O,startTransition:j,resetScroll:z,viewTransition:U,children:I,target:d,disabled:r,style:T,className:b,onClick:P,onFocus:g,onMouseEnter:k,onMouseLeave:S,onTouchStart:x,ignoreBlocker:V,...N}=o,F=l.useMemo(()=>{try{return new URL(`${y}`),"external"}catch{}return"internal"},[y]),s=l.useMemo(()=>t.buildLocation(o),[t,o]),E=l.useMemo(()=>D??t.options.defaultPreload,[t.options.defaultPreload,D]),W=B??t.options.defaultPreloadDelay??0,L=se({select:e=>{const a=q(e.location.pathname,t.basepath).split("/"),M=q(s.pathname,t.basepath).split("/").every((te,ae)=>te===a[ae]),Y=n!=null&&n.exact?le(e.location.pathname,s.pathname,t.basepath):M,Z=n!=null&&n.includeHash?e.location.hash===s.hash:!0,ee=(n==null?void 0:n.includeSearch)??!0?ie(e.location.search,s.search,!(n!=null&&n.exact)):!0;return Y&&Z&&ee}}),h=l.useCallback(()=>{t.preloadRoute(o).catch(e=>{console.warn(e),console.warn(ue)})},[o,t]),$=l.useCallback(e=>{e!=null&&e.isIntersecting&&h()},[h]);if(ce(c,$,{rootMargin:"100px"},{disabled:!!r||E!=="viewport"}),F==="external")return{...N,ref:c,type:F,href:y,...I&&{children:I},...d&&{target:d},...r&&{disabled:r},...T&&{style:T},...b&&{className:b},...P&&{onClick:P},...g&&{onFocus:g},...k&&{onMouseEnter:k},...S&&{onMouseLeave:S},...x&&{onTouchStart:x}};const G=e=>{if(!r&&!pe(e)&&!e.defaultPrevented&&(!d||d==="_self")&&e.button===0){e.preventDefault(),oe.flushSync(()=>{m(!0)});const a=t.subscribe("onResolved",()=>{a(),m(!1)});t.commitLocation({...s,replace:O,resetScroll:z,startTransition:j,viewTransition:U,ignoreBlocker:V})}},H=e=>{r||E&&h()},J=H,Q=e=>{if(r)return;const a=e.target||{};if(E){if(a.preloadTimeout)return;a.preloadTimeout=setTimeout(()=>{a.preloadTimeout=null,h()},W)}},X=e=>{if(r)return;const a=e.target||{};a.preloadTimeout&&(clearTimeout(a.preloadTimeout),a.preloadTimeout=null)},p=e=>a=>{var w;(w=a.persist)==null||w.call(a),e.filter(Boolean).forEach(M=>{a.defaultPrevented||M(a)})},C=L?A(u,{})??{}:{},R=L?{}:A(v,{}),K=[b,C.className,R.className].filter(Boolean).join(" "),_={...T,...C.style,...R.style};return{...C,...R,...N,href:r?void 0:s.maskedLocation?t.history.createHref(s.maskedLocation.href):t.history.createHref(s.href),ref:c,onClick:p([P,G]),onFocus:p([g,H]),onMouseEnter:p([k,Q]),onMouseLeave:p([S,X]),onTouchStart:p([x,J]),disabled:!!r,target:d,...Object.keys(_).length&&{style:_},...K&&{className:K},...r&&{role:"link","aria-disabled":!0},...L&&{"data-status":"active","aria-current":"page"},...i&&{"data-transitioning":"transitioning"}}}const ge=l.forwardRef((o,f)=>{const{_asChild:t,...i}=o,{type:m,ref:c,...u}=de(i,f),v=typeof i.children=="function"?i.children({isActive:u["data-status"]==="active"}):i.children;return typeof t>"u"&&delete u.disabled,l.createElement(t||"a",{...u,ref:c},v)});function pe(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}export{ge as L,de as u};
