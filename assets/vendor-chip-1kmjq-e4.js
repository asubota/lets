import{b as _,u as A,a as E,j as y}from"./tanstack-xf-zT_El.js";import{K as I,L as w,M as C,c as p,N as O}from"./index-CFW7yos1.js";import{$ as b}from"./mui-dv1jgofF.js";const i=I(),u=w(),f="colors",v=async e=>{if(!i||!u)return[];const o=`https://sheets.googleapis.com/v4/spreadsheets/${i}/values/${f}?key=${u}`;return(await(await fetch(o,{signal:e})).json()).values.slice(1).map(([l,c,n,a])=>({vendor:l,...c&&{color:c},...n&&{backgroundColor:n},...a&&{borderColor:a}}))},K=async({vendor:e})=>{const s=(await v()).findIndex(t=>t.vendor===e);if(s!==-1){const t=`${f}!A${s+2}:F${s+2}`,r=`https://sheets.googleapis.com/v4/spreadsheets/${i}/values/${t}:clear?key=${u}`;await C(r,{method:"POST"})}},$=async({vendor:e,color:o,borderColor:s,backgroundColor:t})=>{const l=(await v()).findIndex(n=>n.vendor===e),c={values:[[e,o,t,s]]};if(l===-1){const n=`${f}!A1`,a=`https://sheets.googleapis.com/v4/spreadsheets/${i}/values/${n}:append?valueInputOption=RAW&key=${u}`;await C(a,{body:JSON.stringify(c),method:"POST"})}if(l!==-1){const n=`${f}!A:D${l+2}`,a=`https://sheets.googleapis.com/v4/spreadsheets/${i}/values/${n}?valueInputOption=RAW&key=${u}`;await C(a,{body:JSON.stringify(c),method:"PUT"})}},x=()=>[O];function R(e,o,s){const t={vendor:e};let r=!1;return o.color!==s.color&&(t.color=o.color,r=!0),o.borderColor!==s.borderColor&&(t.borderColor=o.borderColor,r=!0),o.backgroundColor!==s.backgroundColor&&(t.backgroundColor=o.backgroundColor,r=!0),r?t:null}function T(e,o){const s={added:[],removed:[],changed:[]};for(const t in e){const r=e[t],l=o[t];if(!l)s.added.push({vendor:t,...r});else{const c=R(t,r,l);c&&s.changed.push(c)}}for(const t in o)e[t]||s.removed.push({vendor:t,...o[t]});return s}const L=()=>{const e=p.c(2),o=A();let s;return e[0]!==o?(s={async onSettled(){return await o.invalidateQueries({queryKey:x()})},mutationFn:P},e[0]=o,e[1]=s):s=e[1],E(s)},j=()=>{const e=p.c(6);let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o={staleTime:1/0,queryKey:x(),queryFn:q,select(a){return a.reduce(N,{})}},e[0]=o):o=e[0];const{data:s,isLoading:t}=_(o);let r;e[1]!==s?(r=s===void 0?{}:s,e[1]=s,e[2]=r):r=e[2];const c=r;let n;return e[3]!==t||e[4]!==c?(n={colors:c,isLoading:t},e[3]=t,e[4]=c,e[5]=n):n=e[5],n};async function P(e){const{currentColors:o,colors:s}=e,t=T(s,o);for(const r of t.added)await $(r);for(const r of t.changed)await $(r);for(const r of t.removed)await K(r)}function q(e){const{signal:o}=e;return v(o)}function N(e,o){const{vendor:s,...t}=o;return{...e,[s]:t}}const Q=e=>{const o=p.c(3),{colors:s}=j();let t;return o[0]!==s||o[1]!==e?(t=s[e]||{},o[0]=s,o[1]=e,o[2]=t):t=o[2],t},M=e=>{const o=p.c(5),{vendor:s,color:t,borderColor:r,backgroundColor:l,source:c}=e,n=c===void 0?"live":c,{color:a,borderColor:S,backgroundColor:k}=Q(s),g=(n==="live"?a:t)||"secondary",m=(n==="live"?S:r)||"secondary.main",h=n==="live"?k:l;let d;return o[0]!==h||o[1]!==m||o[2]!==g||o[3]!==s?(d=s!=="base"?y.jsx(b,{"data-no-export":!0,label:s,size:"small",variant:"outlined",sx:{borderWidth:"2px",borderColor:m,color:g,backgroundColor:h}}):y.jsx(b,{"data-no-export":!0,label:s,color:"primary",size:"small"}),o[0]=h,o[1]=m,o[2]=g,o[3]=s,o[4]=d):d=o[4],d};export{M as V,L as a,j as u};
