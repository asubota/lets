var Ks=e=>{throw TypeError(e)};var is=(e,t,s)=>t.has(e)||Ks("Cannot "+s);var c=(e,t,s)=>(is(e,t,"read from private field"),s?s.call(e):t.get(e)),L=(e,t,s)=>t.has(e)?Ks("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),P=(e,t,s,r)=>(is(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),T=(e,t,s)=>(is(e,t,"access private method"),s);var Qe=(e,t,s,r)=>({set _(n){P(e,t,n,s)},get _(){return c(e,t,r)}});import{r as Ds,g as Cr,a as Zr}from"./react-_uqhELNW.js";function tn(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(r,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var os={exports:{}},xe={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zs;function en(){if(zs)return xe;zs=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(r,n,i){var o=null;if(i!==void 0&&(o=""+i),n.key!==void 0&&(o=""+n.key),"key"in n){i={};for(var a in n)a!=="key"&&(i[a]=n[a])}else i=n;return n=i.ref,{$$typeof:e,type:r,key:o,ref:n!==void 0?n:null,props:i}}return xe.Fragment=t,xe.jsx=s,xe.jsxs=s,xe}var $s;function sn(){return $s||($s=1,os.exports=en()),os.exports}var I=sn(),w=Ds();const rn=Cr(w),Oi=tn({__proto__:null,default:rn},[w]);var nn="Invariant failed";function gt(e,t){if(!e)throw new Error(nn)}const on="Error preloading route! ☝️";function Fe(e){return e[e.length-1]}function an(e){return typeof e=="function"}function ne(e,t){return an(e)?e(t):e}function gs(e,t){return t.reduce((s,r)=>(s[r]=e[r],s),{})}function at(e,t){if(e===t)return e;const s=t,r=Gs(e)&&Gs(s);if(r||Ge(e)&&Ge(s)){const n=r?e:Object.keys(e),i=n.length,o=r?s:Object.keys(s),a=o.length,l=r?[]:{};let h=0;for(let d=0;d<a;d++){const u=r?d:o[d];(!r&&n.includes(u)||r)&&e[u]===void 0&&s[u]===void 0?(l[u]=void 0,h++):(l[u]=at(e[u],s[u]),l[u]===e[u]&&e[u]!==void 0&&h++)}return i===a&&h===i?e:l}return s}function Ge(e){if(!Hs(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const s=t.prototype;return!(!Hs(s)||!s.hasOwnProperty("isPrototypeOf"))}function Hs(e){return Object.prototype.toString.call(e)==="[object Object]"}function Gs(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ws(e,t){let s=Object.keys(e);return t&&(s=s.filter(r=>e[r]!==void 0)),s}function ie(e,t,s){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Ge(e)&&Ge(t)){const r=(s==null?void 0:s.ignoreUndefined)??!0,n=Ws(e,r),i=Ws(t,r);return!(s!=null&&s.partial)&&n.length!==i.length?!1:i.every(o=>ie(e[o],t[o],s))}return Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:!e.some((r,n)=>!ie(r,t[n],s)):!1}function re(e){let t,s;const r=new Promise((n,i)=>{t=n,s=i});return r.status="pending",r.resolve=n=>{r.status="resolved",r.value=n,t(n),e==null||e(n)},r.reject=n=>{r.status="rejected",s(n)},r}function Et(e){return es(e.filter(t=>t!==void 0).join("/"))}function es(e){return e.replace(/\/{2,}/g,"/")}function As(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function zt(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function un(e){return zt(As(e))}function We(e,t){return e.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function cn(e,t,s){return We(e,s)===We(t,s)}function ln({basepath:e,base:t,to:s,trailingSlash:r="never",caseSensitive:n}){var i,o;t=Je(e,t,n),s=Je(e,s,n);let a=Ce(t);const l=Ce(s);a.length>1&&((i=Fe(a))==null?void 0:i.value)==="/"&&a.pop(),l.forEach((d,u)=>{d.value==="/"?u?u===l.length-1&&a.push(d):a=[d]:d.value===".."?a.pop():d.value==="."||a.push(d)}),a.length>1&&(((o=Fe(a))==null?void 0:o.value)==="/"?r==="never"&&a.pop():r==="always"&&a.push({type:"pathname",value:"/"}));const h=Et([e,...a.map(d=>d.value)]);return es(h)}function Ce(e){if(!e)return[];e=es(e);const t=[];if(e.slice(0,1)==="/"&&(e=e.substring(1),t.push({type:"pathname",value:"/"})),!e)return t;const s=e.split("/").filter(Boolean);return t.push(...s.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),e.slice(-1)==="/"&&(e=e.substring(1),t.push({type:"pathname",value:"/"})),t}function Ve({path:e,params:t,leaveWildcards:s,leaveParams:r,decodeCharMap:n}){const i=Ce(e),o={};for(const[a,l]of Object.entries(t)){const h=typeof l=="string";["*","_splat"].includes(a)?o[a]=h?encodeURI(l):l:o[a]=h?hn(l,n):l}return Et(i.map(a=>{if(a.type==="wildcard"){const l=o._splat;return s?`${a.value}${l??""}`:l}if(a.type==="param"){if(r){const l=o[a.value];return`${a.value}${l??""}`}return o[a.value.substring(1)]??"undefined"}return a.value}))}function hn(e,t){let s=encodeURIComponent(e);if(t)for(const[r,n]of t)s=s.replaceAll(r,n);return s}function qe(e,t,s){const r=dn(e,t,s);if(!(s.to&&!r))return r??{}}function Je(e,t,s=!1){const r=s?e:e.toLowerCase(),n=s?t:t.toLowerCase();switch(!0){case r==="/":return t;case n===r:return"";case t.length<e.length:return t;case n[r.length]!=="/":return t;case n.startsWith(r):return t.slice(e.length);default:return t}}function dn(e,t,s){if(e!=="/"&&!t.startsWith(e))return;t=Je(e,t,s.caseSensitive);const r=Je(e,`${s.to??"$"}`,s.caseSensitive),n=Ce(t),i=Ce(r);t.startsWith("/")||n.unshift({type:"pathname",value:"/"}),r.startsWith("/")||i.unshift({type:"pathname",value:"/"});const o={};return(()=>{for(let l=0;l<Math.max(n.length,i.length);l++){const h=n[l],d=i[l],u=l>=n.length-1,f=l>=i.length-1;if(d){if(d.type==="wildcard"){const p=decodeURI(Et(n.slice(l).map(m=>m.value)));return o["*"]=p,o._splat=p,!0}if(d.type==="pathname"){if(d.value==="/"&&!(h!=null&&h.value))return!0;if(h){if(s.caseSensitive){if(d.value!==h.value)return!1}else if(d.value.toLowerCase()!==h.value.toLowerCase())return!1}}if(!h)return!1;if(d.type==="param"){if(h.value==="/")return!1;h.value.charAt(0)!=="$"&&(o[d.value.substring(1)]=decodeURIComponent(h.value))}}if(!u&&f)return o["**"]=Et(n.slice(l+1).map(p=>p.value)),!!s.fuzzy&&(d==null?void 0:d.value)!=="/"}return!0})()?o:void 0}function fn(e,t){let s,r,n,i="";for(s in e)if((n=e[s])!==void 0)if(Array.isArray(n))for(r=0;r<n.length;r++)i&&(i+="&"),i+=encodeURIComponent(s)+"="+encodeURIComponent(n[r]);else i&&(i+="&"),i+=encodeURIComponent(s)+"="+encodeURIComponent(n);return""+i}function Js(e){if(!e)return"";const t=decodeURIComponent(e);return t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t}function pn(e,t){let s,r;const n={},i=e.split("&");for(;s=i.shift();){const o=s.indexOf("=");if(o!==-1){r=s.slice(0,o),r=decodeURIComponent(r);const a=s.slice(o+1);n[r]!==void 0?n[r]=[].concat(n[r],Js(a)):n[r]=Js(a)}else r=s,r=decodeURIComponent(r),n[r]=""}return n}const nt="__root__",mn=yn(JSON.parse),vn=gn(JSON.stringify,JSON.parse);function yn(e){return t=>{t.substring(0,1)==="?"&&(t=t.substring(1));const s=pn(t);for(const r in s){const n=s[r];if(typeof n=="string")try{s[r]=e(n)}catch{}}return s}}function gn(e,t){function s(r){if(typeof r=="object"&&r!==null)try{return e(r)}catch{}else if(typeof r=="string"&&typeof t=="function")try{return t(r),e(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(i=>{const o=r[i];typeof o>"u"||o===void 0?delete r[i]:r[i]=s(o)});const n=fn(r).toString();return n?`?${n}`:""}}const Zt="__TSR_index",Xs="popstate",Ys="beforeunload";function Rr(e){let t=e.getLocation();const s=new Set,r=o=>{t=e.getLocation(),s.forEach(a=>a({location:t,action:o}))},n=o=>{e.notifyOnIndexChange??!0?r(o):t=e.getLocation()},i=async({task:o,navigateOpts:a,...l})=>{var h,d;if((a==null?void 0:a.ignoreBlocker)??!1){o();return}const f=((h=e.getBlockers)==null?void 0:h.call(e))??[],p=l.type==="PUSH"||l.type==="REPLACE";if(typeof document<"u"&&f.length&&p)for(const m of f){const v=Ie(l.path,l.state);if(await m.blockerFn({currentLocation:t,nextLocation:v,action:l.type})){(d=e.onBlocked)==null||d.call(e);return}}o()};return{get location(){return t},get length(){return e.getLength()},subscribers:s,subscribe:o=>(s.add(o),()=>{s.delete(o)}),push:(o,a,l)=>{const h=t.state[Zt];a=bs(h+1,a),i({task:()=>{e.pushState(o,a),r({type:"PUSH"})},navigateOpts:l,type:"PUSH",path:o,state:a})},replace:(o,a,l)=>{const h=t.state[Zt];a=bs(h,a),i({task:()=>{e.replaceState(o,a),r({type:"REPLACE"})},navigateOpts:l,type:"REPLACE",path:o,state:a})},go:(o,a)=>{i({task:()=>{e.go(o),n({type:"GO",index:o})},navigateOpts:a,type:"GO"})},back:o=>{i({task:()=>{e.back((o==null?void 0:o.ignoreBlocker)??!1),n({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{i({task:()=>{e.forward((o==null?void 0:o.ignoreBlocker)??!1),n({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>t.state[Zt]!==0,createHref:o=>e.createHref(o),block:o=>{var a;if(!e.setBlockers)return()=>{};const l=((a=e.getBlockers)==null?void 0:a.call(e))??[];return e.setBlockers([...l,o]),()=>{var h,d;const u=((h=e.getBlockers)==null?void 0:h.call(e))??[];(d=e.setBlockers)==null||d.call(e,u.filter(f=>f!==o))}},flush:()=>{var o;return(o=e.flush)==null?void 0:o.call(e)},destroy:()=>{var o;return(o=e.destroy)==null?void 0:o.call(e)},notify:r}}function bs(e,t){return t||(t={}),{...t,key:Pn(),[Zt]:e}}function bn(e){const t=typeof document<"u"?window:void 0,s=t.history.pushState,r=t.history.replaceState;let n=[];const i=()=>n,o=g=>n=g,a=g=>g,l=()=>Ie(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state);let h=l(),d,u=!1,f=!1,p=!1,m=!1;const v=()=>h;let y,x;const M=()=>{y&&(O._ignoreSubscribers=!0,(y.isPush?t.history.pushState:t.history.replaceState)(y.state,"",y.href),O._ignoreSubscribers=!1,y=void 0,x=void 0,d=void 0)},_=(g,S,k)=>{const C=a(S);x||(d=h),h=Ie(S,k),y={href:C,state:k,isPush:(y==null?void 0:y.isPush)||g==="push"},x||(x=Promise.resolve().then(()=>M()))},R=g=>{h=l(),O.notify({type:g})},b=async()=>{if(f){f=!1;return}const g=l(),S=g.state[Zt]-h.state[Zt],k=S===1,C=S===-1,F=!k&&!C||u;u=!1;const U=F?"GO":C?"BACK":"FORWARD",B=F?{type:"GO",index:S}:{type:C?"BACK":"FORWARD"};if(p)p=!1;else{const j=i();if(typeof document<"u"&&j.length){for(const V of j)if(await V.blockerFn({currentLocation:h,nextLocation:g,action:U})){f=!0,t.history.go(1),O.notify(B);return}}}h=l(),O.notify(B)},E=g=>{if(m){m=!1;return}let S=!1;const k=i();if(typeof document<"u"&&k.length)for(const C of k){const F=C.enableBeforeUnload??!0;if(F===!0){S=!0;break}if(typeof F=="function"&&F()===!0){S=!0;break}}if(S)return g.preventDefault(),g.returnValue=""},O=Rr({getLocation:v,getLength:()=>t.history.length,pushState:(g,S)=>_("push",g,S),replaceState:(g,S)=>_("replace",g,S),back:g=>(g&&(p=!0),m=!0,t.history.back()),forward:g=>{g&&(p=!0),m=!0,t.history.forward()},go:g=>{u=!0,t.history.go(g)},createHref:g=>a(g),flush:M,destroy:()=>{t.history.pushState=s,t.history.replaceState=r,t.removeEventListener(Ys,E,{capture:!0}),t.removeEventListener(Xs,b)},onBlocked:()=>{d&&h!==d&&(h=d)},getBlockers:i,setBlockers:o,notifyOnIndexChange:!1});return t.addEventListener(Ys,E,{capture:!0}),t.addEventListener(Xs,b),t.history.pushState=function(...g){const S=s.apply(t.history,g);return O._ignoreSubscribers||R("PUSH"),S},t.history.replaceState=function(...g){const S=r.apply(t.history,g);return O._ignoreSubscribers||R("REPLACE"),S},O}function Sn(e={initialEntries:["/"]}){const t=e.initialEntries;let s=e.initialIndex?Math.min(Math.max(e.initialIndex,0),t.length-1):t.length-1;const r=t.map((i,o)=>bs(o,void 0));return Rr({getLocation:()=>Ie(t[s],r[s]),getLength:()=>t.length,pushState:(i,o)=>{s<t.length-1&&(t.splice(s+1),r.splice(s+1)),r.push(o),t.push(i),s=Math.max(t.length-1,0)},replaceState:(i,o)=>{r[s]=o,t[s]=i},back:()=>{s=Math.max(s-1,0)},forward:()=>{s=Math.min(s+1,t.length-1)},go:i=>{s=Math.min(Math.max(s+i,0),t.length-1)},createHref:i=>i})}function Ie(e,t){const s=e.indexOf("#"),r=e.indexOf("?");return{href:e,pathname:e.substring(0,s>0?r>0?Math.min(s,r):s:r>0?r:e.length),hash:s>-1?e.substring(s):"",search:r>-1?e.slice(r,s===-1?void 0:s):"",state:t||{[Zt]:0}}}function Pn(){return(Math.random()+1).toString(36).substring(7)}function js(e){const t=e.errorComponent??ss;return I.jsx(Cn,{getResetKey:e.getResetKey,onCatch:e.onCatch,children:({error:s,reset:r})=>s?w.createElement(t,{error:s,reset:r}):e.children})}class Cn extends w.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(t){return{resetKey:t.getResetKey()}}static getDerivedStateFromError(t){return{error:t}}reset(){this.setState({error:null})}componentDidUpdate(t,s){s.error&&s.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(t,s){this.props.onCatch&&this.props.onCatch(t,s)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function ss({error:e}){const[t,s]=w.useState(!1);return I.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[I.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[I.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),I.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>s(r=>!r),children:t?"Hide Error":"Show Error"})]}),I.jsx("div",{style:{height:".25rem"}}),t?I.jsx("div",{children:I.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:e.message?I.jsx("code",{children:e.message}):null})}):null]})}var as={exports:{}},us={},cs={exports:{}},ls={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs;function Rn(){if(Zs)return ls;Zs=1;var e=Ds();function t(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var s=typeof Object.is=="function"?Object.is:t,r=e.useState,n=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function a(u,f){var p=f(),m=r({inst:{value:p,getSnapshot:f}}),v=m[0].inst,y=m[1];return i(function(){v.value=p,v.getSnapshot=f,l(v)&&y({inst:v})},[u,p,f]),n(function(){return l(v)&&y({inst:v}),u(function(){l(v)&&y({inst:v})})},[u]),o(p),p}function l(u){var f=u.getSnapshot;u=u.value;try{var p=f();return!s(u,p)}catch{return!0}}function h(u,f){return f()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:a;return ls.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,ls}var tr;function _n(){return tr||(tr=1,cs.exports=Rn()),cs.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var er;function wn(){if(er)return us;er=1;var e=Ds(),t=_n();function s(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var r=typeof Object.is=="function"?Object.is:s,n=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,a=e.useMemo,l=e.useDebugValue;return us.useSyncExternalStoreWithSelector=function(h,d,u,f,p){var m=i(null);if(m.current===null){var v={hasValue:!1,value:null};m.current=v}else v=m.current;m=a(function(){function x(E){if(!M){if(M=!0,_=E,E=f(E),p!==void 0&&v.hasValue){var O=v.value;if(p(O,E))return R=O}return R=E}if(O=R,r(_,E))return O;var g=f(E);return p!==void 0&&p(O,g)?(_=E,O):(_=E,R=g)}var M=!1,_,R,b=u===void 0?null:u;return[function(){return x(d())},b===null?void 0:function(){return x(b())}]},[d,u,f,p]);var y=n(h,m[0],m[1]);return o(function(){v.hasValue=!0,v.value=y},[y]),l(y),y},us}var sr;function xn(){return sr||(sr=1,as.exports=wn()),as.exports}var Mn=xn();const oe=new WeakMap,ze=new WeakMap,Xe={current:[]};let hs=!1,Oe=0;const Me=new Set,Ne=new Map;function _r(e){const t=Array.from(e).sort((s,r)=>s instanceof ae&&s.options.deps.includes(r)?1:r instanceof ae&&r.options.deps.includes(s)?-1:0);for(const s of t){if(Xe.current.includes(s))continue;Xe.current.push(s),s.recompute();const r=ze.get(s);if(r)for(const n of r){const i=oe.get(n);i&&_r(i)}}}function En(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function Ln(e){e.listeners.forEach(t=>t({prevVal:e.prevState,currentVal:e.state}))}function wr(e){if(Oe>0&&!Ne.has(e)&&Ne.set(e,e.prevState),Me.add(e),!(Oe>0)&&!hs)try{for(hs=!0;Me.size>0;){const t=Array.from(Me);Me.clear();for(const s of t){const r=Ne.get(s)??s.prevState;s.prevState=r,En(s)}for(const s of t){const r=oe.get(s);r&&(Xe.current.push(s),_r(r))}for(const s of t){const r=oe.get(s);if(r)for(const n of r)Ln(n)}}}finally{hs=!1,Xe.current=[],Ne.clear()}}function ds(e){Oe++;try{e()}finally{if(Oe--,Oe===0){const t=Array.from(Me)[0];t&&wr(t)}}}class Ss{constructor(t,s){this.listeners=new Set,this.subscribe=r=>{var n,i;this.listeners.add(r);const o=(i=(n=this.options)==null?void 0:n.onSubscribe)==null?void 0:i.call(n,r,this);return()=>{this.listeners.delete(r),o==null||o()}},this.setState=r=>{var n,i,o;this.prevState=this.state,this.state=(n=this.options)!=null&&n.updateFn?this.options.updateFn(this.prevState)(r):r(this.prevState),(o=(i=this.options)==null?void 0:i.onUpdate)==null||o.call(i),wr(this)},this.prevState=t,this.state=t,this.options=s}}class ae{constructor(t){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const s=[],r=[];for(const n of this.options.deps)s.push(n.prevState),r.push(n.state);return this.lastSeenDepValues=r,{prevDepVals:s,currDepVals:r,prevVal:this.prevState??void 0}},this.recompute=()=>{var s,r;this.prevState=this.state;const{prevDepVals:n,currDepVals:i,prevVal:o}=this.getDepVals();this.state=this.options.fn({prevDepVals:n,currDepVals:i,prevVal:o}),(r=(s=this.options).onUpdate)==null||r.call(s)},this.checkIfRecalculationNeededDeeply=()=>{for(const i of this.options.deps)i instanceof ae&&i.checkIfRecalculationNeededDeeply();let s=!1;const r=this.lastSeenDepValues,{currDepVals:n}=this.getDepVals();for(let i=0;i<n.length;i++)if(n[i]!==r[i]){s=!0;break}s&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const s of this._subscriptions)s()}),this.subscribe=s=>{var r,n;this.listeners.add(s);const i=(n=(r=this.options).onSubscribe)==null?void 0:n.call(r,s,this);return()=>{this.listeners.delete(s),i==null||i()}},this.options=t,this.state=t.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(t=this.options.deps){for(const s of t)if(s instanceof ae)s.registerOnGraph(),this.registerOnGraph(s.options.deps);else if(s instanceof Ss){let r=oe.get(s);r||(r=new Set,oe.set(s,r)),r.add(this);let n=ze.get(this);n||(n=new Set,ze.set(this,n)),n.add(s)}}unregisterFromGraph(t=this.options.deps){for(const s of t)if(s instanceof ae)this.unregisterFromGraph(s.options.deps);else if(s instanceof Ss){const r=oe.get(s);r&&r.delete(this);const n=ze.get(this);n&&n.delete(s)}}}function Fn(e,t=s=>s){return Mn.useSyncExternalStoreWithSelector(e.subscribe,()=>e.state,()=>e.state,t,On)}function On(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,n]of e)if(!t.has(r)||!Object.is(n,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const s=Object.keys(e);if(s.length!==Object.keys(t).length)return!1;for(let r=0;r<s.length;r++)if(!Object.prototype.hasOwnProperty.call(t,s[r])||!Object.is(e[s[r]],t[s[r]]))return!1;return!0}const fs=w.createContext(null);function xr(){return typeof document>"u"?fs:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=fs,fs)}function _t(e){const t=w.useContext(xr());return e==null||e.warn,t}function tt(e){const t=_t({warn:(e==null?void 0:e.router)===void 0}),s=(e==null?void 0:e.router)||t,r=w.useRef(void 0);return Fn(s.__store,n=>{if(e!=null&&e.select){if(e.structuralSharing??s.options.defaultStructuralSharing){const i=at(r.current,e.select(n));return r.current=i,i}return e.select(n)}return n})}const rs=w.createContext(void 0),In=w.createContext(void 0);function Ft(e){const t=w.useContext(e.from?In:rs);return tt({select:r=>{const n=r.matches.find(i=>e.from?e.from===i.routeId:i.id===t);if(gt(!((e.shouldThrow??!0)&&!n),`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`),n!==void 0)return e.select?e.select(n):n},structuralSharing:e.structuralSharing})}function Mr(e){return Ft({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function Er(e){const{select:t,...s}=e;return Ft({...s,select:r=>t?t(r.loaderDeps):r.loaderDeps})}function Lr(e){return Ft({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.params):t.params})}function Fr(e){return Ft({from:e.from,strict:e.strict,structuralSharing:e.structuralSharing,select:t=>e.select?e.select(t.search):t.search})}function vt(e){return!!(e!=null&&e.isNotFound)}function kn(e){const t=tt({select:s=>`not-found-${s.location.pathname}-${s.status}`});return I.jsx(js,{getResetKey:()=>t,onCatch:(s,r)=>{var n;if(vt(s))(n=e.onCatch)==null||n.call(e,s,r);else throw s},errorComponent:({error:s})=>{var r;if(vt(s))return(r=e.fallback)==null?void 0:r.call(e,s);throw s},children:e.children})}function Tn(){return I.jsx("p",{children:"Not Found"})}function Or(e){const{navigate:t}=_t();return w.useCallback(s=>t({...s}),[t])}function Ii(e){const{navigate:t}=_t();return w.useEffect(()=>{t({...e})},[t,e]),null}class Ir{constructor(t){this.init=s=>{var r,n;this.originalIndex=s.originalIndex;const i=this.options,o=!(i!=null&&i.path)&&!(i!=null&&i.id);this.parentRoute=(n=(r=this.options).getParentRoute)==null?void 0:n.call(r),o?this._path=nt:gt(this.parentRoute);let a=o?nt:i.path;a&&a!=="/"&&(a=As(a));const l=(i==null?void 0:i.id)||a;let h=o?nt:Et([this.parentRoute.id===nt?"":this.parentRoute.id,l]);a===nt&&(a="/"),h!==nt&&(h=Et(["/",h]));const d=h===nt?"/":Et([this.parentRoute.fullPath,a]);this._path=a,this._id=h,this._fullPath=d,this._to=d,this._ssr=(i==null?void 0:i.ssr)??s.defaultSsr??!0},this.updateLoader=s=>(Object.assign(this.options,s),this),this.update=s=>(Object.assign(this.options,s),this),this.lazy=s=>(this.lazyFn=s,this),this.useMatch=s=>Ft({select:s==null?void 0:s.select,from:this.id,structuralSharing:s==null?void 0:s.structuralSharing}),this.useRouteContext=s=>Ft({...s,from:this.id,select:r=>s!=null&&s.select?s.select(r.context):r.context}),this.useSearch=s=>Fr({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useParams=s=>Lr({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.id}),this.useLoaderDeps=s=>Er({...s,from:this.id}),this.useLoaderData=s=>Mr({...s,from:this.id}),this.useNavigate=()=>Or({from:this.id}),this.options=t||{},this.isRoot=!(t!=null&&t.getParentRoute),gt(!(t!=null&&t.id&&(t!=null&&t.path))),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(t){return this._addFileChildren(t)}_addFileChildren(t){return Array.isArray(t)&&(this.children=t),typeof t=="object"&&t!==null&&(this.children=Object.values(t)),this}}function Dn(e){return new Ir(e)}class An extends Ir{constructor(t){super(t)}addChildren(t){return super.addChildren(t),this}_addFileChildren(t){return super._addFileChildren(t),this}_addFileTypes(){return this}}function ki(e){return new An(e)}function Ti(e){return new jn(e,{silent:!0}).createRoute}class jn{constructor(t,s){this.path=t,this.createRoute=r=>{this.silent;const n=Dn(r);return n.isRoot=!1,n},this.silent=s==null?void 0:s.silent}}class Bn{constructor(t){this.useMatch=s=>Ft({select:s==null?void 0:s.select,from:this.options.id,structuralSharing:s==null?void 0:s.structuralSharing}),this.useRouteContext=s=>Ft({from:this.options.id,select:r=>s!=null&&s.select?s.select(r.context):r.context}),this.useSearch=s=>Fr({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.options.id}),this.useParams=s=>Lr({select:s==null?void 0:s.select,structuralSharing:s==null?void 0:s.structuralSharing,from:this.options.id}),this.useLoaderDeps=s=>Er({...s,from:this.options.id}),this.useLoaderData=s=>Mr({...s,from:this.options.id}),this.useNavigate=()=>Or({from:this.options.id}),this.options=t,this.$$typeof=Symbol.for("react.memo")}}function Di(e){return t=>new Bn({id:e,...t})}function Ai(e){if(e.isRedirect=!0,e.statusCode=e.statusCode||e.code||307,e.headers=e.headers||{},!e.reloadDocument){e.reloadDocument=!1;try{new URL(`${e.href}`),e.reloadDocument=!0}catch{}}if(e.throw)throw e;return e}function Kt(e){return!!(e!=null&&e.isRedirect)}function ps(e){return!!(e!=null&&e.isRedirect)&&e.href}function $e(e){return I.jsx(I.Fragment,{children:e.children})}function kr(e,t,s){return t.options.notFoundComponent?I.jsx(t.options.notFoundComponent,{data:s}):e.options.defaultNotFoundComponent?I.jsx(e.options.defaultNotFoundComponent,{data:s}):I.jsx(Tn,{})}const Tr=w.memo(function({matchId:t}){var s,r;const n=_t(),i=tt({select:y=>{var x;return(x=y.matches.find(M=>M.id===t))==null?void 0:x.routeId}});gt(i);const o=n.routesById[i],a=o.options.pendingComponent??n.options.defaultPendingComponent,l=a?I.jsx(a,{}):null,h=o.options.errorComponent??n.options.defaultErrorComponent,d=o.options.onCatch??n.options.defaultOnCatch,u=o.isRoot?o.options.notFoundComponent??((s=n.options.notFoundRoute)==null?void 0:s.options.component):o.options.notFoundComponent,f=(!o.isRoot||o.options.wrapInSuspense)&&(o.options.wrapInSuspense??a??((r=o.options.errorComponent)==null?void 0:r.preload))?w.Suspense:$e,p=h?js:$e,m=u?kn:$e,v=tt({select:y=>y.loadedAt});return I.jsx(rs.Provider,{value:t,children:I.jsx(f,{fallback:l,children:I.jsx(p,{getResetKey:()=>v,errorComponent:h||ss,onCatch:(y,x)=>{if(vt(y))throw y;d==null||d(y,x)},children:I.jsx(m,{fallback:y=>{if(!u||y.routeId&&y.routeId!==i||!y.routeId&&!o.isRoot)throw y;return w.createElement(u,y)},children:I.jsx(Un,{matchId:t})})})})})}),Un=w.memo(function({matchId:t}){var s,r,n;const i=_t(),{match:o,matchIndex:a,routeId:l}=tt({select:f=>{const p=f.matches.findIndex(y=>y.id===t),m=f.matches[p];return{routeId:m.routeId,matchIndex:p,match:gs(m,["id","status","error"])}},structuralSharing:!0}),h=i.routesById[l],d=w.useMemo(()=>{const f=h.options.component??i.options.defaultComponent;return f?I.jsx(f,{}):I.jsx(Qn,{})},[h.options.component,i.options.defaultComponent]),u=(h.options.errorComponent??i.options.defaultErrorComponent)||ss;if(o.status==="notFound")return gt(vt(o.error)),kr(i,h,o.error);if(o.status==="redirected")throw gt(Kt(o.error)),(s=i.getMatch(o.id))==null?void 0:s.loadPromise;if(o.status==="error"){if(i.isServer)return I.jsx(u,{error:o.error,info:{componentStack:""}});throw o.error}if(o.status==="pending"){const f=h.options.pendingMinMs??i.options.defaultPendingMinMs;if(f&&!((r=i.getMatch(o.id))!=null&&r.minPendingPromise)&&!i.isServer){const p=re();Promise.resolve().then(()=>{i.updateMatch(o.id,m=>({...m,minPendingPromise:p}))}),setTimeout(()=>{p.resolve(),i.updateMatch(o.id,m=>({...m,minPendingPromise:void 0}))},f)}throw(n=i.getMatch(o.id))==null?void 0:n.loadPromise}return d}),Qn=w.memo(function(){const t=_t(),s=w.useContext(rs),r=tt({select:h=>{var d;return(d=h.matches.find(u=>u.id===s))==null?void 0:d.routeId}}),n=t.routesById[r],i=tt({select:h=>{const u=h.matches.find(f=>f.id===s);return gt(u),u.globalNotFound}}),o=tt({select:h=>{var d;const u=h.matches,f=u.findIndex(p=>p.id===s);return(d=u[f+1])==null?void 0:d.id}});if(i)return kr(t,n,void 0);if(!o)return null;const a=I.jsx(Tr,{matchId:o}),l=t.options.defaultPendingComponent?I.jsx(t.options.defaultPendingComponent,{}):null;return s===nt?I.jsx(w.Suspense,{fallback:l,children:a}):a});var Dr=Zr();const ji=Cr(Dr),Ee=typeof window<"u"?w.useLayoutEffect:w.useEffect;function ms(e){const t=w.useRef({value:e,prev:null}),s=t.current.value;return e!==s&&(t.current={value:e,prev:s}),t.current.prev}function Vn(e,t,s={},r={}){const n=w.useRef(typeof IntersectionObserver=="function"),i=w.useRef(null);return w.useEffect(()=>{if(!(!e.current||!n.current||r.disabled))return i.current=new IntersectionObserver(([o])=>{t(o)},s),i.current.observe(e.current),()=>{var o;(o=i.current)==null||o.disconnect()}},[t,s,r.disabled,e]),i.current}function qn(e){const t=w.useRef(null);return w.useEffect(()=>{e&&(typeof e=="function"?e(t.current):e.current=t.current)}),t}function Nn(e,t){const s=_t(),[r,n]=w.useState(!1),i=w.useRef(!1),o=qn(t),{activeProps:a=()=>({className:"active"}),inactiveProps:l=()=>({}),activeOptions:h,to:d,preload:u,preloadDelay:f,hashScrollIntoView:p,replace:m,startTransition:v,resetScroll:y,viewTransition:x,children:M,target:_,disabled:R,style:b,className:E,onClick:O,onFocus:g,onMouseEnter:S,onMouseLeave:k,onTouchStart:C,ignoreBlocker:F,...U}=e,{params:B,search:j,hash:V,state:rt,mask:lt,reloadDocument:ht,...it}=U,bt=w.useMemo(()=>{try{return new URL(`${d}`),"external"}catch{}return"internal"},[d]),q=tt({select:Q=>Q.location.search,structuralSharing:!0});e={from:Ft({strict:!1,select:Q=>Q.pathname}),...e};const K=w.useMemo(()=>s.buildLocation(e),[s,e,q]),z=w.useMemo(()=>e.reloadDocument?!1:u??s.options.defaultPreload,[s.options.defaultPreload,u,e.reloadDocument]),H=f??s.options.defaultPreloadDelay??0,ot=tt({select:Q=>{if(h!=null&&h.exact){if(!cn(Q.location.pathname,K.pathname,s.basepath))return!1}else{const G=We(Q.location.pathname,s.basepath).split("/");if(!We(K.pathname,s.basepath).split("/").every((Xr,Yr)=>Xr===G[Yr]))return!1}return((h==null?void 0:h.includeSearch)??!0)&&!ie(Q.location.search,K.search,{partial:!(h!=null&&h.exact),ignoreUndefined:!(h!=null&&h.explicitUndefined)})?!1:h!=null&&h.includeHash?Q.location.hash===K.hash:!0}}),dt=w.useCallback(()=>{s.preloadRoute(e).catch(Q=>{console.warn(Q),console.warn(on)})},[e,s]),Be=w.useCallback(Q=>{Q!=null&&Q.isIntersecting&&dt()},[dt]);if(Vn(o,Be,{rootMargin:"100px"},{disabled:!!R||z!=="viewport"}),Ee(()=>{i.current||!R&&z==="render"&&(dt(),i.current=!0)},[R,dt,z]),bt==="external")return{...it,ref:o,type:bt,href:d,...M&&{children:M},..._&&{target:_},...R&&{disabled:R},...b&&{style:b},...E&&{className:E},...O&&{onClick:O},...g&&{onFocus:g},...S&&{onMouseEnter:S},...k&&{onMouseLeave:k},...C&&{onTouchStart:C}};const Ue=Q=>{if(!R&&!zn(Q)&&!Q.defaultPrevented&&(!_||_==="_self")&&Q.button===0){Q.preventDefault(),Dr.flushSync(()=>{n(!0)});const G=s.subscribe("onResolved",()=>{G(),n(!1)});return s.navigate({...e,replace:m,resetScroll:y,hashScrollIntoView:p,startTransition:v,viewTransition:x,ignoreBlocker:F})}},qt=Q=>{R||z&&dt()},X=qt,ft=Q=>{if(R)return;const G=Q.target||{};if(z){if(G.preloadTimeout)return;G.preloadTimeout=setTimeout(()=>{G.preloadTimeout=null,dt()},H)}},Ot=Q=>{if(R)return;const G=Q.target||{};G.preloadTimeout&&(clearTimeout(G.preloadTimeout),G.preloadTimeout=null)},Nt=Q=>G=>{var ns;(ns=G.persist)==null||ns.call(G),Q.filter(Boolean).forEach(Ns=>{G.defaultPrevented||Ns(G)})},_e=ot?ne(a,{})??{}:{},we=ot?{}:ne(l,{}),se=[E,_e.className,we.className].filter(Boolean).join(" "),qs={...b,..._e.style,...we.style};return{...it,..._e,...we,href:R?void 0:K.maskedLocation?s.history.createHref(K.maskedLocation.href):s.history.createHref(K.href),ref:o,onClick:Nt([O,Ue]),onFocus:Nt([g,qt]),onMouseEnter:Nt([S,ft]),onMouseLeave:Nt([k,Ot]),onTouchStart:Nt([C,X]),disabled:!!R,target:_,...Object.keys(qs).length&&{style:qs},...se&&{className:se},...R&&{role:"link","aria-disabled":!0},...ot&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}function Bi(e){return w.forwardRef(function(s,r){return I.jsx(Kn,{...s,_asChild:e,ref:r})})}const Kn=w.forwardRef((e,t)=>{const{_asChild:s,...r}=e,{type:n,ref:i,...o}=Nn(r,t),a=typeof r.children=="function"?r.children({isActive:o["data-status"]==="active"}):r.children;return typeof s>"u"&&delete o.disabled,w.createElement(s||"a",{...o,ref:i},a)});function zn(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $n(){const e=_t(),t=w.useRef({router:e,mounted:!1}),s=tt({select:({isLoading:u})=>u}),[r,n]=w.useState(!1),i=tt({select:u=>u.matches.some(f=>f.status==="pending"),structuralSharing:!0}),o=ms(s),a=s||r||i,l=ms(a),h=s||i,d=ms(h);return e.isServer||(e.startReactTransition=u=>{n(!0),w.startTransition(()=>{u(),n(!1)})}),w.useEffect(()=>{const u=e.history.subscribe(e.load),f=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return zt(e.latestLocation.href)!==zt(f.href)&&e.commitLocation({...f,replace:!0}),()=>{u()}},[e,e.history]),Ee(()=>{if(typeof window<"u"&&e.clientSsr||t.current.router===e&&t.current.mounted)return;t.current={router:e,mounted:!0},(async()=>{try{await e.load()}catch(f){console.error(f)}})()},[e]),Ee(()=>{if(o&&!s){const u=e.state.location,f=e.state.resolvedLocation,p=f.pathname!==u.pathname,m=f.href!==u.href;e.emit({type:"onLoad",fromLocation:f,toLocation:u,pathChanged:p,hrefChanged:m})}},[o,e,s]),Ee(()=>{if(d&&!h){const u=e.state.location,f=e.state.resolvedLocation,p=f.pathname!==u.pathname,m=f.href!==u.href;e.emit({type:"onBeforeRouteMount",fromLocation:f,toLocation:u,pathChanged:p,hrefChanged:m})}},[h,d,e]),Ee(()=>{if(l&&!a){const u=e.state.location,f=e.state.resolvedLocation,p=f.pathname!==u.pathname,m=f.href!==u.href;if(e.emit({type:"onResolved",fromLocation:f,toLocation:u,pathChanged:p,hrefChanged:m}),e.__store.setState(v=>({...v,status:"idle",resolvedLocation:v.location})),typeof document<"u"&&document.querySelector){const v=e.state.location.state.__hashScrollIntoViewOptions??!0;if(v&&e.state.location.hash!==""){const y=document.getElementById(e.state.location.hash);y&&y.scrollIntoView(v)}}}},[a,l,e]),null}function Hn(){const e=_t(),t=e.options.defaultPendingComponent?I.jsx(e.options.defaultPendingComponent,{}):null,s=e.isServer||typeof document<"u"&&e.clientSsr?$e:w.Suspense,r=I.jsxs(s,{fallback:t,children:[I.jsx($n,{}),I.jsx(Gn,{})]});return e.options.InnerWrap?I.jsx(e.options.InnerWrap,{children:r}):r}function Gn(){const e=tt({select:s=>{var r;return(r=s.matches[0])==null?void 0:r.id}}),t=tt({select:s=>s.loadedAt});return I.jsx(rs.Provider,{value:e,children:I.jsx(js,{getResetKey:()=>t,errorComponent:ss,onCatch:s=>{s.message||s.toString()},children:e?I.jsx(Tr,{matchId:e}):null})})}function Ui(){const e=_t();return tt({select:t=>[t.location.href,t.resolvedLocation.href,t.status],structuralSharing:!0}),w.useCallback(t=>{const{pending:s,caseSensitive:r,fuzzy:n,includeSearch:i,...o}=t;return e.matchRoute(o,{pending:s,caseSensitive:r,fuzzy:n,includeSearch:i})},[e])}const Ar=["component","errorComponent","pendingComponent","notFoundComponent"];function Wn(e){var t;for(const s of Ar)if((t=e.options[s])!=null&&t.preload)return!0;return!1}function vs(e,t){if(e==null)return{};if("~standard"in e){const s=e["~standard"].validate(t);if(s instanceof Promise)throw new Ye("Async validation not supported");if(s.issues)throw new Ye(JSON.stringify(s.issues,void 0,2),{cause:s});return s.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function Qi(e){return new Jn(e)}class Jn{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=s=>s(),this.update=s=>{var r;s.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const n=this.options;this.options={...this.options,...s},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(i=>[encodeURIComponent(i),i])):void 0,(!this.basepath||s.basepath&&s.basepath!==n.basepath)&&(s.basepath===void 0||s.basepath===""||s.basepath==="/"?this.basepath="/":this.basepath=`/${un(s.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?Sn({initialEntries:[this.basepath||"/"]}):bn()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new Ss(Yn(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(i=>!["redirected"].includes(i.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[s.id]=s);const r=o=>{o.forEach((a,l)=>{a.init({originalIndex:l,defaultSsr:this.options.defaultSsr});const h=this.routesById[a.id];if(gt(!h,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const u=zt(a.fullPath);(!this.routesByPath[u]||a.fullPath.endsWith("/"))&&(this.routesByPath[u]=a)}const d=a.children;d!=null&&d.length&&r(d)})};r([this.routeTree]);const n=[];Object.values(this.routesById).forEach((o,a)=>{var l;if(o.isRoot||!o.path)return;const h=As(o.fullPath),d=Ce(h);for(;d.length>1&&((l=d[0])==null?void 0:l.value)==="/";)d.shift();const u=d.map(f=>f.value==="/"?.75:f.type==="param"?.5:f.type==="wildcard"?.25:1);n.push({child:o,trimmed:h,parsed:d,index:a,scores:u})}),this.flatRoutes=n.sort((o,a)=>{const l=Math.min(o.scores.length,a.scores.length);for(let h=0;h<l;h++)if(o.scores[h]!==a.scores[h])return a.scores[h]-o.scores[h];if(o.scores.length!==a.scores.length)return a.scores.length-o.scores.length;for(let h=0;h<l;h++)if(o.parsed[h].value!==a.parsed[h].value)return o.parsed[h].value>a.parsed[h].value?1:-1;return o.index-a.index}).map((o,a)=>(o.child.rank=a,o.child))},this.subscribe=(s,r)=>{const n={eventType:s,fn:r};return this.subscribers.add(n),()=>{this.subscribers.delete(n)}},this.emit=s=>{this.subscribers.forEach(r=>{r.eventType===s.type&&r.fn(s)})},this.parseLocation=(s,r)=>{const n=({pathname:l,search:h,hash:d,state:u})=>{const f=this.options.parseSearch(h),p=this.options.stringifySearch(f);return{pathname:l,searchStr:p,search:at(s==null?void 0:s.search,f),hash:d.split("#").reverse()[0]??"",href:`${l}${p}${d}`,state:at(s==null?void 0:s.state,u)}},i=n(r??this.history.location),{__tempLocation:o,__tempKey:a}=i.state;if(o&&(!a||a===this.tempLocationKey)){const l=n(o);return l.state.key=i.state.key,delete l.state.__tempLocation,{...l,maskedLocation:i}}return i},this.resolvePathWithBase=(s,r)=>ln({basepath:this.basepath,base:s,to:es(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(s,r)=>{let n={};const i=zt(s.pathname),o=d=>qe(this.basepath,i,{to:d.fullPath,caseSensitive:d.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let a=(r==null?void 0:r.to)!==void 0?this.routesByPath[r.to]:void 0;a?n=o(a):a=this.flatRoutes.find(d=>{const u=o(d);return u?(n=u,!0):!1});let l=a||this.routesById[nt];const h=[l];for(;l.parentRoute;)l=l.parentRoute,h.unshift(l);return{matchedRoutes:h,routeParams:n,foundRoute:a}},this.cancelMatch=s=>{const r=this.getMatch(s);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var s;(s=this.state.pendingMatches)==null||s.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=s=>{const r=(i={},o)=>{var a,l,h,d,u,f;const p=i._fromLocation?this.matchRoutes(i._fromLocation,{_buildLocation:!0}):this.state.matches,m=i.from!=null?p.find(C=>qe(this.basepath,zt(C.pathname),{to:i.from,caseSensitive:!1,fuzzy:!1})):void 0,v=(m==null?void 0:m.pathname)||this.latestLocation.pathname;gt(i.from==null||m!=null,"Could not find match for from: "+i.from);const y=(a=this.state.pendingMatches)!=null&&a.length?(l=Fe(this.state.pendingMatches))==null?void 0:l.search:((h=Fe(p))==null?void 0:h.search)||this.latestLocation.search,x=o==null?void 0:o.matchedRoutes.filter(C=>p.find(F=>F.routeId===C.id));let M;if(i.to)M=this.resolvePathWithBase(v,`${i.to}`);else{const C=this.routesById[(d=x==null?void 0:x.find(F=>{const U=Ve({path:F.fullPath,params:(o==null?void 0:o.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap});return Et([this.basepath,U])===v}))==null?void 0:d.id];M=this.resolvePathWithBase(v,(C==null?void 0:C.to)??v)}const _={...(u=Fe(p))==null?void 0:u.params};let R=(i.params??!0)===!0?_:{..._,...ne(i.params,_)};Object.keys(R).length>0&&(o==null||o.matchedRoutes.map(C=>{var F;return((F=C.options.params)==null?void 0:F.stringify)??C.options.stringifyParams}).filter(Boolean).forEach(C=>{R={...R,...C(R)}})),M=Ve({path:M,params:R??{},leaveWildcards:!1,leaveParams:s.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let b=y;if(s._includeValidateSearch&&((f=this.options.search)!=null&&f.strict)){let C={};o==null||o.matchedRoutes.forEach(F=>{try{F.options.validateSearch&&(C={...C,...vs(F.options.validateSearch,{...C,...b})??{}})}catch{}}),b=C}b=(C=>{const F=(o==null?void 0:o.matchedRoutes.reduce((j,V)=>{var rt;const lt=[];if("search"in V.options)(rt=V.options.search)!=null&&rt.middlewares&&lt.push(...V.options.search.middlewares);else if(V.options.preSearchFilters||V.options.postSearchFilters){const ht=({search:it,next:bt})=>{let q=it;"preSearchFilters"in V.options&&V.options.preSearchFilters&&(q=V.options.preSearchFilters.reduce((K,z)=>z(K),it));const W=bt(q);return"postSearchFilters"in V.options&&V.options.postSearchFilters?V.options.postSearchFilters.reduce((K,z)=>z(K),W):W};lt.push(ht)}if(s._includeValidateSearch&&V.options.validateSearch){const ht=({search:it,next:bt})=>{try{const q=bt(it);return{...q,...vs(V.options.validateSearch,q)??{}}}catch{}};lt.push(ht)}return j.concat(lt)},[]))??[],U=({search:j})=>i.search?i.search===!0?j:ne(i.search,j):{};F.push(U);const B=(j,V)=>{if(j>=F.length)return V;const rt=F[j];return rt({search:V,next:ht=>B(j+1,ht)})};return B(0,C)})(b),b=at(y,b);const O=this.options.stringifySearch(b),g=i.hash===!0?this.latestLocation.hash:i.hash?ne(i.hash,this.latestLocation.hash):void 0,S=g?`#${g}`:"";let k=i.state===!0?this.latestLocation.state:i.state?ne(i.state,this.latestLocation.state):{};return k=at(this.latestLocation.state,k),{pathname:M,search:b,searchStr:O,state:k,hash:g??"",href:`${M}${O}${S}`,unmaskOnReload:i.unmaskOnReload}},n=(i={},o)=>{var a;const l=r(i);let h=o?r(o):void 0;if(!h){let f={};const p=(a=this.options.routeMasks)==null?void 0:a.find(m=>{const v=qe(this.basepath,l.pathname,{to:m.from,caseSensitive:!1,fuzzy:!1});return v?(f=v,!0):!1});if(p){const{from:m,...v}=p;o={...gs(s,["from"]),...v,params:f},h=r(o)}}const d=this.getMatchedRoutes(l,i),u=r(i,d);if(h){const f=this.getMatchedRoutes(h,o),p=r(o,f);u.maskedLocation=p}return u};return s.mask?n(s,{...gs(s,["from"]),...s.mask}):n(s)},this.commitLocation=({viewTransition:s,ignoreBlocker:r,...n})=>{const i=()=>{n.state.key=this.latestLocation.state.key;const l=ie(n.state,this.latestLocation.state);return delete n.state.key,l},o=this.latestLocation.href===n.href,a=this.commitLocationPromise;if(this.commitLocationPromise=re(()=>{a==null||a.resolve()}),o&&i())this.load();else{let{maskedLocation:l,hashScrollIntoView:h,...d}=n;l&&(d={...l,state:{...l.state,__tempKey:void 0,__tempLocation:{...d,search:d.searchStr,state:{...d.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(d.unmaskOnReload??this.options.unmaskOnReload??!1)&&(d.state.__tempKey=this.tempLocationKey)),d.state.__hashScrollIntoViewOptions=h??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=s,this.history[n.replace?"replace":"push"](d.href,d.state,{ignoreBlocker:r})}return this.resetNextScroll=n.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:s,resetScroll:r,hashScrollIntoView:n,viewTransition:i,ignoreBlocker:o,href:a,...l}={})=>{if(a){const d=this.history.location.state.__TSR_index,u=Ie(a,{__TSR_index:s?d:d+1});l.to=u.pathname,l.search=this.options.parseSearch(u.search),l.hash=u.hash.slice(1)}const h=this.buildLocation({...l,_includeValidateSearch:!0});return this.commitLocation({...h,viewTransition:i,replace:s,resetScroll:r,hashScrollIntoView:n,ignoreBlocker:o})},this.navigate=({to:s,reloadDocument:r,href:n,...i})=>{if(r){n||(n=this.buildLocation({to:s,...i}).href),i.replace?window.location.replace(n):window.location.href=n;return}return this.buildAndCommitLocation({...i,href:n,to:s})},this.load=async s=>{this.latestLocation=this.parseLocation(this.latestLocation);let r,n,i;for(i=new Promise(o=>{this.startReactTransition(async()=>{var a;try{const l=this.latestLocation,h=this.state.resolvedLocation,d=h.href!==l.href,u=h.pathname!==l.pathname;this.cancelMatches();let f;ds(()=>{f=this.matchRoutes(l),this.__store.setState(p=>({...p,status:"pending",isLoading:!0,location:l,pendingMatches:f,cachedMatches:p.cachedMatches.filter(m=>!f.find(v=>v.id===m.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:h,toLocation:l,pathChanged:u,hrefChanged:d}),this.emit({type:"onBeforeLoad",fromLocation:h,toLocation:l,pathChanged:u,hrefChanged:d}),await this.loadMatches({sync:s==null?void 0:s.sync,matches:f,location:l,onReady:async()=>{this.startViewTransition(async()=>{let p,m,v;ds(()=>{this.__store.setState(y=>{const x=y.matches,M=y.pendingMatches||y.matches;return p=x.filter(_=>!M.find(R=>R.id===_.id)),m=M.filter(_=>!x.find(R=>R.id===_.id)),v=x.filter(_=>M.find(R=>R.id===_.id)),{...y,isLoading:!1,loadedAt:Date.now(),matches:M,pendingMatches:void 0,cachedMatches:[...y.cachedMatches,...p.filter(_=>_.status!=="error")]}}),this.clearExpiredCache()}),[[p,"onLeave"],[m,"onEnter"],[v,"onStay"]].forEach(([y,x])=>{y.forEach(M=>{var _,R;(R=(_=this.looseRoutesById[M.routeId].options)[x])==null||R.call(_,M)})})})}})}catch(l){ps(l)?(r=l,this.isServer||this.navigate({...r,replace:!0,ignoreBlocker:!0})):vt(l)&&(n=l),this.__store.setState(h=>({...h,statusCode:r?r.statusCode:n?404:h.matches.some(d=>d.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===i&&((a=this.commitLocationPromise)==null||a.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),o()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=s=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let n;typeof r=="object"&&this.isViewTransitionTypesSupported?n={update:s,types:r.types}:n=s,document.startViewTransition(n)}else s()},this.updateMatch=(s,r)=>{var n;let i;const o=(n=this.state.pendingMatches)==null?void 0:n.find(d=>d.id===s),a=this.state.matches.find(d=>d.id===s),l=this.state.cachedMatches.find(d=>d.id===s),h=o?"pendingMatches":a?"matches":l?"cachedMatches":"";return h&&this.__store.setState(d=>{var u;return{...d,[h]:(u=d[h])==null?void 0:u.map(f=>f.id===s?i=r(f):f)}}),i},this.getMatch=s=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===s),this.loadMatches=async({location:s,matches:r,preload:n,onReady:i,updateMatch:o=this.updateMatch,sync:a})=>{let l,h=!1;const d=async()=>{h||(h=!0,await(i==null?void 0:i()))},u=p=>!!(n&&!this.state.matches.find(m=>m.id===p));!this.isServer&&!this.state.matches.length&&d();const f=(p,m)=>{var v,y,x;if(ps(m)&&!m.reloadDocument)throw m;if(Kt(m)||vt(m)){if(o(p.id,M=>({...M,status:Kt(m)?"redirected":vt(m)?"notFound":"error",isFetching:!1,error:m,beforeLoadPromise:void 0,loaderPromise:void 0})),m.routeId||(m.routeId=p.routeId),(v=p.beforeLoadPromise)==null||v.resolve(),(y=p.loaderPromise)==null||y.resolve(),(x=p.loadPromise)==null||x.resolve(),Kt(m))throw h=!0,m=this.resolveRedirect({...m,_fromLocation:s}),m;if(vt(m))throw this._handleNotFound(r,m,{updateMatch:o}),m}};try{await new Promise((p,m)=>{(async()=>{var v,y,x;try{const M=(b,E,O)=>{var g,S;const{id:k,routeId:C}=r[b],F=this.looseRoutesById[C];if(E instanceof Promise)throw E;E.routerCode=O,l=l??b,f(this.getMatch(k),E);try{(S=(g=F.options).onError)==null||S.call(g,E)}catch(U){E=U,f(this.getMatch(k),E)}o(k,U=>{var B,j;return(B=U.beforeLoadPromise)==null||B.resolve(),(j=U.loadPromise)==null||j.resolve(),{...U,error:E,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[b,{id:E,routeId:O}]of r.entries()){const g=this.getMatch(E),S=(v=r[b-1])==null?void 0:v.id,k=this.looseRoutesById[O],C=k.options.pendingMs??this.options.defaultPendingMs,F=!!(i&&!this.isServer&&!u(E)&&(k.options.loader||k.options.beforeLoad)&&typeof C=="number"&&C!==1/0&&(k.options.pendingComponent??this.options.defaultPendingComponent));let U=!0;if((g.beforeLoadPromise||g.loaderPromise)&&(F&&setTimeout(()=>{try{d()}catch{}},C),await g.beforeLoadPromise,U=this.getMatch(E).status!=="success"),U){try{o(E,H=>({...H,loadPromise:re(()=>{var ot;(ot=H.loadPromise)==null||ot.resolve()}),beforeLoadPromise:re()}));const B=new AbortController;let j;F&&(j=setTimeout(()=>{try{d()}catch{}},C));const{paramsError:V,searchError:rt}=this.getMatch(E);V&&M(b,V,"PARSE_PARAMS"),rt&&M(b,rt,"VALIDATE_SEARCH");const lt=()=>S?this.getMatch(S).context:this.options.context??{};o(E,H=>({...H,isFetching:"beforeLoad",fetchCount:H.fetchCount+1,abortController:B,pendingTimeout:j,context:{...lt(),...H.__routeContext}}));const{search:ht,params:it,context:bt,cause:q}=this.getMatch(E),W=u(E),K={search:ht,abortController:B,params:it,preload:W,context:bt,location:s,navigate:H=>this.navigate({...H,_fromLocation:s}),buildLocation:this.buildLocation,cause:W?"preload":q,matches:r},z=await((x=(y=k.options).beforeLoad)==null?void 0:x.call(y,K))??{};(Kt(z)||vt(z))&&M(b,z,"BEFORE_LOAD"),o(E,H=>({...H,__beforeLoadContext:z,context:{...lt(),...H.__routeContext,...z},abortController:B}))}catch(B){M(b,B,"BEFORE_LOAD")}o(E,B=>{var j;return(j=B.beforeLoadPromise)==null||j.resolve(),{...B,beforeLoadPromise:void 0,isFetching:!1}})}}const _=r.slice(0,l),R=[];_.forEach(({id:b,routeId:E},O)=>{R.push((async()=>{const{loaderPromise:g}=this.getMatch(b);let S=!1,k=!1;if(g){await g;const C=this.getMatch(b);C.error&&f(C,C.error)}else{const C=R[O-1],F=this.looseRoutesById[E],U=()=>{const{params:q,loaderDeps:W,abortController:K,context:z,cause:H}=this.getMatch(b),ot=u(b);return{params:q,deps:W,preload:!!ot,parentMatchPromise:C,abortController:K,context:z,location:s,navigate:dt=>this.navigate({...dt,_fromLocation:s}),cause:ot?"preload":H,route:F}},B=Date.now()-this.getMatch(b).updatedAt,j=u(b),V=j?F.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:F.options.staleTime??this.options.defaultStaleTime??0,rt=F.options.shouldReload,lt=typeof rt=="function"?rt(U()):rt;o(b,q=>({...q,loaderPromise:re(),preload:!!j&&!this.state.matches.find(W=>W.id===b)}));const ht=async()=>{var q,W,K,z,H,ot,dt,Be,Ue;try{const qt=async()=>{const X=this.getMatch(b);X.minPendingPromise&&await X.minPendingPromise};try{this.loadRouteChunk(F),o(b,se=>({...se,isFetching:"loader"}));const X=await((W=(q=F.options).loader)==null?void 0:W.call(q,U()));f(this.getMatch(b),X),await F._lazyPromise,await qt();const ft=(z=(K=F.options).head)==null?void 0:z.call(K,{matches:r,match:this.getMatch(b),params:this.getMatch(b).params,loaderData:X}),Ot=ft==null?void 0:ft.meta,Nt=ft==null?void 0:ft.links,_e=ft==null?void 0:ft.scripts,we=(ot=(H=F.options).headers)==null?void 0:ot.call(H,{loaderData:X});o(b,se=>({...se,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:X,meta:Ot,links:Nt,scripts:_e,headers:we}))}catch(X){let ft=X;await qt(),f(this.getMatch(b),X);try{(Be=(dt=F.options).onError)==null||Be.call(dt,X)}catch(Ot){ft=Ot,f(this.getMatch(b),Ot)}o(b,Ot=>({...Ot,error:ft,status:"error",isFetching:!1}))}(Ue=this.serverSsr)==null||Ue.onMatchSettled({router:this,match:this.getMatch(b)}),await F._componentsPromise}catch(qt){o(b,X=>({...X,loaderPromise:void 0})),f(this.getMatch(b),qt)}},{status:it,invalid:bt}=this.getMatch(b);S=it==="success"&&(bt||(lt??B>V)),j&&F.options.preload===!1||(S&&!a?(k=!0,(async()=>{try{await ht();const{loaderPromise:q,loadPromise:W}=this.getMatch(b);q==null||q.resolve(),W==null||W.resolve(),o(b,K=>({...K,loaderPromise:void 0}))}catch(q){ps(q)&&await this.navigate(q)}})()):(it!=="success"||S&&a)&&await ht())}if(!k){const{loaderPromise:C,loadPromise:F}=this.getMatch(b);C==null||C.resolve(),F==null||F.resolve()}return o(b,C=>({...C,isFetching:k?C.isFetching:!1,loaderPromise:k?C.loaderPromise:void 0,invalid:!1})),this.getMatch(b)})())}),await Promise.all(R),p()}catch(M){m(M)}})()}),await d()}catch(p){if(Kt(p)||vt(p))throw vt(p)&&!n&&await d(),p}return r},this.invalidate=s=>{const r=n=>{var i;return((i=s==null?void 0:s.filter)==null?void 0:i.call(s,n))??!0?{...n,invalid:!0,...n.status==="error"?{status:"pending",error:void 0}:{}}:n};return this.__store.setState(n=>{var i;return{...n,matches:n.matches.map(r),cachedMatches:n.cachedMatches.map(r),pendingMatches:(i=n.pendingMatches)==null?void 0:i.map(r)}}),this.load({sync:s==null?void 0:s.sync})},this.resolveRedirect=s=>{const r=s;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=s=>{const r=s==null?void 0:s.filter;r!==void 0?this.__store.setState(n=>({...n,cachedMatches:n.cachedMatches.filter(i=>!r(i))})):this.__store.setState(n=>({...n,cachedMatches:[]}))},this.clearExpiredCache=()=>{const s=r=>{const n=this.looseRoutesById[r.routeId];if(!n.options.loader)return!0;const i=(r.preload?n.options.preloadGcTime??this.options.defaultPreloadGcTime:n.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<i)};this.clearCache({filter:s})},this.loadRouteChunk=s=>(s._lazyPromise===void 0&&(s.lazyFn?s._lazyPromise=s.lazyFn().then(r=>{const{id:n,...i}=r.options;Object.assign(s.options,i)}):s._lazyPromise=Promise.resolve()),s._componentsPromise===void 0&&(s._componentsPromise=s._lazyPromise.then(()=>Promise.all(Ar.map(async r=>{const n=s.options[r];n!=null&&n.preload&&await n.preload()})))),s._componentsPromise),this.preloadRoute=async s=>{const r=this.buildLocation(s);let n=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:s});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),o=new Set([...i,...this.state.cachedMatches.map(a=>a.id)]);ds(()=>{n.forEach(a=>{o.has(a.id)||this.__store.setState(l=>({...l,cachedMatches:[...l.cachedMatches,a]}))})});try{return n=await this.loadMatches({matches:n,location:r,preload:!0,updateMatch:(a,l)=>{i.has(a)?n=n.map(h=>h.id===a?l(h):h):this.updateMatch(a,l)}}),n}catch(a){if(Kt(a))return a.reloadDocument?void 0:await this.preloadRoute({...a,_fromLocation:r});console.error(a);return}},this.matchRoute=(s,r)=>{const n={...s,to:s.to?this.resolvePathWithBase(s.from||"",s.to):void 0,params:s.params||{},leaveParams:!0},i=this.buildLocation(n);if(r!=null&&r.pending&&this.state.status!=="pending")return!1;const a=((r==null?void 0:r.pending)===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,l=qe(this.basepath,a.pathname,{...r,to:i.pathname});return!l||s.params&&!ie(l,s.params,{partial:!0})?!1:l&&((r==null?void 0:r.includeSearch)??!0)?ie(a.search,i.search,{partial:!0})?l:!1:l},this._handleNotFound=(s,r,{updateMatch:n=this.updateMatch}={})=>{const i=Object.fromEntries(s.map(l=>[l.routeId,l]));let o=(r.global?this.looseRoutesById[nt]:this.looseRoutesById[r.routeId])||this.looseRoutesById[nt];for(;!o.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&o.id!==nt;)o=o.parentRoute,gt(o);const a=i[o.id];gt(a,"Could not find match for route: "+o.id),n(a.id,l=>({...l,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&o.parentRoute&&(r.routeId=o.parentRoute.id,this._handleNotFound(s,r,{updateMatch:n}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(s=>s.status==="notFound"||s.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??vn,parseSearch:t.parseSearch??mn}),typeof document<"u"&&(window.__TSR_ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(t,s,r){return typeof t=="string"?this.matchRoutesInternal({pathname:t,search:s},r):this.matchRoutesInternal(t,s)}matchRoutesInternal(t,s){const{foundRoute:r,matchedRoutes:n,routeParams:i}=this.getMatchedRoutes(t,s==null?void 0:s.dest);let o=!1;(r?r.path!=="/"&&i["**"]:zt(t.pathname))&&(this.options.notFoundRoute?n.push(this.options.notFoundRoute):o=!0);const a=(()=>{if(o){if(this.options.notFoundMode!=="root")for(let u=n.length-1;u>=0;u--){const f=n[u];if(f.children)return f.id}return nt}})(),l=n.map(u=>{var f;let p;const m=((f=u.options.params)==null?void 0:f.parse)??u.options.parseParams;if(m)try{const v=m(i);Object.assign(i,v)}catch(v){if(p=new Xn(v.message,{cause:v}),s!=null&&s.throwOnError)throw p;return p}}),h=[],d=u=>(u==null?void 0:u.id)?u.context??this.options.context??{}:this.options.context??{};return n.forEach((u,f)=>{var p,m,v,y;const x=h[f-1],[M,_]=(()=>{const U=(x==null?void 0:x.search)??t.search;try{const B=vs(u.options.validateSearch,U)??{};return[{...U,...B},void 0]}catch(B){let j=B;if(B instanceof Ye||(j=new Ye(B.message,{cause:B})),s!=null&&s.throwOnError)throw j;return[U,j]}})(),R=((m=(p=u.options).loaderDeps)==null?void 0:m.call(p,{search:M}))??"",b=R?JSON.stringify(R):"",E=Ve({path:u.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),O=Ve({path:u.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+b,g=this.getMatch(O),S=this.state.matches.find(U=>U.routeId===u.id),k=S?"stay":"enter";let C;if(g)C={...g,cause:k,params:S?at(S.params,i):i,search:at(S?S.search:g.search,M)};else{const U=u.options.loader||u.options.beforeLoad||u.lazyFn||Wn(u)?"pending":"success";C={id:O,index:f,routeId:u.id,params:S?at(S.params,i):i,pathname:Et([this.basepath,E]),updatedAt:Date.now(),search:S?at(S.search,M):M,searchError:void 0,status:U,isFetching:!1,error:void 0,paramsError:l[f],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:k,loaderDeps:S?at(S.loaderDeps,R):R,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:u.options.staticData||{},loadPromise:re(),fullPath:u.fullPath}}C.status==="success"&&(C.headers=(y=(v=u.options).headers)==null?void 0:y.call(v,{loaderData:C.loaderData})),s!=null&&s.preload||(C.globalNotFound=a===u.id),C.searchError=_;const F=d(x);C.context={...F,...C.__routeContext,...C.__beforeLoadContext},h.push(C)}),h.forEach((u,f)=>{var p,m,v,y;const x=this.looseRoutesById[u.routeId];if(!this.getMatch(u.id)&&(s==null?void 0:s._buildLocation)!==!0){const R=h[f-1],b=d(R),E={deps:u.loaderDeps,params:u.params,context:b,location:t,navigate:O=>this.navigate({...O,_fromLocation:t}),buildLocation:this.buildLocation,cause:u.cause,abortController:u.abortController,preload:!!u.preload,matches:h};u.__routeContext=((m=(p=x.options).context)==null?void 0:m.call(p,E))??{},u.context={...b,...u.__routeContext,...u.__beforeLoadContext}}const _=(y=(v=x.options).head)==null?void 0:y.call(v,{matches:h,match:u,params:u.params,loaderData:u.loaderData??void 0});u.links=_==null?void 0:_.links,u.scripts=_==null?void 0:_.scripts,u.meta=_==null?void 0:_.meta}),h}}class Ye extends Error{}class Xn extends Error{}function Yn(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...e},location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Zn({router:e,children:t,...s}){e.update({...e.options,...s,context:{...e.options.context,...s.context}});const r=xr(),n=I.jsx(r.Provider,{value:e,children:t});return e.options.Wrap?I.jsx(e.options.Wrap,{children:n}):n}function Vi({router:e,...t}){return I.jsx(Zn,{router:e,...t,children:I.jsx(Hn,{})})}var Re=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},te=typeof window>"u"||"Deno"in globalThis;function ct(){}function ti(e,t){return typeof e=="function"?e(t):e}function Ps(e){return typeof e=="number"&&e>=0&&e!==1/0}function jr(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ue(e,t){return typeof e=="function"?e(t):e}function yt(e,t){return typeof e=="function"?e(t):e}function rr(e,t){const{type:s="all",exact:r,fetchStatus:n,predicate:i,queryKey:o,stale:a}=e;if(o){if(r){if(t.queryHash!==Bs(o,t.options))return!1}else if(!ke(t.queryKey,o))return!1}if(s!=="all"){const l=t.isActive();if(s==="active"&&!l||s==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||n&&n!==t.state.fetchStatus||i&&!i(t))}function nr(e,t){const{exact:s,status:r,predicate:n,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(s){if(ee(t.options.mutationKey)!==ee(i))return!1}else if(!ke(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function Bs(e,t){return((t==null?void 0:t.queryKeyHashFn)||ee)(e)}function ee(e){return JSON.stringify(e,(t,s)=>Cs(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function ke(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(s=>!ke(e[s],t[s])):!1}function Br(e,t){if(e===t)return e;const s=ir(e)&&ir(t);if(s||Cs(e)&&Cs(t)){const r=s?e:Object.keys(e),n=r.length,i=s?t:Object.keys(t),o=i.length,a=s?[]:{};let l=0;for(let h=0;h<o;h++){const d=s?h:i[h];(!s&&r.includes(d)||s)&&e[d]===void 0&&t[d]===void 0?(a[d]=void 0,l++):(a[d]=Br(e[d],t[d]),a[d]===e[d]&&e[d]!==void 0&&l++)}return n===o&&l===n?e:a}return t}function Ze(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function ir(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Cs(e){if(!or(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!or(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function or(e){return Object.prototype.toString.call(e)==="[object Object]"}function ei(e){return new Promise(t=>{setTimeout(t,e)})}function Rs(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?Br(e,t):t}function si(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function ri(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var Us=Symbol();function Ur(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Us?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var $t,kt,ce,dr,ni=(dr=class extends Re{constructor(){super();L(this,$t);L(this,kt);L(this,ce);P(this,ce,t=>{if(!te&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){c(this,kt)||this.setEventListener(c(this,ce))}onUnsubscribe(){var t;this.hasListeners()||((t=c(this,kt))==null||t.call(this),P(this,kt,void 0))}setEventListener(t){var s;P(this,ce,t),(s=c(this,kt))==null||s.call(this),P(this,kt,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){c(this,$t)!==t&&(P(this,$t,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){var t;return typeof c(this,$t)=="boolean"?c(this,$t):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},$t=new WeakMap,kt=new WeakMap,ce=new WeakMap,dr),Qs=new ni,le,Tt,he,fr,ii=(fr=class extends Re{constructor(){super();L(this,le,!0);L(this,Tt);L(this,he);P(this,he,t=>{if(!te&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){c(this,Tt)||this.setEventListener(c(this,he))}onUnsubscribe(){var t;this.hasListeners()||((t=c(this,Tt))==null||t.call(this),P(this,Tt,void 0))}setEventListener(t){var s;P(this,he,t),(s=c(this,Tt))==null||s.call(this),P(this,Tt,t(this.setOnline.bind(this)))}setOnline(t){c(this,le)!==t&&(P(this,le,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return c(this,le)}},le=new WeakMap,Tt=new WeakMap,he=new WeakMap,fr),ts=new ii;function _s(){let e,t;const s=new Promise((n,i)=>{e=n,t=i});s.status="pending",s.catch(()=>{});function r(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{r({status:"fulfilled",value:n}),e(n)},s.reject=n=>{r({status:"rejected",reason:n}),t(n)},s}function oi(e){return Math.min(1e3*2**e,3e4)}function Qr(e){return(e??"online")==="online"?ts.isOnline():!0}var Vr=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function ys(e){return e instanceof Vr}function qr(e){let t=!1,s=0,r=!1,n;const i=_s(),o=v=>{var y;r||(f(new Vr(v)),(y=e.abort)==null||y.call(e))},a=()=>{t=!0},l=()=>{t=!1},h=()=>Qs.isFocused()&&(e.networkMode==="always"||ts.isOnline())&&e.canRun(),d=()=>Qr(e.networkMode)&&e.canRun(),u=v=>{var y;r||(r=!0,(y=e.onSuccess)==null||y.call(e,v),n==null||n(),i.resolve(v))},f=v=>{var y;r||(r=!0,(y=e.onError)==null||y.call(e,v),n==null||n(),i.reject(v))},p=()=>new Promise(v=>{var y;n=x=>{(r||h())&&v(x)},(y=e.onPause)==null||y.call(e)}).then(()=>{var v;n=void 0,r||(v=e.onContinue)==null||v.call(e)}),m=()=>{if(r)return;let v;const y=s===0?e.initialPromise:void 0;try{v=y??e.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(u).catch(x=>{var E;if(r)return;const M=e.retry??(te?0:3),_=e.retryDelay??oi,R=typeof _=="function"?_(s,x):_,b=M===!0||typeof M=="number"&&s<M||typeof M=="function"&&M(s,x);if(t||!b){f(x);return}s++,(E=e.onFail)==null||E.call(e,s,x),ei(R).then(()=>h()?void 0:p()).then(()=>{t?f(x):m()})})};return{promise:i,cancel:o,continue:()=>(n==null||n(),i),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?m():p().then(m),i)}}function ai(){let e=[],t=0,s=a=>{a()},r=a=>{a()},n=a=>setTimeout(a,0);const i=a=>{t?e.push(a):n(()=>{s(a)})},o=()=>{const a=e;e=[],a.length&&n(()=>{r(()=>{a.forEach(l=>{s(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{s=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{n=a}}}var $=ai(),Ht,pr,Nr=(pr=class{constructor(){L(this,Ht)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ps(this.gcTime)&&P(this,Ht,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(te?1/0:5*60*1e3))}clearGcTimeout(){c(this,Ht)&&(clearTimeout(c(this,Ht)),P(this,Ht,void 0))}},Ht=new WeakMap,pr),de,fe,ut,J,Te,Gt,pt,wt,mr,ui=(mr=class extends Nr{constructor(t){super();L(this,pt);L(this,de);L(this,fe);L(this,ut);L(this,J);L(this,Te);L(this,Gt);P(this,Gt,!1),P(this,Te,t.defaultOptions),this.setOptions(t.options),this.observers=[],P(this,ut,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,P(this,de,ci(this.options)),this.state=t.state??c(this,de),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=c(this,J))==null?void 0:t.promise}setOptions(t){this.options={...c(this,Te),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&c(this,ut).remove(this)}setData(t,s){const r=Rs(this.state.data,t,this.options);return T(this,pt,wt).call(this,{data:r,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),r}setState(t,s){T(this,pt,wt).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var r,n;const s=(r=c(this,J))==null?void 0:r.promise;return(n=c(this,J))==null||n.cancel(t),s?s.then(ct).catch(ct):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(c(this,de))}isActive(){return this.observers.some(t=>yt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Us||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!jr(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=c(this,J))==null||s.continue()}onOnline(){var s;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=c(this,J))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),c(this,ut).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(c(this,J)&&(c(this,Gt)?c(this,J).cancel({revert:!0}):c(this,J).cancelRetry()),this.scheduleGc()),c(this,ut).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||T(this,pt,wt).call(this,{type:"invalidate"})}fetch(t,s){var l,h,d;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(c(this,J))return c(this,J).continueRetry(),c(this,J).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(f=>f.options.queryFn);u&&this.setOptions(u.options)}const r=new AbortController,n=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(P(this,Gt,!0),r.signal)})},i=()=>{const u=Ur(this.options,s),f={queryKey:this.queryKey,meta:this.meta};return n(f),P(this,Gt,!1),this.options.persister?this.options.persister(u,f,this):u(f)},o={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:i};n(o),(l=this.options.behavior)==null||l.onFetch(o,this),P(this,fe,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=o.fetchOptions)==null?void 0:h.meta))&&T(this,pt,wt).call(this,{type:"fetch",meta:(d=o.fetchOptions)==null?void 0:d.meta});const a=u=>{var f,p,m,v;ys(u)&&u.silent||T(this,pt,wt).call(this,{type:"error",error:u}),ys(u)||((p=(f=c(this,ut).config).onError)==null||p.call(f,u,this),(v=(m=c(this,ut).config).onSettled)==null||v.call(m,this.state.data,u,this)),this.scheduleGc()};return P(this,J,qr({initialPromise:s==null?void 0:s.initialPromise,fn:o.fetchFn,abort:r.abort.bind(r),onSuccess:u=>{var f,p,m,v;if(u===void 0){a(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(y){a(y);return}(p=(f=c(this,ut).config).onSuccess)==null||p.call(f,u,this),(v=(m=c(this,ut).config).onSettled)==null||v.call(m,u,this.state.error,this),this.scheduleGc()},onError:a,onFail:(u,f)=>{T(this,pt,wt).call(this,{type:"failed",failureCount:u,error:f})},onPause:()=>{T(this,pt,wt).call(this,{type:"pause"})},onContinue:()=>{T(this,pt,wt).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),c(this,J).start()}},de=new WeakMap,fe=new WeakMap,ut=new WeakMap,J=new WeakMap,Te=new WeakMap,Gt=new WeakMap,pt=new WeakSet,wt=function(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Kr(r.data,this.options),fetchMeta:t.meta??null};case"success":return{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return ys(n)&&n.revert&&c(this,fe)?{...c(this,fe),fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),$.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),c(this,ut).notify({query:this,type:"updated",action:t})})},mr);function Kr(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Qr(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ci(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var St,vr,li=(vr=class extends Re{constructor(t={}){super();L(this,St);this.config=t,P(this,St,new Map)}build(t,s,r){const n=s.queryKey,i=s.queryHash??Bs(n,s);let o=this.get(i);return o||(o=new ui({cache:this,queryKey:n,queryHash:i,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(o)),o}add(t){c(this,St).has(t.queryHash)||(c(this,St).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=c(this,St).get(t.queryHash);s&&(t.destroy(),s===t&&c(this,St).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){$.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return c(this,St).get(t)}getAll(){return[...c(this,St).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>rr(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>rr(t,r)):s}notify(t){$.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){$.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){$.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},St=new WeakMap,vr),Pt,Y,Wt,Ct,It,yr,hi=(yr=class extends Nr{constructor(t){super();L(this,Ct);L(this,Pt);L(this,Y);L(this,Wt);this.mutationId=t.mutationId,P(this,Y,t.mutationCache),P(this,Pt,[]),this.state=t.state||zr(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){c(this,Pt).includes(t)||(c(this,Pt).push(t),this.clearGcTimeout(),c(this,Y).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){P(this,Pt,c(this,Pt).filter(s=>s!==t)),this.scheduleGc(),c(this,Y).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){c(this,Pt).length||(this.state.status==="pending"?this.scheduleGc():c(this,Y).remove(this))}continue(){var t;return((t=c(this,Wt))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var n,i,o,a,l,h,d,u,f,p,m,v,y,x,M,_,R,b,E,O;P(this,Wt,qr({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(g,S)=>{T(this,Ct,It).call(this,{type:"failed",failureCount:g,error:S})},onPause:()=>{T(this,Ct,It).call(this,{type:"pause"})},onContinue:()=>{T(this,Ct,It).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>c(this,Y).canRun(this)}));const s=this.state.status==="pending",r=!c(this,Wt).canStart();try{if(!s){T(this,Ct,It).call(this,{type:"pending",variables:t,isPaused:r}),await((i=(n=c(this,Y).config).onMutate)==null?void 0:i.call(n,t,this));const S=await((a=(o=this.options).onMutate)==null?void 0:a.call(o,t));S!==this.state.context&&T(this,Ct,It).call(this,{type:"pending",context:S,variables:t,isPaused:r})}const g=await c(this,Wt).start();return await((h=(l=c(this,Y).config).onSuccess)==null?void 0:h.call(l,g,t,this.state.context,this)),await((u=(d=this.options).onSuccess)==null?void 0:u.call(d,g,t,this.state.context)),await((p=(f=c(this,Y).config).onSettled)==null?void 0:p.call(f,g,null,this.state.variables,this.state.context,this)),await((v=(m=this.options).onSettled)==null?void 0:v.call(m,g,null,t,this.state.context)),T(this,Ct,It).call(this,{type:"success",data:g}),g}catch(g){try{throw await((x=(y=c(this,Y).config).onError)==null?void 0:x.call(y,g,t,this.state.context,this)),await((_=(M=this.options).onError)==null?void 0:_.call(M,g,t,this.state.context)),await((b=(R=c(this,Y).config).onSettled)==null?void 0:b.call(R,void 0,g,this.state.variables,this.state.context,this)),await((O=(E=this.options).onSettled)==null?void 0:O.call(E,void 0,g,t,this.state.context)),g}finally{T(this,Ct,It).call(this,{type:"error",error:g})}}finally{c(this,Y).runNext(this)}}},Pt=new WeakMap,Y=new WeakMap,Wt=new WeakMap,Ct=new WeakSet,It=function(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),$.batch(()=>{c(this,Pt).forEach(r=>{r.onMutationUpdate(t)}),c(this,Y).notify({mutation:this,type:"updated",action:t})})},yr);function zr(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var xt,mt,De,gr,di=(gr=class extends Re{constructor(t={}){super();L(this,xt);L(this,mt);L(this,De);this.config=t,P(this,xt,new Set),P(this,mt,new Map),P(this,De,0)}build(t,s,r){const n=new hi({mutationCache:this,mutationId:++Qe(this,De)._,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){c(this,xt).add(t);const s=Ke(t);if(typeof s=="string"){const r=c(this,mt).get(s);r?r.push(t):c(this,mt).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(c(this,xt).delete(t)){const s=Ke(t);if(typeof s=="string"){const r=c(this,mt).get(s);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&c(this,mt).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=Ke(t);if(typeof s=="string"){const r=c(this,mt).get(s),n=r==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===t}else return!0}runNext(t){var r;const s=Ke(t);if(typeof s=="string"){const n=(r=c(this,mt).get(s))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$.batch(()=>{c(this,xt).forEach(t=>{this.notify({type:"removed",mutation:t})}),c(this,xt).clear(),c(this,mt).clear()})}getAll(){return Array.from(c(this,xt))}find(t){const s={exact:!0,...t};return this.getAll().find(r=>nr(s,r))}findAll(t={}){return this.getAll().filter(s=>nr(t,s))}notify(t){$.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return $.batch(()=>Promise.all(t.map(s=>s.continue().catch(ct))))}},xt=new WeakMap,mt=new WeakMap,De=new WeakMap,gr);function Ke(e){var t;return(t=e.options.scope)==null?void 0:t.id}function ar(e){return{onFetch:(t,s)=>{var d,u,f,p,m;const r=t.options,n=(f=(u=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:u.fetchMore)==null?void 0:f.direction,i=((p=t.state.data)==null?void 0:p.pages)||[],o=((m=t.state.data)==null?void 0:m.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const h=async()=>{let v=!1;const y=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(t.signal.aborted?v=!0:t.signal.addEventListener("abort",()=>{v=!0}),t.signal)})},x=Ur(t.options,t.fetchOptions),M=async(_,R,b)=>{if(v)return Promise.reject();if(R==null&&_.pages.length)return Promise.resolve(_);const E={queryKey:t.queryKey,pageParam:R,direction:b?"backward":"forward",meta:t.options.meta};y(E);const O=await x(E),{maxPages:g}=t.options,S=b?ri:si;return{pages:S(_.pages,O,g),pageParams:S(_.pageParams,R,g)}};if(n&&i.length){const _=n==="backward",R=_?fi:ur,b={pages:i,pageParams:o},E=R(r,b);a=await M(b,E,_)}else{const _=e??i.length;do{const R=l===0?o[0]??r.initialPageParam:ur(r,a);if(l>0&&R==null)break;a=await M(a,R),l++}while(l<_)}return a};t.options.persister?t.fetchFn=()=>{var v,y;return(y=(v=t.options).persister)==null?void 0:y.call(v,h,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=h}}}function ur(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function fi(e,{pages:t,pageParams:s}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,s[0],s):void 0}var N,Dt,At,pe,me,jt,ve,ye,br,qi=(br=class{constructor(e={}){L(this,N);L(this,Dt);L(this,At);L(this,pe);L(this,me);L(this,jt);L(this,ve);L(this,ye);P(this,N,e.queryCache||new li),P(this,Dt,e.mutationCache||new di),P(this,At,e.defaultOptions||{}),P(this,pe,new Map),P(this,me,new Map),P(this,jt,0)}mount(){Qe(this,jt)._++,c(this,jt)===1&&(P(this,ve,Qs.subscribe(async e=>{e&&(await this.resumePausedMutations(),c(this,N).onFocus())})),P(this,ye,ts.subscribe(async e=>{e&&(await this.resumePausedMutations(),c(this,N).onOnline())})))}unmount(){var e,t;Qe(this,jt)._--,c(this,jt)===0&&((e=c(this,ve))==null||e.call(this),P(this,ve,void 0),(t=c(this,ye))==null||t.call(this),P(this,ye,void 0))}isFetching(e){return c(this,N).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return c(this,Dt).findAll({...e,status:"pending"}).length}getQueryData(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=c(this,N).get(t.queryHash))==null?void 0:s.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=c(this,N).build(this,t),r=s.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(ue(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return c(this,N).findAll(e).map(({queryKey:t,state:s})=>{const r=s.data;return[t,r]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),n=c(this,N).get(r.queryHash),i=n==null?void 0:n.state.data,o=ti(t,i);if(o!==void 0)return c(this,N).build(this,r).setData(o,{...s,manual:!0})}setQueriesData(e,t,s){return $.batch(()=>c(this,N).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){var s;const t=this.defaultQueryOptions({queryKey:e});return(s=c(this,N).get(t.queryHash))==null?void 0:s.state}removeQueries(e){const t=c(this,N);$.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=c(this,N),r={type:"active",...e};return $.batch(()=>(s.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries(r,t)))}cancelQueries(e,t={}){const s={revert:!0,...t},r=$.batch(()=>c(this,N).findAll(e).map(n=>n.cancel(s)));return Promise.all(r).then(ct).catch(ct)}invalidateQueries(e,t={}){return $.batch(()=>{if(c(this,N).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none")return Promise.resolve();const s={...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"};return this.refetchQueries(s,t)})}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},r=$.batch(()=>c(this,N).findAll(e).filter(n=>!n.isDisabled()).map(n=>{let i=n.fetch(void 0,s);return s.throwOnError||(i=i.catch(ct)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(ct)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=c(this,N).build(this,t);return s.isStaleByTime(ue(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ct).catch(ct)}fetchInfiniteQuery(e){return e.behavior=ar(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ct).catch(ct)}ensureInfiniteQueryData(e){return e.behavior=ar(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ts.isOnline()?c(this,Dt).resumePausedMutations():Promise.resolve()}getQueryCache(){return c(this,N)}getMutationCache(){return c(this,Dt)}getDefaultOptions(){return c(this,At)}setDefaultOptions(e){P(this,At,e)}setQueryDefaults(e,t){c(this,pe).set(ee(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...c(this,pe).values()],s={};return t.forEach(r=>{ke(e,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(e,t){c(this,me).set(ee(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...c(this,me).values()];let s={};return t.forEach(r=>{ke(e,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...c(this,At).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Bs(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Us&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...c(this,At).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){c(this,N).clear(),c(this,Dt).clear()}},N=new WeakMap,Dt=new WeakMap,At=new WeakMap,pe=new WeakMap,me=new WeakMap,jt=new WeakMap,ve=new WeakMap,ye=new WeakMap,br),et,D,Ae,Z,Jt,ge,Bt,Rt,je,be,Se,Xt,Yt,Ut,Pe,A,Le,ws,xs,Ms,Es,Ls,Fs,Os,$r,Sr,pi=(Sr=class extends Re{constructor(t,s){super();L(this,A);L(this,et);L(this,D);L(this,Ae);L(this,Z);L(this,Jt);L(this,ge);L(this,Bt);L(this,Rt);L(this,je);L(this,be);L(this,Se);L(this,Xt);L(this,Yt);L(this,Ut);L(this,Pe,new Set);this.options=s,P(this,et,t),P(this,Rt,null),P(this,Bt,_s()),this.options.experimental_prefetchInRender||c(this,Bt).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(c(this,D).addObserver(this),cr(c(this,D),this.options)?T(this,A,Le).call(this):this.updateResult(),T(this,A,Es).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Is(c(this,D),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Is(c(this,D),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,T(this,A,Ls).call(this),T(this,A,Fs).call(this),c(this,D).removeObserver(this)}setOptions(t,s){const r=this.options,n=c(this,D);if(this.options=c(this,et).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof yt(this.options.enabled,c(this,D))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");T(this,A,Os).call(this),c(this,D).setOptions(this.options),r._defaulted&&!Ze(this.options,r)&&c(this,et).getQueryCache().notify({type:"observerOptionsUpdated",query:c(this,D),observer:this});const i=this.hasListeners();i&&lr(c(this,D),n,this.options,r)&&T(this,A,Le).call(this),this.updateResult(s),i&&(c(this,D)!==n||yt(this.options.enabled,c(this,D))!==yt(r.enabled,c(this,D))||ue(this.options.staleTime,c(this,D))!==ue(r.staleTime,c(this,D)))&&T(this,A,ws).call(this);const o=T(this,A,xs).call(this);i&&(c(this,D)!==n||yt(this.options.enabled,c(this,D))!==yt(r.enabled,c(this,D))||o!==c(this,Ut))&&T(this,A,Ms).call(this,o)}getOptimisticResult(t){const s=c(this,et).getQueryCache().build(c(this,et),t),r=this.createResult(s,t);return vi(this,r)&&(P(this,Z,r),P(this,ge,this.options),P(this,Jt,c(this,D).state)),r}getCurrentResult(){return c(this,Z)}trackResult(t,s){const r={};return Object.keys(t).forEach(n=>{Object.defineProperty(r,n,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(n),s==null||s(n),t[n])})}),r}trackProp(t){c(this,Pe).add(t)}getCurrentQuery(){return c(this,D)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=c(this,et).defaultQueryOptions(t),r=c(this,et).getQueryCache().build(c(this,et),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return T(this,A,Le).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),c(this,Z)))}createResult(t,s){var g;const r=c(this,D),n=this.options,i=c(this,Z),o=c(this,Jt),a=c(this,ge),h=t!==r?t.state:c(this,Ae),{state:d}=t;let u={...d},f=!1,p;if(s._optimisticResults){const S=this.hasListeners(),k=!S&&cr(t,s),C=S&&lr(t,r,s,n);(k||C)&&(u={...u,...Kr(d.data,t.options)}),s._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:v,status:y}=u;if(s.select&&u.data!==void 0)if(i&&u.data===(o==null?void 0:o.data)&&s.select===c(this,je))p=c(this,be);else try{P(this,je,s.select),p=s.select(u.data),p=Rs(i==null?void 0:i.data,p,s),P(this,be,p),P(this,Rt,null)}catch(S){P(this,Rt,S)}else p=u.data;if(s.placeholderData!==void 0&&p===void 0&&y==="pending"){let S;if(i!=null&&i.isPlaceholderData&&s.placeholderData===(a==null?void 0:a.placeholderData))S=i.data;else if(S=typeof s.placeholderData=="function"?s.placeholderData((g=c(this,Se))==null?void 0:g.state.data,c(this,Se)):s.placeholderData,s.select&&S!==void 0)try{S=s.select(S),P(this,Rt,null)}catch(k){P(this,Rt,k)}S!==void 0&&(y="success",p=Rs(i==null?void 0:i.data,S,s),f=!0)}c(this,Rt)&&(m=c(this,Rt),p=c(this,be),v=Date.now(),y="error");const x=u.fetchStatus==="fetching",M=y==="pending",_=y==="error",R=M&&x,b=p!==void 0,O={status:y,fetchStatus:u.fetchStatus,isPending:M,isSuccess:y==="success",isError:_,isInitialLoading:R,isLoading:R,data:p,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:v,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>h.dataUpdateCount||u.errorUpdateCount>h.errorUpdateCount,isFetching:x,isRefetching:x&&!M,isLoadingError:_&&!b,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:_&&b,isStale:Vs(t,s),refetch:this.refetch,promise:c(this,Bt)};if(this.options.experimental_prefetchInRender){const S=F=>{O.status==="error"?F.reject(O.error):O.data!==void 0&&F.resolve(O.data)},k=()=>{const F=P(this,Bt,O.promise=_s());S(F)},C=c(this,Bt);switch(C.status){case"pending":t.queryHash===r.queryHash&&S(C);break;case"fulfilled":(O.status==="error"||O.data!==C.value)&&k();break;case"rejected":(O.status!=="error"||O.error!==C.reason)&&k();break}}return O}updateResult(t){const s=c(this,Z),r=this.createResult(c(this,D),this.options);if(P(this,Jt,c(this,D).state),P(this,ge,this.options),c(this,Jt).data!==void 0&&P(this,Se,c(this,D)),Ze(r,s))return;P(this,Z,r);const n={},i=()=>{if(!s)return!0;const{notifyOnChangeProps:o}=this.options,a=typeof o=="function"?o():o;if(a==="all"||!a&&!c(this,Pe).size)return!0;const l=new Set(a??c(this,Pe));return this.options.throwOnError&&l.add("error"),Object.keys(c(this,Z)).some(h=>{const d=h;return c(this,Z)[d]!==s[d]&&l.has(d)})};(t==null?void 0:t.listeners)!==!1&&i()&&(n.listeners=!0),T(this,A,$r).call(this,{...n,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&T(this,A,Es).call(this)}},et=new WeakMap,D=new WeakMap,Ae=new WeakMap,Z=new WeakMap,Jt=new WeakMap,ge=new WeakMap,Bt=new WeakMap,Rt=new WeakMap,je=new WeakMap,be=new WeakMap,Se=new WeakMap,Xt=new WeakMap,Yt=new WeakMap,Ut=new WeakMap,Pe=new WeakMap,A=new WeakSet,Le=function(t){T(this,A,Os).call(this);let s=c(this,D).fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(ct)),s},ws=function(){T(this,A,Ls).call(this);const t=ue(this.options.staleTime,c(this,D));if(te||c(this,Z).isStale||!Ps(t))return;const r=jr(c(this,Z).dataUpdatedAt,t)+1;P(this,Xt,setTimeout(()=>{c(this,Z).isStale||this.updateResult()},r))},xs=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(c(this,D)):this.options.refetchInterval)??!1},Ms=function(t){T(this,A,Fs).call(this),P(this,Ut,t),!(te||yt(this.options.enabled,c(this,D))===!1||!Ps(c(this,Ut))||c(this,Ut)===0)&&P(this,Yt,setInterval(()=>{(this.options.refetchIntervalInBackground||Qs.isFocused())&&T(this,A,Le).call(this)},c(this,Ut)))},Es=function(){T(this,A,ws).call(this),T(this,A,Ms).call(this,T(this,A,xs).call(this))},Ls=function(){c(this,Xt)&&(clearTimeout(c(this,Xt)),P(this,Xt,void 0))},Fs=function(){c(this,Yt)&&(clearInterval(c(this,Yt)),P(this,Yt,void 0))},Os=function(){const t=c(this,et).getQueryCache().build(c(this,et),this.options);if(t===c(this,D))return;const s=c(this,D);P(this,D,t),P(this,Ae,t.state),this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))},$r=function(t){$.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(c(this,Z))}),c(this,et).getQueryCache().notify({query:c(this,D),type:"observerResultsUpdated"})})},Sr);function mi(e,t){return yt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function cr(e,t){return mi(e,t)||e.state.data!==void 0&&Is(e,t,t.refetchOnMount)}function Is(e,t,s){if(yt(t.enabled,e)!==!1){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&Vs(e,t)}return!1}function lr(e,t,s,r){return(e!==t||yt(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Vs(e,s)}function Vs(e,t){return yt(t.enabled,e)!==!1&&e.isStaleByTime(ue(t.staleTime,e))}function vi(e,t){return!Ze(e.getCurrentResult(),t)}var Qt,Vt,st,Mt,Lt,He,ks,Pr,yi=(Pr=class extends Re{constructor(t,s){super();L(this,Lt);L(this,Qt);L(this,Vt);L(this,st);L(this,Mt);P(this,Qt,t),this.setOptions(s),this.bindMethods(),T(this,Lt,He).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var r;const s=this.options;this.options=c(this,Qt).defaultMutationOptions(t),Ze(this.options,s)||c(this,Qt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:c(this,st),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&ee(s.mutationKey)!==ee(this.options.mutationKey)?this.reset():((r=c(this,st))==null?void 0:r.state.status)==="pending"&&c(this,st).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=c(this,st))==null||t.removeObserver(this)}onMutationUpdate(t){T(this,Lt,He).call(this),T(this,Lt,ks).call(this,t)}getCurrentResult(){return c(this,Vt)}reset(){var t;(t=c(this,st))==null||t.removeObserver(this),P(this,st,void 0),T(this,Lt,He).call(this),T(this,Lt,ks).call(this)}mutate(t,s){var r;return P(this,Mt,s),(r=c(this,st))==null||r.removeObserver(this),P(this,st,c(this,Qt).getMutationCache().build(c(this,Qt),this.options)),c(this,st).addObserver(this),c(this,st).execute(t)}},Qt=new WeakMap,Vt=new WeakMap,st=new WeakMap,Mt=new WeakMap,Lt=new WeakSet,He=function(){var s;const t=((s=c(this,st))==null?void 0:s.state)??zr();P(this,Vt,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},ks=function(t){$.batch(()=>{var s,r,n,i,o,a,l,h;if(c(this,Mt)&&this.hasListeners()){const d=c(this,Vt).variables,u=c(this,Vt).context;(t==null?void 0:t.type)==="success"?((r=(s=c(this,Mt)).onSuccess)==null||r.call(s,t.data,d,u),(i=(n=c(this,Mt)).onSettled)==null||i.call(n,t.data,null,d,u)):(t==null?void 0:t.type)==="error"&&((a=(o=c(this,Mt)).onError)==null||a.call(o,t.error,d,u),(h=(l=c(this,Mt)).onSettled)==null||h.call(l,void 0,t.error,d,u))}this.listeners.forEach(d=>{d(c(this,Vt))})})},Pr),Hr=w.createContext(void 0),Gr=e=>{const t=w.useContext(Hr);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Ni=({client:e,children:t})=>(w.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),I.jsx(Hr.Provider,{value:e,children:t})),Wr=w.createContext(!1),gi=()=>w.useContext(Wr);Wr.Provider;function bi(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Si=w.createContext(bi()),Pi=()=>w.useContext(Si);function Jr(e,t){return typeof e=="function"?e(...t):!!e}function Ts(){}var Ci=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Ri=e=>{w.useEffect(()=>{e.clearReset()},[e])},_i=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(n&&e.data===void 0||Jr(s,[e.error,r])),wi=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...s)=>Math.max(t(...s),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},xi=(e,t)=>e.isLoading&&e.isFetching&&!t,Mi=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,hr=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Ei(e,t,s){var u,f,p,m,v;const r=Gr(),n=gi(),i=Pi(),o=r.defaultQueryOptions(e);(f=(u=r.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||f.call(u,o),o._optimisticResults=n?"isRestoring":"optimistic",wi(o),Ci(o,i),Ri(i);const a=!r.getQueryCache().get(o.queryHash),[l]=w.useState(()=>new t(r,o)),h=l.getOptimisticResult(o),d=!n&&e.subscribed!==!1;if(w.useSyncExternalStore(w.useCallback(y=>{const x=d?l.subscribe($.batchCalls(y)):Ts;return l.updateResult(),x},[l,d]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),w.useEffect(()=>{l.setOptions(o,{listeners:!1})},[o,l]),Mi(o,h))throw hr(o,l,i);if(_i({result:h,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw h.error;if((m=(p=r.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||m.call(p,o,h),o.experimental_prefetchInRender&&!te&&xi(h,n)){const y=a?hr(o,l,i):(v=r.getQueryCache().get(o.queryHash))==null?void 0:v.promise;y==null||y.catch(Ts).finally(()=>{l.updateResult()})}return o.notifyOnChangeProps?h:l.trackResult(h)}function Ki(e,t){return Ei(e,pi)}function zi(e,t){const s=Gr(),[r]=w.useState(()=>new yi(s,e));w.useEffect(()=>{r.setOptions(e)},[r,e]);const n=w.useSyncExternalStore(w.useCallback(o=>r.subscribe($.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=w.useCallback((o,a)=>{r.mutate(o,a).catch(Ts)},[r]);if(n.error&&Jr(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}export{Ii as N,Qn as O,qi as Q,Oi as R,rn as a,ji as b,Dr as c,Bi as d,zi as e,Ki as f,ki as g,Ni as h,Fr as i,I as j,Ti as k,Ui as l,Ai as m,Or as n,Lr as o,Qi as p,Vi as q,w as r,Di as s,Gr as u};
