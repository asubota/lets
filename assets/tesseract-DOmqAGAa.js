var x={exports:{}},Le;function Je(){return Le||(Le=1,function(c){var o=function(n){var f=Object.prototype,i=f.hasOwnProperty,d=Object.defineProperty||function(r,e,t){r[e]=t.value},p,O=typeof Symbol=="function"?Symbol:{},C=O.iterator||"@@iterator",G=O.asyncIterator||"@@asyncIterator",P=O.toStringTag||"@@toStringTag";function k(r,e,t){return Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),r[e]}try{k({},"")}catch{k=function(e,t,s){return e[t]=s}}function M(r,e,t,s){var a=e&&e.prototype instanceof m?e:m,h=Object.create(a.prototype),b=new K(s||[]);return d(h,"_invoke",{value:Q(r,t,b)}),h}n.wrap=M;function $(r,e,t){try{return{type:"normal",arg:r.call(e,t)}}catch(s){return{type:"throw",arg:s}}}var F="suspendedStart",g="suspendedYield",w="executing",D="completed",y={};function m(){}function E(){}function T(){}var W={};k(W,C,function(){return this});var B=Object.getPrototypeOf,U=B&&B(B(H([])));U&&U!==f&&i.call(U,C)&&(W=U);var N=T.prototype=m.prototype=Object.create(W);E.prototype=T,d(N,"constructor",{value:T,configurable:!0}),d(T,"constructor",{value:E,configurable:!0}),E.displayName=k(T,P,"GeneratorFunction");function Y(r){["next","throw","return"].forEach(function(e){k(r,e,function(t){return this._invoke(e,t)})})}n.isGeneratorFunction=function(r){var e=typeof r=="function"&&r.constructor;return e?e===E||(e.displayName||e.name)==="GeneratorFunction":!1},n.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,T):(r.__proto__=T,k(r,P,"GeneratorFunction")),r.prototype=Object.create(N),r},n.awrap=function(r){return{__await:r}};function z(r,e){function t(h,b,L,R){var S=$(r[h],r,b);if(S.type==="throw")R(S.arg);else{var u=S.arg,l=u.value;return l&&typeof l=="object"&&i.call(l,"__await")?e.resolve(l.__await).then(function(v){t("next",v,L,R)},function(v){t("throw",v,L,R)}):e.resolve(l).then(function(v){u.value=v,L(u)},function(v){return t("throw",v,L,R)})}}var s;function a(h,b){function L(){return new e(function(R,S){t(h,b,R,S)})}return s=s?s.then(L,L):L()}d(this,"_invoke",{value:a})}Y(z.prototype),k(z.prototype,G,function(){return this}),n.AsyncIterator=z,n.async=function(r,e,t,s,a){a===void 0&&(a=Promise);var h=new z(M(r,e,t,s),a);return n.isGeneratorFunction(e)?h:h.next().then(function(b){return b.done?b.value:h.next()})};function Q(r,e,t){var s=F;return function(h,b){if(s===w)throw new Error("Generator is already running");if(s===D){if(h==="throw")throw b;return Z()}for(t.method=h,t.arg=b;;){var L=t.delegate;if(L){var R=j(L,t);if(R){if(R===y)continue;return R}}if(t.method==="next")t.sent=t._sent=t.arg;else if(t.method==="throw"){if(s===F)throw s=D,t.arg;t.dispatchException(t.arg)}else t.method==="return"&&t.abrupt("return",t.arg);s=w;var S=$(r,e,t);if(S.type==="normal"){if(s=t.done?D:g,S.arg===y)continue;return{value:S.arg,done:t.done}}else S.type==="throw"&&(s=D,t.method="throw",t.arg=S.arg)}}}function j(r,e){var t=e.method,s=r.iterator[t];if(s===p)return e.delegate=null,t==="throw"&&r.iterator.return&&(e.method="return",e.arg=p,j(r,e),e.method==="throw")||t!=="return"&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+t+"' method")),y;var a=$(s,r.iterator,e.arg);if(a.type==="throw")return e.method="throw",e.arg=a.arg,e.delegate=null,y;var h=a.arg;if(!h)return e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y;if(h.done)e[r.resultName]=h.value,e.next=r.nextLoc,e.method!=="return"&&(e.method="next",e.arg=p);else return h;return e.delegate=null,y}Y(N),k(N,P,"Generator"),k(N,C,function(){return this}),k(N,"toString",function(){return"[object Generator]"});function A(r){var e={tryLoc:r[0]};1 in r&&(e.catchLoc=r[1]),2 in r&&(e.finallyLoc=r[2],e.afterLoc=r[3]),this.tryEntries.push(e)}function J(r){var e=r.completion||{};e.type="normal",delete e.arg,r.completion=e}function K(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(A,this),this.reset(!0)}n.keys=function(r){var e=Object(r),t=[];for(var s in e)t.push(s);return t.reverse(),function a(){for(;t.length;){var h=t.pop();if(h in e)return a.value=h,a.done=!1,a}return a.done=!0,a}};function H(r){if(r){var e=r[C];if(e)return e.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var t=-1,s=function a(){for(;++t<r.length;)if(i.call(r,t))return a.value=r[t],a.done=!1,a;return a.value=p,a.done=!0,a};return s.next=s}}return{next:Z}}n.values=H;function Z(){return{value:p,done:!0}}return K.prototype={constructor:K,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(J),!r)for(var e in this)e.charAt(0)==="t"&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var r=this.tryEntries[0],e=r.completion;if(e.type==="throw")throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var e=this;function t(R,S){return h.type="throw",h.arg=r,e.next=R,S&&(e.method="next",e.arg=p),!!S}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],h=a.completion;if(a.tryLoc==="root")return t("end");if(a.tryLoc<=this.prev){var b=i.call(a,"catchLoc"),L=i.call(a,"finallyLoc");if(b&&L){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(b){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else if(L){if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(r,e){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.tryLoc<=this.prev&&i.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&(r==="break"||r==="continue")&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var h=a?a.completion:{};return h.type=r,h.arg=e,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(h)},complete:function(r,e){if(r.type==="throw")throw r.arg;return r.type==="break"||r.type==="continue"?this.next=r.arg:r.type==="return"?(this.rval=this.arg=r.arg,this.method="return",this.next="end"):r.type==="normal"&&e&&(this.next=e),y},finish:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===r)return this.complete(t.completion,t.afterLoc),J(t),y}},catch:function(r){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===r){var s=t.completion;if(s.type==="throw"){var a=s.arg;J(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(r,e,t){return this.delegate={iterator:H(r),resultName:e,nextLoc:t},this.method==="next"&&(this.arg=p),y}},n}(c.exports);try{regeneratorRuntime=o}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}(x)),x.exports}var ee,Se;function ye(){return Se||(Se=1,ee=(c,o)=>`${c}-${o}-${Math.random().toString(16).slice(3,8)}`),ee}var re,ke;function Be(){if(ke)return re;ke=1;const c=ye();let o=0;return re=({id:n,action:f,payload:i={}})=>{let d=n;return typeof d>"u"&&(d=c("Job",o),o+=1),{id:d,action:f,payload:i}},re}var V={},Ee;function be(){if(Ee)return V;Ee=1;let c=!1;return V.logging=c,V.setLogging=o=>{c=o},V.log=(...o)=>c?console.log.apply(this,o):null,V}var te,Re;function Ke(){if(Re)return te;Re=1;const c=Be(),{log:o}=be(),n=ye();let f=0;return te=()=>{const i=n("Scheduler",f),d={},p={};let O=[];f+=1;const C=()=>O.length,G=()=>Object.keys(d).length,P=()=>{if(O.length!==0){const g=Object.keys(d);for(let w=0;w<g.length;w+=1)if(typeof p[g[w]]>"u"){O[0](d[g[w]]);break}}},k=(g,w)=>new Promise((D,y)=>{const m=c({action:g,payload:w});O.push(async E=>{O.shift(),p[E.id]=m;try{D(await E[g].apply(this,[...w,m.id]))}catch(T){y(T)}finally{delete p[E.id],P()}}),o(`[${i}]: Add ${m.id} to JobQueue`),o(`[${i}]: JobQueue length=${O.length}`),P()});return{addWorker:g=>(d[g.id]=g,o(`[${i}]: Add ${g.id}`),o(`[${i}]: Number of workers=${G()}`),P(),g.id),addJob:async(g,...w)=>{if(G()===0)throw Error(`[${i}]: You need to have at least one worker before adding jobs`);return k(g,w)},terminate:async()=>{Object.keys(d).forEach(async g=>{await d[g].terminate()}),O=[]},getQueueLen:C,getNumWorkers:G}},te}function He(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ne,Oe;function Ve(){return Oe||(Oe=1,ne=c=>{const o={};return typeof WorkerGlobalScope<"u"?o.type="webworker":typeof document=="object"?o.type="browser":typeof process=="object"&&typeof He=="function"&&(o.type="node"),typeof c>"u"?o:o[c]}),ne}var oe,Te;function Ze(){if(Te)return oe;Te=1;const o=Ve()("type")==="browser"?n=>new URL(n,window.location.href).href:n=>n;return oe=n=>{const f={...n};return["corePath","workerPath","langPath"].forEach(i=>{n[i]&&(f[i]=o(f[i]))}),f},oe}var ae,Ae;function ze(){return Ae||(Ae=1,ae={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}),ae}const Qe="tesseract.js",Xe="6.0.0",xe="Pure Javascript Multilingual OCR",er="src/index.js",rr="src/index.d.ts",tr="dist/tesseract.min.js",nr="dist/tesseract.min.js",or={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},ar={"./src/worker/node/index.js":"./src/worker/browser/index.js"},ir="",sr=["jeromewu"],cr="Apache-2.0",ur={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},lr={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^6.0.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},fr={"@rollup/pluginutils":"^5.0.2"},dr={type:"git",url:"https://github.com/naptha/tesseract.js.git"},hr={url:"https://github.com/naptha/tesseract.js/issues"},pr="https://github.com/naptha/tesseract.js",vr={type:"opencollective",url:"https://opencollective.com/tesseractjs"},gr={name:Qe,version:Xe,description:xe,main:er,types:rr,unpkg:tr,jsdelivr:nr,scripts:or,browser:ar,author:ir,contributors:sr,license:cr,devDependencies:ur,dependencies:lr,overrides:fr,repository:dr,bugs:hr,homepage:pr,collective:vr};var ie,_e;function mr(){return _e||(_e=1,ie={workerBlobURL:!0,logger:()=>{}}),ie}var se,qe;function wr(){if(qe)return se;qe=1;const c=gr.version;return se={...mr(),workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${c}/dist/worker.min.js`},se}var ce,Ne;function yr(){return Ne||(Ne=1,ce=({workerPath:c,workerBlobURL:o})=>{let n;if(Blob&&URL&&o){const f=new Blob([`importScripts("${c}");`],{type:"application/javascript"});n=new Worker(URL.createObjectURL(f))}else n=new Worker(c);return n}),ce}var ue,je;function br(){return je||(je=1,ue=c=>{c.terminate()}),ue}var le,Ie;function Lr(){return Ie||(Ie=1,le=(c,o)=>{c.onmessage=({data:n})=>{o(n)}}),le}var fe,Pe;function Sr(){return Pe||(Pe=1,fe=async(c,o)=>{c.postMessage(o)}),fe}var de,Me;function kr(){if(Me)return de;Me=1;const c=n=>new Promise((f,i)=>{const d=new FileReader;d.onload=()=>{f(d.result)},d.onerror=({target:{error:{code:p}}})=>{i(Error(`File could not be read! Code=${p}`))},d.readAsArrayBuffer(n)}),o=async n=>{let f=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?f=atob(n.split(",")[1]).split("").map(i=>i.charCodeAt(0)):f=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(f=await o(n.src)),n.tagName==="VIDEO"&&(f=await o(n.poster)),n.tagName==="CANVAS"&&await new Promise(i=>{n.toBlob(async d=>{f=await c(d),i()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const i=await n.convertToBlob();f=await c(i)}else(n instanceof File||n instanceof Blob)&&(f=await c(n));return new Uint8Array(f)};return de=o,de}var he,Ce;function Er(){if(Ce)return he;Ce=1;const c=wr(),o=yr(),n=br(),f=Lr(),i=Sr(),d=kr();return he={defaultOptions:c,spawnWorker:o,terminateWorker:n,onMessage:f,send:i,loadImage:d},he}var pe,Ge;function Fe(){if(Ge)return pe;Ge=1;const c=Ze(),o=Be(),{log:n}=be(),f=ye(),i=ze(),{defaultOptions:d,spawnWorker:p,terminateWorker:O,onMessage:C,loadImage:G,send:P}=Er();let k=0;return pe=async(M="eng",$=i.LSTM_ONLY,F={},g={})=>{const w=f("Worker",k),{logger:D,errorHandler:y,...m}=c({...d,...F}),E={},T=typeof M=="string"?M.split("+"):M;let W=$,B=g;const U=[i.DEFAULT,i.LSTM_ONLY].includes($)&&!m.legacyCore;let N,Y;const z=new Promise((u,l)=>{Y=u,N=l}),Q=u=>{N(u.message)};let j=p(m);j.onerror=Q,k+=1;const A=({id:u,action:l,payload:v})=>new Promise((_,q)=>{n(`[${w}]: Start ${u}, action=${l}`);const I=`${l}-${u}`;E[I]={resolve:_,reject:q},P(j,{workerId:w,jobId:u,action:l,payload:v})}),J=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),K=u=>A(o({id:u,action:"load",payload:{options:{lstmOnly:U,corePath:m.corePath,logging:m.logging}}})),H=(u,l,v)=>A(o({id:v,action:"FS",payload:{method:"writeFile",args:[u,l]}})),Z=(u,l)=>A(o({id:l,action:"FS",payload:{method:"readFile",args:[u,{encoding:"utf8"}]}})),r=(u,l)=>A(o({id:l,action:"FS",payload:{method:"unlink",args:[u]}})),e=(u,l,v)=>A(o({id:v,action:"FS",payload:{method:u,args:l}})),t=(u,l)=>A(o({id:l,action:"loadLanguage",payload:{langs:u,options:{langPath:m.langPath,dataPath:m.dataPath,cachePath:m.cachePath,cacheMethod:m.cacheMethod,gzip:m.gzip,lstmOnly:[i.DEFAULT,i.LSTM_ONLY].includes(W)&&!m.legacyLang}}})),s=(u,l,v,_)=>A(o({id:_,action:"initialize",payload:{langs:u,oem:l,config:v}})),a=(u="eng",l,v,_)=>{if(U&&[i.TESSERACT_ONLY,i.TESSERACT_LSTM_COMBINED].includes(l))throw Error("Legacy model requested but code missing.");const q=l||W;W=q;const I=v||B;B=I;const X=(typeof u=="string"?u.split("+"):u).filter(Ye=>!T.includes(Ye));return T.push(...X),X.length>0?t(X,_).then(()=>s(u,q,I,_)):s(u,q,I,_)},h=(u={},l)=>A(o({id:l,action:"setParameters",payload:{params:u}})),b=async(u,l={},v={text:!0},_)=>A(o({id:_,action:"recognize",payload:{image:await G(u),options:l,output:v}})),L=async(u,l)=>{if(U)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return A(o({id:l,action:"detect",payload:{image:await G(u)}}))},R=async()=>(j!==null&&(O(j),j=null),Promise.resolve());C(j,({workerId:u,jobId:l,status:v,action:_,data:q})=>{const I=`${_}-${l}`;if(v==="resolve")n(`[${u}]: Complete ${l}`),E[I].resolve({jobId:l,data:q}),delete E[I];else if(v==="reject")if(E[I].reject(q),delete E[I],_==="load"&&N(q),y)y(q);else throw Error(q);else v==="progress"&&D({...q,userJobId:l})});const S={id:w,worker:j,load:J,writeText:H,readText:Z,removeFile:r,FS:e,reinitialize:a,setParameters:h,recognize:b,detect:L,terminate:R};return K().then(()=>t(M)).then(()=>s(M,$,g)).then(()=>Y(S)).catch(()=>{}),z},pe}var ve,$e;function Rr(){if($e)return ve;$e=1;const c=Fe();return ve={recognize:async(f,i,d)=>{const p=await c(i,1,d);return p.recognize(f).finally(async()=>{await p.terminate()})},detect:async(f,i)=>{const d=await c("osd",0,i);return d.detect(f).finally(async()=>{await d.terminate()})}},ve}var ge,De;function Or(){return De||(De=1,ge={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}),ge}var me,Ue;function Tr(){return Ue||(Ue=1,me={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}),me}var we,We;function _r(){if(We)return we;We=1,Je();const c=Ke(),o=Fe(),n=Rr(),f=Or(),i=ze(),d=Tr(),{setLogging:p}=be();return we={languages:f,OEM:i,PSM:d,createScheduler:c,createWorker:o,setLogging:p,...n},we}export{_r as r};
