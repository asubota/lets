import{j as i,c as M}from"./tanstack-DlI5bxAE.js";import{c as k,Y as W,m as O,Z as q,N as L,I as X,j as Y,h as Z,$ as J,y as V,p as z,X as N,a0 as Q,a1 as U}from"./index-B3icsjdE.js";import{r as A}from"./reactColor-BcPjYmR6.js";import{d as C,B as b,I as B,$ as G,q as D,r as ee,t as te,S as se}from"./mui-C9wSwGr8.js";import{R as oe}from"./ripple-text-f84M2XtZ.js";import{e as ie}from"./notifications-B5LeRG13.js";import{V as le}from"./vendor-chip-B9TWKabr.js";import"./react-Csw2ODfV.js";import"./html2canvas-BfYXEYrK.js";import"./popper-CMBiYTiD.js";import"./House-B6CUFu5Z.js";import"./index.esm-DKDA2IWe.js";import"./Delete-4l2z2nqK.js";const re=C(i.jsx("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2m10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2m-9.83-3.25.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25"})),ne=C(i.jsx("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"})),ce=C(i.jsx("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),ae=C(i.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),pe=C(i.jsx("path",{d:"M7.5 11C9.43 11 11 9.43 11 7.5S9.43 4 7.5 4 4 5.57 4 7.5 5.57 11 7.5 11m0-5C8.33 6 9 6.67 9 7.5S8.33 9 7.5 9 6 8.33 6 7.5 6.67 6 7.5 6M4.0025 18.5832 18.59 3.9955l1.4142 1.4143L5.4167 19.9974zM16.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"})),me=C(i.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),de=C(i.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"})),fe=n=>{const e=k.c(5),{time:t}=n;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={color:"info",typography:"caption",lineHeight:0,fontSize:"10px",mr:1},e[0]=s):s=e[0];let l;e[1]!==t?(l=t?W(new Date(t)):"давно",e[1]=t,e[2]=l):l=e[2];let o;return e[3]!==l?(o=i.jsx(b,{sx:s,children:l}),e[3]=l,e[4]=o):o=e[4],o},xe=n=>{const e=k.c(12),{isFavorite:t,favoriteId:s}=n,{mutate:l}=O();let o;e[0]!==s||e[1]!==t||e[2]!==l?(o=m=>{m.stopPropagation(),l({favoriteId:s,isFavorite:!t})},e[0]=s,e[1]=t,e[2]=l,e[3]=o):o=e[3];const r=o,c=t?"warning.light":"secondary.light";let p;e[4]!==c?(p={mr:1,pb:"3px",pt:"3px",color:c},e[4]=c,e[5]=p):p=e[5];let a;e[6]!==t?(a=t?i.jsx(q,{}):i.jsx(de,{}),e[6]=t,e[7]=a):a=e[7];let d;return e[8]!==r||e[9]!==p||e[10]!==a?(d=i.jsx(B,{size:"small","data-no-export":!0,sx:p,onClick:r,children:a}),e[8]=r,e[9]=p,e[10]=a,e[11]=d):d=e[11],d},ue=n=>{const e=k.c(8),{children:t}=n,s=A.useId();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={m:0,p:0,fontSize:0,cursor:"pointer",userSelect:"none"},e[0]=l):l=e[0];let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o={display:"none"},e[1]=o):o=e[1];let r;e[2]!==s?(r=i.jsx(b,{id:s,component:"input",type:"checkbox",sx:o}),e[2]=s,e[3]=r):r=e[3];let c;return e[4]!==t||e[5]!==s||e[6]!==r?(c=i.jsxs(b,{component:"label",htmlFor:s,sx:l,onClick:he,children:[t,r]}),e[4]=t,e[5]=s,e[6]=r,e[7]=c):c=e[7],c};function he(n){return n.stopPropagation()}const ge=M(B),je=n=>{const e=k.c(8),{favoriteId:t}=n,l=!!L(t,"note")?"primary.main":"text.secondary";let o;e[0]!==l?(o={color:l,mr:"2px"},e[0]=l,e[1]=o):o=e[1];let r;e[2]!==t?(r={favoriteId:t},e[2]=t,e[3]=r):r=e[3];let c;e[4]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx(ne,{fontSize:"small"}),e[4]=c):c=e[4];let p;return e[5]!==o||e[6]!==r?(p=i.jsx(ge,{size:"small",sx:o,to:"/favorites/$favoriteId/notes",params:r,onClick:ye,children:c}),e[5]=o,e[6]=r,e[7]=p):p=e[7],p};function ye(n){return n.stopPropagation()}const Se=(n,e)=>{if(e)switch(n){case"price":return"price_old";case"price_old":return"p2";case"p2":return"-";case"-":return"price"}else switch(n){case"price":return"p2";case"p2":return"-";case"-":return"price"}return"price"},ve=n=>{const e=k.c(36),{product:t}=n,[s,l]=A.useState("price"),o=!!t.price_old&&Number(t.price_old)!==t.price;let r;e[0]!==t.price||e[1]!==t.price_old?(r=t.price_old?((1-t.price/t.price_old)*100).toFixed(0):0,e[0]=t.price,e[1]=t.price_old,e[2]=r):r=e[2];const c=r,p=t.price_old?t.price_old-t.price:0;let a;e[3]!==p||e[4]!==c||e[5]!==t.p2||e[6]!==t.price||e[7]!==t.price_old?(a=_=>{switch(_){case"price":return`${t.price} грн`;case"p2":return`${t.p2||"?"} грн`;case"price_old":return i.jsxs(i.Fragment,{children:[t.price_old," грн",i.jsxs(b,{component:"span",sx:{color:Ie,fontSize:"12px"},children:[" ","- ",c,"% = ",p," грн"]})]});case"-":return t.p2?`+${t.price-t.p2} грн`:"? грн"}},e[3]=p,e[4]=c,e[5]=t.p2,e[6]=t.price,e[7]=t.price_old,e[8]=a):a=e[8];const d=a;let m;e[9]!==o?(m=()=>{l(_=>Se(_,o))},e[9]=o,e[10]=m):m=e[10];const f=m;let x;e[11]!==s?(x={},["earn","base-price"].includes(s)&&(x["data-no-export"]=!0),e[11]=s,e[12]=x):x=e[12];let h;e[13]!==f?(h=_=>{_.stopPropagation(),f()},e[13]=f,e[14]=h):h=e[14];let u;e[15]!==d||e[16]!==s?(u=d(s),e[15]=d,e[16]=s,e[17]=u):u=e[17];let j;e[18]!==s?(j=s==="-"&&{color:"success.main",fontWeight:"bold"},e[18]=s,e[19]=j):j=e[19];let g;e[20]!==s?(g=s==="p2"&&{color:"info.main",fontStyle:"italic"},e[20]=s,e[21]=g):g=e[21];let y;e[22]!==s?(y=s==="price_old"&&{color:"secondary.light"},e[22]=s,e[23]=y):y=e[23];let S;e[24]!==o?(S=o&&{borderColor:"primary.main"},e[24]=o,e[25]=S):S=e[25];let v;e[26]!==j||e[27]!==g||e[28]!==y||e[29]!==S?(v={borderWidth:"2px",borderColor:"secondary.main",...j,...g,...y,...S},e[26]=j,e[27]=g,e[28]=y,e[29]=S,e[30]=v):v=e[30];let I;return e[31]!==x||e[32]!==v||e[33]!==h||e[34]!==u?(I=i.jsx(G,{onClick:h,label:u,size:"small",variant:"outlined",sx:v,...x}),e[31]=x,e[32]=v,e[33]=h,e[34]=u,e[35]=I):I=e[35],I};function Ie(n){return n.palette.mode==="dark"?"white":"black"}const R={maxWidth:"122px","& input":{pt:"4px",pb:"4px",height:"20px",color:"primary.main",fontSize:"14px",textAlign:"end"}},E=n=>({type:"tel",startAdornment:i.jsx(ee,{sx:{"& p":{fontSize:"12px",color:"text.dark"}},position:"start",children:n})}),_e=n=>{const e=k.c(30),{favoriteId:t}=n,s=L(t,"min"),l=L(t,"max"),{mutate:o}=X();let r;e[0]!==t||e[1]!==o?(r=()=>o({favoriteId:t,min:"",max:""}),e[0]=t,e[1]=o,e[2]=r):r=e[2];const c=r,p=`${s}-min-key`,a=`${l}-max-key`;let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d={gridArea:"meta",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px",mb:"2px"},e[3]=d):d=e[3];let m;e[4]!==c||e[5]!==l||e[6]!==s?(m=(s||l)&&i.jsx(B,{size:"small",sx:{pt:"2px",pb:"2px",color:"text.secondary"},onClick:c,children:i.jsx(ce,{fontSize:"small"})}),e[4]=c,e[5]=l,e[6]=s,e[7]=m):m=e[7];let f;e[8]!==t||e[9]!==s||e[10]!==o?(f=S=>{const v=S.target.value.replace(/\D/g,"");v!==(s||"").toString()&&o({favoriteId:t,min:v})},e[8]=t,e[9]=s,e[10]=o,e[11]=f):f=e[11];let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x={input:E("менш ніж")},e[12]=x):x=e[12];let h;e[13]!==s||e[14]!==p||e[15]!==f?(h=i.jsx(D,{size:"small",defaultValue:s,onBlur:f,sx:R,slotProps:x},p),e[13]=s,e[14]=p,e[15]=f,e[16]=h):h=e[16];let u;e[17]!==t||e[18]!==l||e[19]!==o?(u=S=>{var I;S.target.value.replace(/\D/g,"")!==((I=l||"")==null?void 0:I.toString())&&o({favoriteId:t,max:S.target.value.replace(/\D/g,"")})},e[17]=t,e[18]=l,e[19]=o,e[20]=u):u=e[20];let j;e[21]===Symbol.for("react.memo_cache_sentinel")?(j={input:E("більш ніж")},e[21]=j):j=e[21];let g;e[22]!==l||e[23]!==a||e[24]!==u?(g=i.jsx(D,{size:"small",defaultValue:l,onBlur:u,sx:R,slotProps:j},a),e[22]=l,e[23]=a,e[24]=u,e[25]=g):g=e[25];let y;return e[26]!==m||e[27]!==h||e[28]!==g?(y=i.jsxs(b,{sx:d,children:[m,h,g]}),e[26]=m,e[27]=h,e[28]=g,e[29]=y):y=e[29],y},ke=()=>{const n=k.c(2),e=Y();let t;return n[0]!==e?(t=e.map(be),n[0]=e,n[1]=t):t=n[1],t};function be(n){return n.itemId}const ze=n=>{const e=k.c(12),{itemId:t,name:s}=n,l=ke(),{mutate:o}=Z();let r;e[0]!==t||e[1]!==o||e[2]!==s?(r=()=>{o({itemId:t,action:"add"},{onSuccess(){J.success(`${s} додано в корзину!`,{position:"bottom-center",hideProgressBar:!0,icon:!1,theme:"colored"})}})},e[0]=t,e[1]=o,e[2]=s,e[3]=r):r=e[3];const c=r,p=l.includes(t)?"primary.main":"secondary.main";let a;e[4]!==p?(a={ml:"auto",color:p},e[4]=p,e[5]=a):a=e[5];let d;e[6]!==c?(d=()=>c(),e[6]=c,e[7]=d):d=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx(re,{sx:{fontSize:"14px"}}),e[8]=m):m=e[8];let f;return e[9]!==a||e[10]!==d?(f=i.jsx(B,{"data-no-export":!0,sx:a,onClick:d,children:m}),e[9]=a,e[10]=d,e[11]=f):f=e[11],f},Ce=M(B),$e=M(ae),Fe=n=>{const e=k.c(50),{p:t,search:s,isFavorite:l,isFavoritePage:o,isChanged:r}=n,[c,p]=A.useState(!1);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=K=>{K.stopPropagation(),p(Pe)},e[0]=a):a=e[0];const d=a;let m;e[1]!==t?(m="missed"in t&&t.missed&&{backgroundColor:"#ea2b060f"},e[1]=t,e[2]=m):m=e[2];let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f={borderColor:"text.secondary"},e[3]=f):f=e[3];let x;e[4]!==m?(x={...m,p:1,pb:"2px",position:"relative",display:"grid",rowGap:"12px",columnGap:"4px","&:has(input:checked)":f,gridTemplateColumns:"1fr",gridTemplateRows:"auto auto auto",gridTemplateAreas:` 
        "name"
        "sku"
        "meta"
      `},e[4]=m,e[5]=x):x=e[5];let h;e[6]!==r||e[7]!==l?(h=l&&i.jsx(B,{size:"small",sx:{color:"secondary.main",position:"absolute",top:"0",right:"0",zIndex:10},"data-no-export":!0,onClick:d,children:i.jsx(me,{sx:{color:r?"primary.dark":"text.secondary"},fontSize:"small"})}),e[6]=r,e[7]=l,e[8]=h):h=e[8];let u;e[9]===Symbol.for("react.memo_cache_sentinel")?(u={gridArea:"name",textAlign:"left",wordBreak:"break-word"},e[9]=u):u=e[9];let j;e[10]!==t.name?(j=()=>N(t.name),e[10]=t.name,e[11]=j):j=e[11];let g;e[12]!==t.name||e[13]!==s?(g=V(t.name,s),e[12]=t.name,e[13]=s,e[14]=g):g=e[14];let y;e[15]!==g?(y=i.jsx(oe,{text:g}),e[15]=g,e[16]=y):y=e[16];let S;e[17]!==j||e[18]!==y?(S=i.jsx(b,{sx:u,onClick:j,children:y}),e[17]=j,e[18]=y,e[19]=S):S=e[19];let v;e[20]===Symbol.for("react.memo_cache_sentinel")?(v={gridArea:"sku",justifySelf:"flex-start",display:"flex",alignItems:"center",width:"100%"},e[20]=v):v=e[20];let I;e[21]!==t.sku||e[22]!==s?(I=V(t.sku,s),e[21]=t.sku,e[22]=s,e[23]=I):I=e[23];let _;e[24]!==t.sku?(_=()=>N(t.sku),e[24]=t.sku,e[25]=_):_=e[25];let $;e[26]!==I||e[27]!==_?($=i.jsx(G,{label:I,size:"small",onClick:_}),e[26]=I,e[27]=_,e[28]=$):$=e[28];let F;e[29]!==o||e[30]!==t?(F=!o&&i.jsxs(i.Fragment,{children:[i.jsx(Ce,{to:"/list/$id/percents",params:{id:z(t)},"data-no-export":!0,children:i.jsx(pe,{sx:{fontSize:"small"}})}),i.jsx(ze,{itemId:z(t),name:t.name})]}),e[29]=o,e[30]=t,e[31]=F):F=e[31];let P;e[32]!==$||e[33]!==F?(P=i.jsxs(b,{sx:v,children:[$,F]}),e[32]=$,e[33]=F,e[34]=P):P=e[34];let T;e[35]!==t||e[36]!==c?(T=c&&i.jsx(_e,{favoriteId:z(t)}),e[35]=t,e[36]=c,e[37]=T):T=e[37];let w;e[38]!==l||e[39]!==o||e[40]!==t||e[41]!==c?(w=!c&&i.jsxs(b,{sx:{gridArea:"meta",display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"8px"},children:[i.jsx(ve,{product:t}),i.jsx(le,{vendor:t.vendor}),t.pics&&i.jsx($e,{to:o?"/favorites/$id/details":"/list/$id/details",params:{id:z(t)},sx:{color:"secondary",fontSize:"small",cursor:"pointer"},"data-no-export":!0}),i.jsxs(b,{sx:{ml:"auto",display:"flex",alignItems:"center"},children:[l&&"time"in t&&i.jsx(fe,{time:t.time}),o&&i.jsx(je,{favoriteId:z(t)}),i.jsx(xe,{isFavorite:l,favoriteId:z(t)}),i.jsx(ue,{children:i.jsx(ie,{stock:t.stock,bordered:!0})})]})]}),e[38]=l,e[39]=o,e[40]=t,e[41]=c,e[42]=w):w=e[42];let H;return e[43]!==S||e[44]!==P||e[45]!==T||e[46]!==w||e[47]!==x||e[48]!==h?(H=i.jsxs(te,{className:"product-tile",variant:"outlined",sx:x,children:[h,S,P,T,w]}),e[43]=S,e[44]=P,e[45]=T,e[46]=w,e[47]=x,e[48]=h,e[49]=H):H=e[49],H};function Pe(n){return!n}const We=n=>{const e=k.c(16),{list:t,search:s,isFavoritePage:l}=n,o=l===void 0?!1:l,r=Q(),c=U();let p,a,d,m,f;if(e[0]!==c||e[1]!==r||e[2]!==o||e[3]!==t||e[4]!==s){const h=c.map(Te);p=se,a="column",d=1,m="tiles-view",f=t.map(u=>{const j=z(u),g=`${j}:${u.price}`;return i.jsx(Fe,{p:u,search:s,isFavorite:r.includes(j),isChanged:h.includes(u.sku),isFavoritePage:o},g)}),e[0]=c,e[1]=r,e[2]=o,e[3]=t,e[4]=s,e[5]=p,e[6]=a,e[7]=d,e[8]=m,e[9]=f}else p=e[5],a=e[6],d=e[7],m=e[8],f=e[9];let x;return e[10]!==p||e[11]!==a||e[12]!==d||e[13]!==m||e[14]!==f?(x=i.jsx(p,{direction:a,spacing:d,id:m,children:f}),e[10]=p,e[11]=a,e[12]=d,e[13]=m,e[14]=f,e[15]=x):x=e[15],x};function Te(n){return n.sku}export{We as default};
