import{c as xe}from"./index-eRxboswl.js";import{i as se,j as f,B as $,P as _e,I as Re,a as fe,A as Ae,b as $e}from"./mui-C7jVnYTO.js";import{r as N}from"./react-C9_qfvjK.js";import{r as ie}from"./createSvgIcon-DC2NCxUz.js";import{L as ye}from"./link-ChO8H-3I.js";var ae={},Te=se;Object.defineProperty(ae,"__esModule",{value:!0});var be=ae.default=void 0,Ie=Te(ie()),he=f;be=ae.default=(0,Ie.default)([(0,he.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,he.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt");var ce={},Pe=se;Object.defineProperty(ce,"__esModule",{value:!0});var Se=ce.default=void 0,Ce=Pe(ie()),Me=f;Se=ce.default=(0,Ce.default)((0,Me.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");const ne=140,X=32;var Ne={exports:{}};(function(e){var i=function(a){var l=Object.prototype,b=l.hasOwnProperty,O=Object.defineProperty||function(n,t,o){n[t]=o.value},h,m=typeof Symbol=="function"?Symbol:{},L=m.iterator||"@@iterator",_=m.asyncIterator||"@@asyncIterator",j=m.toStringTag||"@@toStringTag";function u(n,t,o){return Object.defineProperty(n,t,{value:o,enumerable:!0,configurable:!0,writable:!0}),n[t]}try{u({},"")}catch{u=function(t,o,c){return t[o]=c}}function x(n,t,o,c){var r=t&&t.prototype instanceof W?t:W,s=Object.create(r.prototype),d=new K(c||[]);return O(s,"_invoke",{value:ee(n,o,d)}),s}a.wrap=x;function R(n,t,o){try{return{type:"normal",arg:n.call(t,o)}}catch(c){return{type:"throw",arg:c}}}var T="suspendedStart",E="suspendedYield",S="executing",w="completed",v={};function W(){}function D(){}function k(){}var H={};u(H,L,function(){return this});var Y=Object.getPrototypeOf,B=Y&&Y(Y(J([])));B&&B!==l&&b.call(B,L)&&(H=B);var C=k.prototype=W.prototype=Object.create(H);D.prototype=k,O(C,"constructor",{value:k,configurable:!0}),O(k,"constructor",{value:D,configurable:!0}),D.displayName=u(k,j,"GeneratorFunction");function V(n){["next","throw","return"].forEach(function(t){u(n,t,function(o){return this._invoke(t,o)})})}a.isGeneratorFunction=function(n){var t=typeof n=="function"&&n.constructor;return t?t===D||(t.displayName||t.name)==="GeneratorFunction":!1},a.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,k):(n.__proto__=k,u(n,j,"GeneratorFunction")),n.prototype=Object.create(C),n},a.awrap=function(n){return{__await:n}};function U(n,t){function o(s,d,p,g){var y=R(n[s],n,d);if(y.type==="throw")g(y.arg);else{var M=y.arg,I=M.value;return I&&typeof I=="object"&&b.call(I,"__await")?t.resolve(I.__await).then(function(P){o("next",P,p,g)},function(P){o("throw",P,p,g)}):t.resolve(I).then(function(P){M.value=P,p(M)},function(P){return o("throw",P,p,g)})}}var c;function r(s,d){function p(){return new t(function(g,y){o(s,d,g,y)})}return c=c?c.then(p,p):p()}O(this,"_invoke",{value:r})}V(U.prototype),u(U.prototype,_,function(){return this}),a.AsyncIterator=U,a.async=function(n,t,o,c,r){r===void 0&&(r=Promise);var s=new U(x(n,t,o,c),r);return a.isGeneratorFunction(t)?s:s.next().then(function(d){return d.done?d.value:s.next()})};function ee(n,t,o){var c=T;return function(s,d){if(c===S)throw new Error("Generator is already running");if(c===w){if(s==="throw")throw d;return Z()}for(o.method=s,o.arg=d;;){var p=o.delegate;if(p){var g=q(p,o);if(g){if(g===v)continue;return g}}if(o.method==="next")o.sent=o._sent=o.arg;else if(o.method==="throw"){if(c===T)throw c=w,o.arg;o.dispatchException(o.arg)}else o.method==="return"&&o.abrupt("return",o.arg);c=S;var y=R(n,t,o);if(y.type==="normal"){if(c=o.done?w:E,y.arg===v)continue;return{value:y.arg,done:o.done}}else y.type==="throw"&&(c=w,o.method="throw",o.arg=y.arg)}}}function q(n,t){var o=t.method,c=n.iterator[o];if(c===h)return t.delegate=null,o==="throw"&&n.iterator.return&&(t.method="return",t.arg=h,q(n,t),t.method==="throw")||o!=="return"&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var r=R(c,n.iterator,t.arg);if(r.type==="throw")return t.method="throw",t.arg=r.arg,t.delegate=null,v;var s=r.arg;if(!s)return t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v;if(s.done)t[n.resultName]=s.value,t.next=n.nextLoc,t.method!=="return"&&(t.method="next",t.arg=h);else return s;return t.delegate=null,v}V(C),u(C,j,"Generator"),u(C,L,function(){return this}),u(C,"toString",function(){return"[object Generator]"});function te(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function z(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function K(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(te,this),this.reset(!0)}a.keys=function(n){var t=Object(n),o=[];for(var c in t)o.push(c);return o.reverse(),function r(){for(;o.length;){var s=o.pop();if(s in t)return r.value=s,r.done=!1,r}return r.done=!0,r}};function J(n){if(n){var t=n[L];if(t)return t.call(n);if(typeof n.next=="function")return n;if(!isNaN(n.length)){var o=-1,c=function r(){for(;++o<n.length;)if(b.call(n,o))return r.value=n[o],r.done=!1,r;return r.value=h,r.done=!0,r};return c.next=c}}return{next:Z}}a.values=J;function Z(){return{value:h,done:!0}}return K.prototype={constructor:K,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(z),!n)for(var t in this)t.charAt(0)==="t"&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=h)},stop:function(){this.done=!0;var n=this.tryEntries[0],t=n.completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function o(g,y){return s.type="throw",s.arg=n,t.next=g,y&&(t.method="next",t.arg=h),!!y}for(var c=this.tryEntries.length-1;c>=0;--c){var r=this.tryEntries[c],s=r.completion;if(r.tryLoc==="root")return o("end");if(r.tryLoc<=this.prev){var d=b.call(r,"catchLoc"),p=b.call(r,"finallyLoc");if(d&&p){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(d){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else if(p){if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(n,t){for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o];if(c.tryLoc<=this.prev&&b.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var r=c;break}}r&&(n==="break"||n==="continue")&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=n,s.arg=t,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(s)},complete:function(n,t){if(n.type==="throw")throw n.arg;return n.type==="break"||n.type==="continue"?this.next=n.arg:n.type==="return"?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):n.type==="normal"&&t&&(this.next=t),v},finish:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.finallyLoc===n)return this.complete(o.completion,o.afterLoc),z(o),v}},catch:function(n){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc===n){var c=o.completion;if(c.type==="throw"){var r=c.arg;z(o)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(n,t,o){return this.delegate={iterator:J(n),resultName:t,nextLoc:o},this.method==="next"&&(this.arg=h),v}},a}(e.exports);try{regeneratorRuntime=i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}})(Ne);var le=(e,i)=>`${e}-${i}-${Math.random().toString(16).slice(3,8)}`;const De=le;let pe=0;var Le=({id:e,action:i,payload:a={}})=>{let l=e;return typeof l>"u"&&(l=De("Job",pe),pe+=1),{id:l,action:i,payload:a}},F={};let ue=!1;F.logging=ue;F.setLogging=e=>{ue=e};F.log=(...e)=>ue?console.log.apply(void 0,e):null;const ze=Le,{log:Q}=F,Ge=le;let ge=0;var We=()=>{const e=Ge("Scheduler",ge),i={},a={};let l=[];ge+=1;const b=()=>l.length,O=()=>Object.keys(i).length,h=()=>{if(l.length!==0){const u=Object.keys(i);for(let x=0;x<u.length;x+=1)if(typeof a[u[x]]>"u"){l[0](i[u[x]]);break}}},m=(u,x)=>new Promise((R,T)=>{const E=ze({action:u,payload:x});l.push(async S=>{l.shift(),a[S.id]=E;try{R(await S[u].apply(void 0,[...x,E.id]))}catch(w){T(w)}finally{delete a[S.id],h()}}),Q(`[${e}]: Add ${E.id} to JobQueue`),Q(`[${e}]: JobQueue length=${l.length}`),h()});return{addWorker:u=>(i[u.id]=u,Q(`[${e}]: Add ${u.id}`),Q(`[${e}]: Number of workers=${O()}`),h(),u.id),addJob:async(u,...x)=>{if(O()===0)throw Error(`[${e}]: You need to have at least one worker before adding jobs`);return m(u,x)},terminate:async()=>{Object.keys(i).forEach(async u=>{await i[u].terminate()}),l=[]},getQueueLen:b,getNumWorkers:O}};function Be(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function Ue(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var Fe=Ue;const He=Fe;var Ye=e=>{const i={};return typeof WorkerGlobalScope<"u"?i.type="webworker":He()?i.type="electron":typeof document=="object"?i.type="browser":typeof process=="object"&&typeof Be=="function"&&(i.type="node"),typeof e>"u"?i:i[e]};const qe=Ye("type")==="browser",Ke=qe?e=>new URL(e,window.location.href).href:e=>e;var Je=e=>{const i={...e};return["corePath","workerPath","langPath"].forEach(a=>{e[a]&&(i[a]=Ke(i[a]))}),i},Ve=e=>{const i=[],a=[],l=[],b=[],O=[];return e.blocks&&e.blocks.forEach(h=>{h.paragraphs.forEach(m=>{m.lines.forEach(L=>{L.words.forEach(_=>{_.symbols.forEach(j=>{O.push({...j,page:e,block:h,paragraph:m,line:L,word:_})}),b.push({..._,page:e,block:h,paragraph:m,line:L})}),l.push({...L,page:e,block:h,paragraph:m})}),a.push({...m,page:e,block:h})}),i.push({...h,page:e})}),{...e,blocks:i,paragraphs:a,lines:l,words:b,symbols:O}},je={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const Ze="tesseract.js",Qe="5.1.0",Xe="Pure Javascript Multilingual OCR",et="src/index.js",tt="src/index.d.ts",rt="dist/tesseract.min.js",nt="dist/tesseract.min.js",ot={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},st={"./src/worker/node/index.js":"./src/worker/browser/index.js"},it="",at=["jeromewu"],ct="Apache-2.0",lt={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},ut={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.0","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},dt={"@rollup/pluginutils":"^5.0.2"},ft={type:"git",url:"https://github.com/naptha/tesseract.js.git"},ht={url:"https://github.com/naptha/tesseract.js/issues"},pt="https://github.com/naptha/tesseract.js",gt={type:"opencollective",url:"https://opencollective.com/tesseractjs"},vt={name:Ze,version:Qe,description:Xe,main:et,types:tt,unpkg:rt,jsdelivr:nt,scripts:ot,browser:st,author:it,contributors:at,license:ct,devDependencies:lt,dependencies:ut,overrides:dt,repository:ft,bugs:ht,homepage:pt,collective:gt};var mt={workerBlobURL:!0,logger:()=>{}};const wt=vt.version,yt=mt;var bt={...yt,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${wt}/dist/worker.min.js`},St=({workerPath:e,workerBlobURL:i})=>{let a;if(Blob&&URL&&i){const l=new Blob([`importScripts("${e}");`],{type:"application/javascript"});a=new Worker(URL.createObjectURL(l))}else a=new Worker(e);return a},Lt=e=>{e.terminate()},jt=(e,i)=>{e.onmessage=({data:a})=>{i(a)}},Et=async(e,i)=>{e.postMessage(i)};const re=e=>new Promise((i,a)=>{const l=new FileReader;l.onload=()=>{i(l.result)},l.onerror=({target:{error:{code:b}}})=>{a(Error(`File could not be read! Code=${b}`))},l.readAsArrayBuffer(e)}),oe=async e=>{let i=e;if(typeof e>"u")return"undefined";if(typeof e=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(e)?i=atob(e.split(",")[1]).split("").map(a=>a.charCodeAt(0)):i=await(await fetch(e)).arrayBuffer();else if(typeof HTMLElement<"u"&&e instanceof HTMLElement)e.tagName==="IMG"&&(i=await oe(e.src)),e.tagName==="VIDEO"&&(i=await oe(e.poster)),e.tagName==="CANVAS"&&await new Promise(a=>{e.toBlob(async l=>{i=await re(l),a()})});else if(typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas){const a=await e.convertToBlob();i=await re(a)}else(e instanceof File||e instanceof Blob)&&(i=await re(e));return new Uint8Array(i)};var kt=oe;const Ot=bt,xt=St,_t=Lt,Rt=jt,At=Et,$t=kt;var Tt={defaultOptions:Ot,spawnWorker:xt,terminateWorker:_t,onMessage:Rt,send:At,loadImage:$t};const It=Je,Pt=Ve,A=Le,{log:ve}=F,Ct=le,G=je,{defaultOptions:Mt,spawnWorker:Nt,terminateWorker:Dt,onMessage:zt,loadImage:me,send:Gt}=Tt;let we=0;var Ee=async(e="eng",i=G.LSTM_ONLY,a={},l={})=>{const b=Ct("Worker",we),{logger:O,errorHandler:h,...m}=It({...Mt,...a}),L={},_={},j=typeof e=="string"?e.split("+"):e;let u=i,x=l;const R=[G.DEFAULT,G.LSTM_ONLY].includes(i)&&!m.legacyCore;let T,E;const S=new Promise((r,s)=>{E=r,T=s}),w=r=>{T(r.message)};let v=Nt(m);v.onerror=w,we+=1;const W=(r,s)=>{L[r]=s},D=(r,s)=>{_[r]=s},k=({id:r,action:s,payload:d})=>new Promise((p,g)=>{ve(`[${b}]: Start ${r}, action=${s}`);const y=`${s}-${r}`;W(y,p),D(y,g),Gt(v,{workerId:b,jobId:r,action:s,payload:d})}),H=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),Y=r=>k(A({id:r,action:"load",payload:{options:{lstmOnly:R,corePath:m.corePath,logging:m.logging}}})),B=(r,s,d)=>k(A({id:d,action:"FS",payload:{method:"writeFile",args:[r,s]}})),C=(r,s)=>k(A({id:s,action:"FS",payload:{method:"readFile",args:[r,{encoding:"utf8"}]}})),V=(r,s)=>k(A({id:s,action:"FS",payload:{method:"unlink",args:[r]}})),U=(r,s,d)=>k(A({id:d,action:"FS",payload:{method:r,args:s}})),ee=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),q=(r,s)=>k(A({id:s,action:"loadLanguage",payload:{langs:r,options:{langPath:m.langPath,dataPath:m.dataPath,cachePath:m.cachePath,cacheMethod:m.cacheMethod,gzip:m.gzip,lstmOnly:[G.LSTM_ONLY,G.TESSERACT_LSTM_COMBINED].includes(u)&&!m.legacyLang}}})),te=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),z=(r,s,d,p)=>k(A({id:p,action:"initialize",payload:{langs:r,oem:s,config:d}})),K=(r="eng",s,d,p)=>{if(R&&[G.TESSERACT_ONLY,G.TESSERACT_LSTM_COMBINED].includes(s))throw Error("Legacy model requested but code missing.");const g=s||u;u=g;const y=d||x;x=y;const I=(typeof r=="string"?r.split("+"):r).filter(P=>!j.includes(P));return j.push(...I),I.length>0?q(I,p).then(()=>z(r,g,y,p)):z(r,g,y,p)},J=(r={},s)=>k(A({id:s,action:"setParameters",payload:{params:r}})),Z=async(r,s={},d={blocks:!0,text:!0,hocr:!0,tsv:!0},p)=>k(A({id:p,action:"recognize",payload:{image:await me(r),options:s,output:d}})),n=(r="Tesseract OCR Result",s=!1,d)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),k(A({id:d,action:"getPDF",payload:{title:r,textonly:s}}))),t=async(r,s)=>{if(R)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return k(A({id:s,action:"detect",payload:{image:await me(r)}}))},o=async()=>(v!==null&&(Dt(v),v=null),Promise.resolve());zt(v,({workerId:r,jobId:s,status:d,action:p,data:g})=>{const y=`${p}-${s}`;if(d==="resolve"){ve(`[${r}]: Complete ${s}`);let M=g;p==="recognize"?M=Pt(g):p==="getPDF"&&(M=Array.from({...g,length:Object.keys(g).length})),L[y]({jobId:s,data:M})}else if(d==="reject")if(_[y](g),p==="load"&&T(g),h)h(g);else throw Error(g);else d==="progress"&&O({...g,userJobId:s})});const c={id:b,worker:v,setResolve:W,setReject:D,load:H,writeText:B,readText:C,removeFile:V,FS:U,loadLanguage:ee,initialize:te,reinitialize:K,setParameters:J,recognize:Z,getPDF:n,detect:t,terminate:o};return Y().then(()=>q(e)).then(()=>z(e,i,l)).then(()=>E(c)).catch(()=>{}),S};const ke=Ee,Wt=async(e,i,a)=>{const l=await ke(i,1,a);return l.recognize(e).finally(async()=>{await l.terminate()})},Bt=async(e,i)=>{const a=await ke("osd",0,i);return a.detect(e).finally(async()=>{await a.terminate()})};var Ut={recognize:Wt,detect:Bt},Ft={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},Ht={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const Yt=We,qt=Ee,Kt=Ut,Jt=Ft,Vt=je,Zt=Ht,{setLogging:Qt}=F;var Xt={languages:Jt,OEM:Vt,PSM:Zt,createScheduler:Yt,createWorker:qt,setLogging:Qt,...Kt};const er=async()=>await Xt.createWorker(["ukr","eng"],1),tr=async()=>{try{return await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}})}catch{return await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}})}},rr=e=>{const i=e.videoWidth,a=e.videoHeight,l=e.clientWidth,b=e.clientHeight,O=l/i,h=b/a,m=ne*O,L=X*h,_=(l-ne)/2,j=(b-X)/2-120;return{x:_,y:j,width:m,height:L}},nr=({cropArea:e,output:i})=>f.jsx($,{sx:{position:"absolute",left:e.x,top:e.y+X+30,zIndex:1,minWidth:e.width},children:f.jsx(_e,{sx:{pl:"4px",pr:"4px"},children:i})}),or=({cropArea:e})=>f.jsxs($,{width:"100%",height:"100%",component:"svg",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},children:[f.jsx("defs",{children:f.jsxs("mask",{id:"mask",children:[f.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),f.jsx("rect",{x:e.x,y:e.y,width:e.width,height:e.height,fill:"black"})]})}),f.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",mask:"url(#mask)",fill:"rgba(0, 0, 0, 0.5)"})]}),sr=({cropArea:e})=>f.jsx($,{sx:{position:"absolute",border:"1px solid",borderColor:"primary.main",boxSizing:"border-box",pointerEvents:"none",left:e.x,top:e.y,width:e.width,height:e.height}});var de={},ir=se;Object.defineProperty(de,"__esModule",{value:!0});var Oe=de.default=void 0,ar=ir(ie()),cr=f;Oe=de.default=(0,ar.default)((0,cr.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack");const lr=()=>f.jsx(Re,{component:ye,to:"/",sx:{zIndex:1,position:"absolute",top:"15px",left:"15px",color:"primary.main"},children:f.jsx(Oe,{})}),ur=()=>{const[e,i]=N.useState(!1),[a,l]=N.useState(""),[b,O]=N.useState(!1),[h,m]=N.useState(null),L=N.useRef(null),_=N.useRef(null),[j,u]=N.useState({x:0,y:0,width:ne,height:X});N.useEffect(()=>{const S=(async()=>{try{const w=await tr(),v=L.current;return v&&(v.srcObject=w,v.onloadedmetadata=()=>{v.play(),u(rr(v)),i(!0)}),w}catch(w){console.error("Error accessing webcam: ",w),m(w==null?void 0:w.toString())}})();return()=>{S.then(w=>{w&&w.getTracks().forEach(v=>v.stop())})}},[]);const x=()=>{const E=_.current,S=L.current;if(E&&S){const w=E.getContext("2d");E.width=S.videoWidth,E.height=S.videoHeight,w&&(w.drawImage(S,0,0,E.width,E.height),R(E.toDataURL("image/jpeg")))}},R=async E=>{O(!0);try{const S=await er(),{data:{text:w}}=await S.recognize(E,{rectangle:{top:j.y,left:j.x,width:j.width,height:j.height}});l(w.trim()),await S.terminate()}catch(S){console.log("## e",S)}O(!1)},T=f.jsxs($,{sx:{position:"absolute",bottom:"80px",left:"50%",transform:"translateX(-50%)",zIndex:1,display:"flex",gap:"20px"},children:[f.jsx(fe,{variant:"contained",onClick:x,disabled:b,children:f.jsx(be,{})}),f.jsx(fe,{component:ye,to:"/",search:a.length?{s:a}:{},variant:"contained",children:f.jsx(Se,{})})]});return f.jsxs($,{sx:{overflow:"hidden",position:"relative"},children:[!!h&&f.jsx($,{sx:{p:3,position:"absolute",top:"200px"},children:f.jsx(Ae,{severity:"error",children:h.toString()})}),!e&&f.jsx($,{sx:{position:"absolute",top:"0",height:"150px",width:"100%",display:"flex",alignItems:"flex-end",justifyContent:"center"},children:f.jsx($e,{sx:{color:"primary.main"}})}),f.jsx(lr,{}),e&&T,f.jsx($,{sx:{display:"flex",justifyContent:"center"},children:f.jsxs($,{sx:{position:"relative"},children:[e&&f.jsx(nr,{cropArea:j,output:a}),e&&f.jsx(or,{cropArea:j}),e&&f.jsx(sr,{cropArea:j}),f.jsx($,{component:"video",ref:L,playsInline:!0,muted:!0,sx:{visibility:e?"visible":"hidden"}})]})}),f.jsx($,{component:"canvas",ref:_,sx:{display:"none"}})]})},vr=xe("/scanner")({component:ur});export{vr as Route};
