import{j as l,c as M}from"./tanstack-xf-zT_El.js";import{c as k,O as L,J as O,q as W,Y as q,Z as J,f as X,k as Y,$ as Z,E as V,n as z,X as N,a0 as Q,a1 as U}from"./index-DSBiiUhE.js";import{r as A}from"./reactColor-BcPjYmR6.js";import{R as ee}from"./ripple-text-BJBtz99F.js";import{d as C,$ as G,B as b,I as B,v as D,w as te,x as se,S as oe}from"./mui-dv1jgofF.js";import{V as le}from"./vendor-chip-DM4k7yeU.js";import{S as ie}from"./stock-YG8eGv_j.js";import"./react-Csw2ODfV.js";import"./html2canvas-BfYXEYrK.js";import"./popper-CMBiYTiD.js";const ne=C(l.jsx("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2m10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2m-9.83-3.25.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25"})),re=C(l.jsx("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"})),ce=C(l.jsx("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),ae=C(l.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),pe=C(l.jsx("path",{d:"M7.5 11C9.43 11 11 9.43 11 7.5S9.43 4 7.5 4 4 5.57 4 7.5 5.57 11 7.5 11m0-5C8.33 6 9 6.67 9 7.5S8.33 9 7.5 9 6 8.33 6 7.5 6.67 6 7.5 6M4.0025 18.5832 18.59 3.9955l1.4142 1.4143L5.4167 19.9974zM16.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"})),me=C(l.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),de=C(l.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"})),fe=(r,e)=>{if(e)switch(r){case"price":return"price_old";case"price_old":return"p2";case"p2":return"-";case"-":return"price"}else switch(r){case"price":return"p2";case"p2":return"-";case"-":return"price"}return"price"},xe=r=>{const e=k.c(36),{product:t}=r,[s,i]=A.useState("price"),o=!!t.price_old&&Number(t.price_old)!==t.price;let n;e[0]!==t.price||e[1]!==t.price_old?(n=t.price_old?((1-t.price/t.price_old)*100).toFixed(0):0,e[0]=t.price,e[1]=t.price_old,e[2]=n):n=e[2];const c=n,p=t.price_old?t.price_old-t.price:0;let a;e[3]!==p||e[4]!==c||e[5]!==t.p2||e[6]!==t.price||e[7]!==t.price_old?(a=_=>{switch(_){case"price":return`${t.price} грн`;case"p2":return`${t.p2||"?"} грн`;case"price_old":return l.jsxs(l.Fragment,{children:[t.price_old," грн",l.jsxs(b,{component:"span",sx:{color:ue,fontSize:"12px"},children:[" ","- ",c,"% = ",p," грн"]})]});case"-":return t.p2?`+${t.price-t.p2} грн`:"? грн"}},e[3]=p,e[4]=c,e[5]=t.p2,e[6]=t.price,e[7]=t.price_old,e[8]=a):a=e[8];const d=a;let m;e[9]!==o?(m=()=>{i(_=>fe(_,o))},e[9]=o,e[10]=m):m=e[10];const f=m;let x;e[11]!==s?(x={},["earn","base-price"].includes(s)&&(x["data-no-export"]=!0),e[11]=s,e[12]=x):x=e[12];let h;e[13]!==f?(h=_=>{_.stopPropagation(),f()},e[13]=f,e[14]=h):h=e[14];let u;e[15]!==d||e[16]!==s?(u=d(s),e[15]=d,e[16]=s,e[17]=u):u=e[17];let j;e[18]!==s?(j=s==="-"&&{color:"success.main",fontWeight:"bold"},e[18]=s,e[19]=j):j=e[19];let g;e[20]!==s?(g=s==="p2"&&{color:"info.main",fontStyle:"italic"},e[20]=s,e[21]=g):g=e[21];let y;e[22]!==s?(y=s==="price_old"&&{color:"secondary.light"},e[22]=s,e[23]=y):y=e[23];let S;e[24]!==o?(S=o&&{borderColor:"primary.main"},e[24]=o,e[25]=S):S=e[25];let v;e[26]!==j||e[27]!==g||e[28]!==y||e[29]!==S?(v={borderWidth:"2px",borderColor:"secondary.main",...j,...g,...y,...S},e[26]=j,e[27]=g,e[28]=y,e[29]=S,e[30]=v):v=e[30];let I;return e[31]!==x||e[32]!==v||e[33]!==h||e[34]!==u?(I=l.jsx(G,{onClick:h,label:u,size:"small",variant:"outlined",sx:v,...x}),e[31]=x,e[32]=v,e[33]=h,e[34]=u,e[35]=I):I=e[35],I};function ue(r){return r.palette.mode==="dark"?"white":"black"}const he=r=>{const e=k.c(8),{children:t}=r,s=A.useId();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={m:0,p:0,fontSize:0,cursor:"pointer",userSelect:"none"},e[0]=i):i=e[0];let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o={display:"none"},e[1]=o):o=e[1];let n;e[2]!==s?(n=l.jsx(b,{id:s,component:"input",type:"checkbox",sx:o}),e[2]=s,e[3]=n):n=e[3];let c;return e[4]!==t||e[5]!==s||e[6]!==n?(c=l.jsxs(b,{component:"label",htmlFor:s,sx:i,onClick:ge,children:[t,n]}),e[4]=t,e[5]=s,e[6]=n,e[7]=c):c=e[7],c};function ge(r){return r.stopPropagation()}const R={maxWidth:"122px","& input":{pt:"4px",pb:"4px",height:"20px",color:"primary.main",fontSize:"14px",textAlign:"end"}},E=r=>({type:"tel",startAdornment:l.jsx(te,{sx:{"& p":{fontSize:"12px",color:"text.dark"}},position:"start",children:r})}),je=r=>{const e=k.c(30),{favoriteId:t}=r,s=L(t,"min"),i=L(t,"max"),{mutate:o}=O();let n;e[0]!==t||e[1]!==o?(n=()=>o({favoriteId:t,min:"",max:""}),e[0]=t,e[1]=o,e[2]=n):n=e[2];const c=n,p=`${s}-min-key`,a=`${i}-max-key`;let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d={gridArea:"meta",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px",mb:"2px"},e[3]=d):d=e[3];let m;e[4]!==c||e[5]!==i||e[6]!==s?(m=(s||i)&&l.jsx(B,{size:"small",sx:{pt:"2px",pb:"2px",color:"text.secondary"},onClick:c,children:l.jsx(ce,{fontSize:"small"})}),e[4]=c,e[5]=i,e[6]=s,e[7]=m):m=e[7];let f;e[8]!==t||e[9]!==s||e[10]!==o?(f=S=>{const v=S.target.value.replace(/\D/g,"");v!==(s||"").toString()&&o({favoriteId:t,min:v})},e[8]=t,e[9]=s,e[10]=o,e[11]=f):f=e[11];let x;e[12]===Symbol.for("react.memo_cache_sentinel")?(x={input:E("менш ніж")},e[12]=x):x=e[12];let h;e[13]!==s||e[14]!==p||e[15]!==f?(h=l.jsx(D,{size:"small",defaultValue:s,onBlur:f,sx:R,slotProps:x},p),e[13]=s,e[14]=p,e[15]=f,e[16]=h):h=e[16];let u;e[17]!==t||e[18]!==i||e[19]!==o?(u=S=>{var I;S.target.value.replace(/\D/g,"")!==((I=i||"")==null?void 0:I.toString())&&o({favoriteId:t,max:S.target.value.replace(/\D/g,"")})},e[17]=t,e[18]=i,e[19]=o,e[20]=u):u=e[20];let j;e[21]===Symbol.for("react.memo_cache_sentinel")?(j={input:E("більш ніж")},e[21]=j):j=e[21];let g;e[22]!==i||e[23]!==a||e[24]!==u?(g=l.jsx(D,{size:"small",defaultValue:i,onBlur:u,sx:R,slotProps:j},a),e[22]=i,e[23]=a,e[24]=u,e[25]=g):g=e[25];let y;return e[26]!==m||e[27]!==h||e[28]!==g?(y=l.jsxs(b,{sx:d,children:[m,h,g]}),e[26]=m,e[27]=h,e[28]=g,e[29]=y):y=e[29],y},ye=r=>{const e=k.c(12),{isFavorite:t,favoriteId:s}=r,{mutate:i}=W();let o;e[0]!==s||e[1]!==t||e[2]!==i?(o=m=>{m.stopPropagation(),i({favoriteId:s,isFavorite:!t})},e[0]=s,e[1]=t,e[2]=i,e[3]=o):o=e[3];const n=o,c=t?"warning.light":"secondary.light";let p;e[4]!==c?(p={mr:1,pb:"3px",pt:"3px",color:c},e[4]=c,e[5]=p):p=e[5];let a;e[6]!==t?(a=t?l.jsx(q,{}):l.jsx(de,{}),e[6]=t,e[7]=a):a=e[7];let d;return e[8]!==n||e[9]!==p||e[10]!==a?(d=l.jsx(B,{size:"small","data-no-export":!0,sx:p,onClick:n,children:a}),e[8]=n,e[9]=p,e[10]=a,e[11]=d):d=e[11],d},Se=M(B),ve=r=>{const e=k.c(8),{favoriteId:t}=r,i=!!L(t,"note")?"primary.main":"text.secondary";let o;e[0]!==i?(o={color:i,mr:"2px"},e[0]=i,e[1]=o):o=e[1];let n;e[2]!==t?(n={favoriteId:t},e[2]=t,e[3]=n):n=e[3];let c;e[4]===Symbol.for("react.memo_cache_sentinel")?(c=l.jsx(re,{fontSize:"small"}),e[4]=c):c=e[4];let p;return e[5]!==o||e[6]!==n?(p=l.jsx(Se,{size:"small",sx:o,to:"/favorites/$favoriteId/notes",params:n,onClick:Ie,children:c}),e[5]=o,e[6]=n,e[7]=p):p=e[7],p};function Ie(r){return r.stopPropagation()}const _e=r=>{const e=k.c(5),{time:t}=r;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={color:"info",typography:"caption",lineHeight:0,fontSize:"10px",mr:1},e[0]=s):s=e[0];let i;e[1]!==t?(i=t?J(new Date(t)):"давно",e[1]=t,e[2]=i):i=e[2];let o;return e[3]!==i?(o=l.jsx(b,{sx:s,children:i}),e[3]=i,e[4]=o):o=e[4],o},ke=()=>{const r=k.c(2),e=X();let t;return r[0]!==e?(t=e.map(be),r[0]=e,r[1]=t):t=r[1],t};function be(r){return r.itemId}const ze=r=>{const e=k.c(12),{itemId:t,name:s}=r,i=ke(),{mutate:o}=Y();let n;e[0]!==t||e[1]!==o||e[2]!==s?(n=()=>{o({itemId:t,action:"add"},{onSuccess(){Z.success(`${s} додано в корзину!`,{position:"bottom-center",hideProgressBar:!0,icon:!1,theme:"colored"})}})},e[0]=t,e[1]=o,e[2]=s,e[3]=n):n=e[3];const c=n,p=i.includes(t)?"primary.main":"secondary.main";let a;e[4]!==p?(a={ml:"auto",color:p},e[4]=p,e[5]=a):a=e[5];let d;e[6]!==c?(d=()=>c(),e[6]=c,e[7]=d):d=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=l.jsx(ne,{sx:{fontSize:"14px"}}),e[8]=m):m=e[8];let f;return e[9]!==a||e[10]!==d?(f=l.jsx(B,{"data-no-export":!0,sx:a,onClick:d,children:m}),e[9]=a,e[10]=d,e[11]=f):f=e[11],f},Ce=M(B),$e=M(ae),Fe=r=>{const e=k.c(50),{p:t,search:s,isFavorite:i,isFavoritePage:o,isChanged:n}=r,[c,p]=A.useState(!1);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=K=>{K.stopPropagation(),p(Pe)},e[0]=a):a=e[0];const d=a;let m;e[1]!==t?(m="missed"in t&&t.missed&&{backgroundColor:"#ea2b060f"},e[1]=t,e[2]=m):m=e[2];let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f={borderColor:"text.secondary"},e[3]=f):f=e[3];let x;e[4]!==m?(x={...m,p:1,pb:"2px",position:"relative",display:"grid",rowGap:"12px",columnGap:"4px","&:has(input:checked)":f,gridTemplateColumns:"1fr",gridTemplateRows:"auto auto auto",gridTemplateAreas:` 
        "name"
        "sku"
        "meta"
      `},e[4]=m,e[5]=x):x=e[5];let h;e[6]!==n||e[7]!==i?(h=i&&l.jsx(B,{size:"small",sx:{color:"secondary.main",position:"absolute",top:"0",right:"0",zIndex:10},"data-no-export":!0,onClick:d,children:l.jsx(me,{sx:{color:n?"primary.dark":"text.secondary"},fontSize:"small"})}),e[6]=n,e[7]=i,e[8]=h):h=e[8];let u;e[9]===Symbol.for("react.memo_cache_sentinel")?(u={gridArea:"name",textAlign:"left",wordBreak:"break-word"},e[9]=u):u=e[9];let j;e[10]!==t.name?(j=async()=>await N(t.name),e[10]=t.name,e[11]=j):j=e[11];let g;e[12]!==t.name||e[13]!==s?(g=V(t.name,s),e[12]=t.name,e[13]=s,e[14]=g):g=e[14];let y;e[15]!==g?(y=l.jsx(ee,{text:g}),e[15]=g,e[16]=y):y=e[16];let S;e[17]!==j||e[18]!==y?(S=l.jsx(b,{sx:u,onClick:j,children:y}),e[17]=j,e[18]=y,e[19]=S):S=e[19];let v;e[20]===Symbol.for("react.memo_cache_sentinel")?(v={gridArea:"sku",justifySelf:"flex-start",display:"flex",alignItems:"center",width:"100%"},e[20]=v):v=e[20];let I;e[21]!==t.sku||e[22]!==s?(I=V(t.sku,s),e[21]=t.sku,e[22]=s,e[23]=I):I=e[23];let _;e[24]!==t.sku?(_=async()=>await N(t.sku),e[24]=t.sku,e[25]=_):_=e[25];let $;e[26]!==I||e[27]!==_?($=l.jsx(G,{label:I,size:"small",onClick:_}),e[26]=I,e[27]=_,e[28]=$):$=e[28];let F;e[29]!==o||e[30]!==t?(F=!o&&l.jsxs(l.Fragment,{children:[l.jsx(Ce,{to:"/list/$id/percents",params:{id:z(t)},"data-no-export":!0,children:l.jsx(pe,{sx:{fontSize:"small"}})}),l.jsx(ze,{itemId:z(t),name:t.name})]}),e[29]=o,e[30]=t,e[31]=F):F=e[31];let P;e[32]!==$||e[33]!==F?(P=l.jsxs(b,{sx:v,children:[$,F]}),e[32]=$,e[33]=F,e[34]=P):P=e[34];let w;e[35]!==t||e[36]!==c?(w=c&&l.jsx(je,{favoriteId:z(t)}),e[35]=t,e[36]=c,e[37]=w):w=e[37];let T;e[38]!==i||e[39]!==o||e[40]!==t||e[41]!==c?(T=!c&&l.jsxs(b,{sx:{gridArea:"meta",display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"8px"},children:[l.jsx(xe,{product:t}),l.jsx(le,{vendor:t.vendor}),t.pics&&l.jsx($e,{to:o?"/favorites/$id/details":"/list/$id/details",params:{id:z(t)},sx:{color:"secondary",fontSize:"small",cursor:"pointer"},"data-no-export":!0}),l.jsxs(b,{sx:{ml:"auto",display:"flex",alignItems:"center"},children:[i&&"time"in t&&l.jsx(_e,{time:t.time}),o&&l.jsx(ve,{favoriteId:z(t)}),l.jsx(ye,{isFavorite:i,favoriteId:z(t)}),l.jsx(he,{children:l.jsx(ie,{stock:t.stock,bordered:!0})})]})]}),e[38]=i,e[39]=o,e[40]=t,e[41]=c,e[42]=T):T=e[42];let H;return e[43]!==S||e[44]!==P||e[45]!==w||e[46]!==T||e[47]!==x||e[48]!==h?(H=l.jsxs(se,{className:"product-tile",variant:"outlined",sx:x,children:[h,S,P,w,T]}),e[43]=S,e[44]=P,e[45]=w,e[46]=T,e[47]=x,e[48]=h,e[49]=H):H=e[49],H};function Pe(r){return!r}const Ee=r=>{const e=k.c(16),{list:t,search:s,isFavoritePage:i}=r,o=i===void 0?!1:i,n=Q(),c=U();let p,a,d,m,f;if(e[0]!==c||e[1]!==n||e[2]!==o||e[3]!==t||e[4]!==s){const h=c.map(we);p=oe,a="column",d=1,m="tiles-view",f=t.map(u=>{const j=z(u),g=`${j}:${u.price}`;return l.jsx(Fe,{p:u,search:s,isFavorite:n.includes(j),isChanged:h.includes(u.sku),isFavoritePage:o},g)}),e[0]=c,e[1]=n,e[2]=o,e[3]=t,e[4]=s,e[5]=p,e[6]=a,e[7]=d,e[8]=m,e[9]=f}else p=e[5],a=e[6],d=e[7],m=e[8],f=e[9];let x;return e[10]!==p||e[11]!==a||e[12]!==d||e[13]!==m||e[14]!==f?(x=l.jsx(p,{direction:a,spacing:d,id:m,children:f}),e[10]=p,e[11]=a,e[12]=d,e[13]=m,e[14]=f,e[15]=x):x=e[15],x};function we(r){return r.sku}export{Ee as default};
