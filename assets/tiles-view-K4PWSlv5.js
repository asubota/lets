import{j as o,c as H}from"./tanstack-BYV_2V3b.js";import{c as b,Y as W,m as O,Z as q,N as M,I as X,j as Y,h as Z,$ as J,y as V,p as z,X as N,a0 as Q,a1 as U}from"./index-uNPwV8c2.js";import{r as A}from"./reactColor-CG_Kj7OU.js";import{d as C,B as k,I as B,$ as G,q as R,r as ee,t as te,S as se}from"./mui-BDVIG9dQ.js";import{R as oe,u as ie}from"./use-infinite-scroll-BcIZQzr5.js";import{e as le}from"./notifications-BSyWfY-p.js";import{V as ne}from"./vendor-chip-B9v6c1Ap.js";import"./react-Csw2ODfV.js";import"./html2canvas-BfYXEYrK.js";import"./popper-CMBiYTiD.js";import"./House-BjbrglTb.js";import"./index.esm-DCHk5pyX.js";import"./Delete-_swapvMB.js";const re=C(o.jsx("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2m10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2m-9.83-3.25.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25"})),ce=C(o.jsx("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"})),ae=C(o.jsx("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"})),pe=C(o.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),me=C(o.jsx("path",{d:"M7.5 11C9.43 11 11 9.43 11 7.5S9.43 4 7.5 4 4 5.57 4 7.5 5.57 11 7.5 11m0-5C8.33 6 9 6.67 9 7.5S8.33 9 7.5 9 6 8.33 6 7.5 6.67 6 7.5 6M4.0025 18.5832 18.59 3.9955l1.4142 1.4143L5.4167 19.9974zM16.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"})),de=C(o.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"})),fe=C(o.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"})),xe=n=>{const e=b.c(5),{time:t}=n;let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={color:"info",typography:"caption",lineHeight:0,fontSize:"10px",mr:1},e[0]=s):s=e[0];let l;e[1]!==t?(l=t?W(new Date(t)):"давно",e[1]=t,e[2]=l):l=e[2];let i;return e[3]!==l?(i=o.jsx(k,{sx:s,children:l}),e[3]=l,e[4]=i):i=e[4],i},ue=n=>{const e=b.c(12),{isFavorite:t,favoriteId:s}=n,{mutate:l}=O();let i;e[0]!==s||e[1]!==t||e[2]!==l?(i=p=>{p.stopPropagation(),l({favoriteId:s,isFavorite:!t})},e[0]=s,e[1]=t,e[2]=l,e[3]=i):i=e[3];const r=i,c=t?"warning.light":"secondary.light";let m;e[4]!==c?(m={mr:1,pb:"3px",pt:"3px",color:c},e[4]=c,e[5]=m):m=e[5];let a;e[6]!==t?(a=t?o.jsx(q,{}):o.jsx(fe,{}),e[6]=t,e[7]=a):a=e[7];let f;return e[8]!==r||e[9]!==m||e[10]!==a?(f=o.jsx(B,{size:"small","data-no-export":!0,sx:m,onClick:r,children:a}),e[8]=r,e[9]=m,e[10]=a,e[11]=f):f=e[11],f},he=n=>{const e=b.c(8),{children:t}=n,s=A.useId();let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={m:0,p:0,fontSize:0,cursor:"pointer",userSelect:"none"},e[0]=l):l=e[0];let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i={display:"none"},e[1]=i):i=e[1];let r;e[2]!==s?(r=o.jsx(k,{id:s,component:"input",type:"checkbox",sx:i}),e[2]=s,e[3]=r):r=e[3];let c;return e[4]!==t||e[5]!==s||e[6]!==r?(c=o.jsxs(k,{component:"label",htmlFor:s,sx:l,onClick:ge,children:[t,r]}),e[4]=t,e[5]=s,e[6]=r,e[7]=c):c=e[7],c};function ge(n){return n.stopPropagation()}const je=H(B),ye=n=>{const e=b.c(8),{favoriteId:t}=n,l=!!M(t,"note")?"primary.main":"text.secondary";let i;e[0]!==l?(i={color:l,mr:"2px"},e[0]=l,e[1]=i):i=e[1];let r;e[2]!==t?(r={favoriteId:t},e[2]=t,e[3]=r):r=e[3];let c;e[4]===Symbol.for("react.memo_cache_sentinel")?(c=o.jsx(ce,{fontSize:"small"}),e[4]=c):c=e[4];let m;return e[5]!==i||e[6]!==r?(m=o.jsx(je,{size:"small",sx:i,to:"/favorites/$favoriteId/notes",params:r,onClick:Se,children:c}),e[5]=i,e[6]=r,e[7]=m):m=e[7],m};function Se(n){return n.stopPropagation()}const ve=(n,e)=>{if(e)switch(n){case"price":return"price_old";case"price_old":return"p2";case"p2":return"-";case"-":return"price"}else switch(n){case"price":return"p2";case"p2":return"-";case"-":return"price"}return"price"},Ie=n=>{const e=b.c(36),{product:t}=n,[s,l]=A.useState("price"),i=!!t.price_old&&Number(t.price_old)!==t.price;let r;e[0]!==t.price||e[1]!==t.price_old?(r=t.price_old?((1-t.price/t.price_old)*100).toFixed(0):0,e[0]=t.price,e[1]=t.price_old,e[2]=r):r=e[2];const c=r,m=t.price_old?t.price_old-t.price:0;let a;e[3]!==m||e[4]!==c||e[5]!==t.p2||e[6]!==t.price||e[7]!==t.price_old?(a=_=>{switch(_){case"price":return`${t.price} грн`;case"p2":return`${t.p2||"?"} грн`;case"price_old":return o.jsxs(o.Fragment,{children:[t.price_old," грн",o.jsxs(k,{component:"span",sx:{color:_e,fontSize:"12px"},children:[" ","- ",c,"% = ",m," грн"]})]});case"-":return t.p2?`+${t.price-t.p2} грн`:"? грн"}},e[3]=m,e[4]=c,e[5]=t.p2,e[6]=t.price,e[7]=t.price_old,e[8]=a):a=e[8];const f=a;let p;e[9]!==i?(p=()=>{l(_=>ve(_,i))},e[9]=i,e[10]=p):p=e[10];const x=p;let y;e[11]!==s?(y={},["earn","base-price"].includes(s)&&(y["data-no-export"]=!0),e[11]=s,e[12]=y):y=e[12];let g;e[13]!==x?(g=_=>{_.stopPropagation(),x()},e[13]=x,e[14]=g):g=e[14];let S;e[15]!==f||e[16]!==s?(S=f(s),e[15]=f,e[16]=s,e[17]=S):S=e[17];let j;e[18]!==s?(j=s==="-"&&{color:"success.main",fontWeight:"bold"},e[18]=s,e[19]=j):j=e[19];let d;e[20]!==s?(d=s==="p2"&&{color:"info.main",fontStyle:"italic"},e[20]=s,e[21]=d):d=e[21];let u;e[22]!==s?(u=s==="price_old"&&{color:"secondary.light"},e[22]=s,e[23]=u):u=e[23];let h;e[24]!==i?(h=i&&{borderColor:"primary.main"},e[24]=i,e[25]=h):h=e[25];let v;e[26]!==j||e[27]!==d||e[28]!==u||e[29]!==h?(v={borderWidth:"2px",borderColor:"secondary.main",...j,...d,...u,...h},e[26]=j,e[27]=d,e[28]=u,e[29]=h,e[30]=v):v=e[30];let I;return e[31]!==y||e[32]!==v||e[33]!==g||e[34]!==S?(I=o.jsx(G,{onClick:g,label:S,size:"small",variant:"outlined",sx:v,...y}),e[31]=y,e[32]=v,e[33]=g,e[34]=S,e[35]=I):I=e[35],I};function _e(n){return n.palette.mode==="dark"?"white":"black"}const D={maxWidth:"122px","& input":{pt:"4px",pb:"4px",height:"20px",color:"primary.main",fontSize:"14px",textAlign:"end"}},E=n=>({type:"tel",startAdornment:o.jsx(ee,{sx:{"& p":{fontSize:"12px",color:"text.dark"}},position:"start",children:n})}),ke=n=>{const e=b.c(30),{favoriteId:t}=n,s=M(t,"min"),l=M(t,"max"),{mutate:i}=X();let r;e[0]!==t||e[1]!==i?(r=()=>i({favoriteId:t,min:"",max:""}),e[0]=t,e[1]=i,e[2]=r):r=e[2];const c=r,m=`${s}-min-key`,a=`${l}-max-key`;let f;e[3]===Symbol.for("react.memo_cache_sentinel")?(f={gridArea:"meta",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px",mb:"2px"},e[3]=f):f=e[3];let p;e[4]!==c||e[5]!==l||e[6]!==s?(p=(s||l)&&o.jsx(B,{size:"small",sx:{pt:"2px",pb:"2px",color:"text.secondary"},onClick:c,children:o.jsx(ae,{fontSize:"small"})}),e[4]=c,e[5]=l,e[6]=s,e[7]=p):p=e[7];let x;e[8]!==t||e[9]!==s||e[10]!==i?(x=h=>{const v=h.target.value.replace(/\D/g,"");v!==(s||"").toString()&&i({favoriteId:t,min:v})},e[8]=t,e[9]=s,e[10]=i,e[11]=x):x=e[11];let y;e[12]===Symbol.for("react.memo_cache_sentinel")?(y={input:E("менш ніж")},e[12]=y):y=e[12];let g;e[13]!==s||e[14]!==m||e[15]!==x?(g=o.jsx(R,{size:"small",defaultValue:s,onBlur:x,sx:D,slotProps:y},m),e[13]=s,e[14]=m,e[15]=x,e[16]=g):g=e[16];let S;e[17]!==t||e[18]!==l||e[19]!==i?(S=h=>{var I;h.target.value.replace(/\D/g,"")!==((I=l||"")==null?void 0:I.toString())&&i({favoriteId:t,max:h.target.value.replace(/\D/g,"")})},e[17]=t,e[18]=l,e[19]=i,e[20]=S):S=e[20];let j;e[21]===Symbol.for("react.memo_cache_sentinel")?(j={input:E("більш ніж")},e[21]=j):j=e[21];let d;e[22]!==l||e[23]!==a||e[24]!==S?(d=o.jsx(R,{size:"small",defaultValue:l,onBlur:S,sx:D,slotProps:j},a),e[22]=l,e[23]=a,e[24]=S,e[25]=d):d=e[25];let u;return e[26]!==p||e[27]!==g||e[28]!==d?(u=o.jsxs(k,{sx:f,children:[p,g,d]}),e[26]=p,e[27]=g,e[28]=d,e[29]=u):u=e[29],u},be=()=>{const n=b.c(2),e=Y();let t;return n[0]!==e?(t=e.map(ze),n[0]=e,n[1]=t):t=n[1],t};function ze(n){return n.itemId}const Ce=n=>{const e=b.c(12),{itemId:t,name:s}=n,l=be(),{mutate:i}=Z();let r;e[0]!==t||e[1]!==i||e[2]!==s?(r=()=>{i({itemId:t,action:"add"},{onSuccess(){J.success(`${s} додано в корзину!`,{position:"bottom-center",hideProgressBar:!0,icon:!1,theme:"colored"})}})},e[0]=t,e[1]=i,e[2]=s,e[3]=r):r=e[3];const c=r,m=l.includes(t)?"primary.main":"secondary.main";let a;e[4]!==m?(a={ml:"auto",color:m},e[4]=m,e[5]=a):a=e[5];let f;e[6]!==c?(f=()=>c(),e[6]=c,e[7]=f):f=e[7];let p;e[8]===Symbol.for("react.memo_cache_sentinel")?(p=o.jsx(re,{sx:{fontSize:"14px"}}),e[8]=p):p=e[8];let x;return e[9]!==a||e[10]!==f?(x=o.jsx(B,{"data-no-export":!0,sx:a,onClick:f,children:p}),e[9]=a,e[10]=f,e[11]=x):x=e[11],x},$e=H(B),Fe=H(pe),Pe=n=>{const e=b.c(50),{p:t,search:s,isFavorite:l,isFavoritePage:i,isChanged:r}=n,[c,m]=A.useState(!1);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=K=>{K.stopPropagation(),m(Te)},e[0]=a):a=e[0];const f=a;let p;e[1]!==t?(p="missed"in t&&t.missed&&{backgroundColor:"#ea2b060f"},e[1]=t,e[2]=p):p=e[2];let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x={borderColor:"text.secondary"},e[3]=x):x=e[3];let y;e[4]!==p?(y={...p,p:1,pb:"2px",position:"relative",display:"grid",rowGap:"12px",columnGap:"4px","&:has(input:checked)":x,gridTemplateColumns:"1fr",gridTemplateRows:"auto auto auto",gridTemplateAreas:` 
        "name"
        "sku"
        "meta"
      `},e[4]=p,e[5]=y):y=e[5];let g;e[6]!==r||e[7]!==l?(g=l&&o.jsx(B,{size:"small",sx:{color:"secondary.main",position:"absolute",top:"0",right:"0",zIndex:10},"data-no-export":!0,onClick:f,children:o.jsx(de,{sx:{color:r?"primary.dark":"text.secondary"},fontSize:"small"})}),e[6]=r,e[7]=l,e[8]=g):g=e[8];let S;e[9]===Symbol.for("react.memo_cache_sentinel")?(S={gridArea:"name",textAlign:"left",wordBreak:"break-word"},e[9]=S):S=e[9];let j;e[10]!==t.name?(j=()=>N(t.name),e[10]=t.name,e[11]=j):j=e[11];let d;e[12]!==t.name||e[13]!==s?(d=V(t.name,s),e[12]=t.name,e[13]=s,e[14]=d):d=e[14];let u;e[15]!==d?(u=o.jsx(oe,{text:d}),e[15]=d,e[16]=u):u=e[16];let h;e[17]!==j||e[18]!==u?(h=o.jsx(k,{sx:S,onClick:j,children:u}),e[17]=j,e[18]=u,e[19]=h):h=e[19];let v;e[20]===Symbol.for("react.memo_cache_sentinel")?(v={gridArea:"sku",justifySelf:"flex-start",display:"flex",alignItems:"center",width:"100%"},e[20]=v):v=e[20];let I;e[21]!==t.sku||e[22]!==s?(I=V(t.sku,s),e[21]=t.sku,e[22]=s,e[23]=I):I=e[23];let _;e[24]!==t.sku?(_=()=>N(t.sku),e[24]=t.sku,e[25]=_):_=e[25];let $;e[26]!==I||e[27]!==_?($=o.jsx(G,{label:I,size:"small",onClick:_}),e[26]=I,e[27]=_,e[28]=$):$=e[28];let F;e[29]!==i||e[30]!==t?(F=!i&&o.jsxs(o.Fragment,{children:[o.jsx($e,{to:"/list/$id/percents",params:{id:z(t)},"data-no-export":!0,children:o.jsx(me,{sx:{fontSize:"small"}})}),o.jsx(Ce,{itemId:z(t),name:t.name})]}),e[29]=i,e[30]=t,e[31]=F):F=e[31];let P;e[32]!==$||e[33]!==F?(P=o.jsxs(k,{sx:v,children:[$,F]}),e[32]=$,e[33]=F,e[34]=P):P=e[34];let T;e[35]!==t||e[36]!==c?(T=c&&o.jsx(ke,{favoriteId:z(t)}),e[35]=t,e[36]=c,e[37]=T):T=e[37];let w;e[38]!==l||e[39]!==i||e[40]!==t||e[41]!==c?(w=!c&&o.jsxs(k,{sx:{gridArea:"meta",display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"8px"},children:[o.jsx(Ie,{product:t}),o.jsx(ne,{vendor:t.vendor}),t.pics&&o.jsx(Fe,{to:i?"/favorites/$id/details":"/list/$id/details",params:{id:z(t)},sx:{color:"secondary",fontSize:"small",cursor:"pointer"},"data-no-export":!0}),o.jsxs(k,{sx:{ml:"auto",display:"flex",alignItems:"center"},children:[l&&"time"in t&&o.jsx(xe,{time:t.time}),i&&o.jsx(ye,{favoriteId:z(t)}),o.jsx(ue,{isFavorite:l,favoriteId:z(t)}),o.jsx(he,{children:o.jsx(le,{stock:t.stock,bordered:!0})})]})]}),e[38]=l,e[39]=i,e[40]=t,e[41]=c,e[42]=w):w=e[42];let L;return e[43]!==h||e[44]!==P||e[45]!==T||e[46]!==w||e[47]!==y||e[48]!==g?(L=o.jsxs(te,{className:"product-tile",variant:"outlined",sx:y,children:[g,h,P,T,w]}),e[43]=h,e[44]=P,e[45]=T,e[46]=w,e[47]=y,e[48]=g,e[49]=L):L=e[49],L};function Te(n){return!n}const Oe=n=>{const e=b.c(7),{list:t,search:s,isFavoritePage:l}=n,i=l===void 0?!1:l,r=Q(),m=U().map(we),{visibleList:a,hasMore:f,loadMoreRef:p}=ie(t),x=se,y="column",g=1,S="tiles-view",j=a.map(h=>{const v=z(h),I=`${v}:${h.price}`;return o.jsx(Pe,{p:h,search:s,isFavorite:r.includes(v),isChanged:m.includes(h.sku),isFavoritePage:i},I)});let d;e[0]!==f||e[1]!==p?(d=f&&o.jsx(k,{ref:p,sx:{p:1}}),e[0]=f,e[1]=p,e[2]=d):d=e[2];let u;return e[3]!==x||e[4]!==j||e[5]!==d?(u=o.jsxs(x,{direction:y,spacing:g,id:S,children:[j,d]}),e[3]=x,e[4]=j,e[5]=d,e[6]=u):u=e[6],u};function we(n){return n.sku}export{Oe as default};
