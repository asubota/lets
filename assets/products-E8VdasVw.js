import{j as e,r as j,d as R,n as D}from"./tanstack-Bgp09nNT.js";import{e as z,d as N,f as $,h as E,i as W,j as y,k as b,l as m,m as O,n as g,o as K,p as L,q as U,r as q,s as Y,t as Z,B,L as P,E as _,v,w as k,x as Q,y as X,R as J,z as ee,A as te,D as se}from"./index-CryQbzW0.js";import{d as c,M as ne,N as C,B as a,a as u,I as d,k as w,l as oe,O as re,h as ie,Q as ae,m as le,R as ce,U as xe,V,W as p,X as de,Y as he,n as pe,Z as ue,_ as me,$ as je}from"./mui-BHTChkbY.js";import{V as F}from"./vendor-chip-C4bLGV1M.js";import"./react-_uqhELNW.js";import"./html2canvas-BfYXEYrK.js";import"./tesseract-efYOn2sj.js";import"./swiper-B72pzicN.js";const ge=c(e.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),ve=c([e.jsx("path",{d:"M5 5h2v3h10V5h2v5h2V5c0-1.1-.9-2-2-2h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v-2H5zm7-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1"},"0"),e.jsx("path",{d:"M20.3 18.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S12 14 12 16.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l2.7 2.7 1.4-1.4zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5"},"1")],"ContentPasteSearch"),I=c(e.jsx("path",{d:"M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z"}),"DateRange"),fe=c(e.jsx("path",{d:"M3 10h11v2H3zm0-2h11V6H3zm0 8h7v-2H3zm15.01-3.13.71-.71c.39-.39 1.02-.39 1.41 0l.71.71c.39.39.39 1.02 0 1.41l-.71.71zm-.71.71-5.3 5.3V21h2.12l5.3-5.3z"}),"EditNote"),ye=c(e.jsx("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google"),be=c(e.jsx("path",{fillRule:"evenodd",d:"M3 3v8h8V3zm6 6H5V5h4zm-6 4v8h8v-8zm6 6H5v-4h4zm4-16v8h8V3zm6 6h-4V5h4zm-6 4v8h8v-8zm6 6h-4v-4h4z"}),"GridView"),ze=c(e.jsx("path",{d:"M14.59 8 12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"HighlightOff"),Se=c(e.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image"),ke=c(e.jsx("path",{d:"m16 5-1.42 1.42-1.59-1.59V16h-1.98V4.83L9.42 6.42 8 5l4-4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2"}),"IosShare"),Ce=c(e.jsx("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp"),T=c(e.jsx("path",{d:"M3 18h12v-2H3zM3 6v2h18V6zm0 7h18v-2H3z"}),"Notes"),we=c(e.jsx("path",{d:"M3 15h18v-2H3zm0 4h18v-2H3zm0-8h18V9H3zm0-6v2h18V5z"}),"Reorder"),Ve=c(e.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),Ie=c(e.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder"),Te=c([e.jsx("path",{d:"m22 20.59-4.69-4.69C18.37 14.55 19 12.85 19 11c0-4.42-3.58-8-8-8-4.08 0-7.44 3.05-7.93 7h2.02C5.57 7.17 8.03 5 11 5c3.31 0 6 2.69 6 6s-2.69 6-6 6c-2.42 0-4.5-1.44-5.45-3.5H3.4C4.45 16.69 7.46 19 11 19c1.85 0 3.55-.63 4.9-1.69L20.59 22z"},"0"),e.jsx("path",{d:"M8.43 9.69 9.65 15h1.64l1.26-3.78.95 2.28h2V12h-1l-1.25-3h-1.54l-1.12 3.37L9.35 7H7.7l-1.25 4H1v1.5h6.55z"},"1")],"Troubleshoot"),Me=c(e.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune"),S=({text:t})=>e.jsx(ne,{component:"span",sx:{display:"inline-block",position:"relative",cursor:"pointer"},children:t}),He=({product:t})=>{const[s,n]=j.useState("full-price"),r={"full-price":`${t.price} uah`,"base-price":`${t.p2||"?"} uah`,earn:`+${t.p2?t.price-t.p2:"?"} uah`},o={};["earn","base-price"].includes(s)&&(o["data-no-export"]=!0);const x=()=>{const l={"full-price":"base-price","base-price":"earn",earn:"full-price"};n(i=>l[i])};return e.jsx(C,{onClick:l=>{l.stopPropagation(),x()},label:r[s],size:"small",variant:"outlined",sx:{borderWidth:"2px",borderColor:"secondary.main",...s==="earn"&&{color:"success.main",fontWeight:"bold"},...s==="base-price"&&{color:"info.main",fontStyle:"italic"}},...o})},Ae=({children:t})=>{const s=j.useId();return e.jsxs(a,{component:"label",htmlFor:s,sx:{m:0,p:0,fontSize:0,cursor:"pointer",userSelect:"none"},onClick:n=>n.stopPropagation(),children:[t,e.jsx(a,{id:s,component:"input",type:"checkbox",sx:{display:"none"}})]})},G=({stock:t,bordered:s})=>t?s?e.jsx(C,{label:t,color:"primary",size:"small",variant:"outlined",sx:{borderRadius:0,borderWidth:"2px"}}):e.jsx(u,{component:"span",sx:{color:"primary.main",fontWeight:"bold",fontStyle:"italic",fontSize:"14px"},children:t}):e.jsx(ge,{color:"primary",fontSize:"small"}),M={maxWidth:"122px","& input":{pt:"4px",pb:"4px",height:"20px",color:"primary.main",fontSize:"14px",textAlign:"end"}},H=t=>({startAdornment:e.jsx(oe,{sx:{"& p":{fontSize:"12px",color:"text.dark"}},position:"start",children:t})}),Re=({favoriteId:t})=>{const s=z(t,"min"),n=z(t,"max"),{mutate:r}=N(),o=()=>r({favoriteId:t,min:"",max:""}),x=`${s}-min-key`,l=`${n}-max-key`;return e.jsxs(a,{sx:{gridArea:"meta",display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px",mb:"2px"},children:[(s||n)&&e.jsx(d,{size:"small",sx:{pt:"2px",pb:"2px",color:"text.secondary"},onClick:o,children:e.jsx(ze,{fontSize:"small"})}),e.jsx(w,{type:"number",size:"small",defaultValue:s,onBlur:i=>{const h=i.target.value.replace(/\D/g,"");h!==(s||"").toString()&&r({favoriteId:t,min:h})},sx:M,slotProps:{input:H("менш ніж")}},x),e.jsx(w,{type:"number",size:"small",defaultValue:n,onBlur:i=>{var f;i.target.value.replace(/\D/g,"")!==((f=n||"")==null?void 0:f.toString())&&r({favoriteId:t,max:i.target.value.replace(/\D/g,"")})},sx:M,slotProps:{input:H("більш ніж")}},l)]})},Le=({isFavorite:t,favoriteId:s})=>{const{mutate:n}=$(),r=o=>{o.stopPropagation(),n({favoriteId:s,isFavorite:!t})};return e.jsx(d,{size:"small","data-no-export":!0,sx:{mr:1,pb:"3px",pt:"3px",color:t?"warning.light":"secondary.light"},onClick:r,children:t?e.jsx(E,{}):e.jsx(Ie,{})})},Be=R(d),Pe=({favoriteId:t})=>{const s=!!z(t,"note");return e.jsx(Be,{size:"small",sx:{color:s?"primary.main":"text.secondary",mr:"2px"},to:"/favorites/$favoriteId/notes",params:{favoriteId:t},onClick:n=>n.stopPropagation(),children:e.jsx(fe,{fontSize:"small"})})},Fe=({time:t})=>e.jsx(a,{sx:{color:"info",typography:"caption",lineHeight:0,fontSize:"10px",mr:1},children:t?W(new Date(t)):"давно"}),Ge=R(Se),De=({p:t,search:s,isFavorite:n,iFavouriteRoute:r,isChanged:o})=>{const[x,l]=j.useState(!1),i=h=>{h.stopPropagation(),l(f=>!f)};return e.jsxs(re,{className:"product-tile",variant:"outlined",sx:{..."missed"in t&&t.missed&&{backgroundColor:"#ea2b060f"},p:1,pb:"2px",position:"relative",display:"grid",rowGap:"12px",columnGap:"4px","&:has(input:checked)":{borderColor:"text.secondary"},gridTemplateColumns:"1fr",gridTemplateRows:"auto auto auto",gridTemplateAreas:` 
        "name"
        "sku"
        "meta"
      `},children:[n&&e.jsx(d,{size:"small",sx:{color:"secondary.main",position:"absolute",top:"0",right:"0",zIndex:10},"data-no-export":!0,onClick:i,children:e.jsx(Ve,{sx:{color:o?"primary.dark":"text.secondary"},fontSize:"small"})}),e.jsx(a,{sx:{gridArea:"name",textAlign:"left",wordBreak:"break-word"},onClick:async()=>await y(t.name),children:e.jsx(S,{text:b(t.name,s)})}),e.jsx(C,{sx:{gridArea:"sku",justifySelf:"flex-start"},label:b(t.sku,s),size:"small",onClick:async()=>await y(t.sku)}),x&&e.jsx(Re,{favoriteId:m(t)}),!x&&e.jsxs(a,{sx:{gridArea:"meta",display:"flex",justifyContent:"flex-start",alignItems:"center",gap:"8px"},children:[e.jsx(He,{product:t}),e.jsx(F,{vendor:t.vendor}),t.pics&&e.jsx(Ge,{to:"/list/$id/details",params:{id:m(t)},sx:{color:"secondary",fontSize:"small",cursor:"pointer"},"data-no-export":!0}),e.jsxs(a,{sx:{ml:"auto",display:"flex",alignItems:"center"},children:[n&&"time"in t&&e.jsx(Fe,{time:t.time}),r&&e.jsx(Pe,{favoriteId:m(t)}),e.jsx(Le,{isFavorite:n,favoriteId:m(t)}),e.jsx(Ae,{children:e.jsx(G,{stock:t.stock,bordered:!0})})]})]})]})},Ne=({list:t,search:s})=>{const n=O(),r=g("/favorites"),x=K().map(l=>l.sku);return e.jsx(ie,{direction:"column",spacing:1,id:"tiles-view",children:t.map(l=>{const i=m(l),h=`${i}:${l.price}`;return e.jsx(De,{p:l,search:s,isFavorite:n.includes(i),isChanged:x.includes(l.sku),iFavouriteRoute:r},h)})})},$e=()=>{const{toggleSettings:t}=L();return e.jsx(a,{sx:{mt:"100px",display:"flex",justifyContent:"center"},children:e.jsx(u,{variant:"subtitle2",sx:{color:"primary.main",cursor:"pointer"},onClick:t,children:"All columns are disabled!"})})};function A(t,s){return s.price<t.price?-1:s.price>t.price?1:0}function Ee(t){return t==="desc"?(s,n)=>A(s,n):(s,n)=>-A(s,n)}const We=({list:t,search:s})=>{const[n,r]=j.useState(void 0),o=U(),x=()=>{r(i=>{if(!i)return"asc";if(i==="asc")return"desc"})};if(!o.length)return e.jsx($e,{});const l=n?t.slice().sort(Ee(n)):t;return e.jsx(ae,{component:le,children:e.jsxs(ce,{size:"small",children:[e.jsx(xe,{children:e.jsxs(V,{children:[o.includes("sku")&&e.jsx(p,{sx:{pl:1},children:"Артикул"}),o.includes("stock")&&e.jsx(p,{sx:{pl:1,pr:0,whiteSpace:"nowrap",fontWeight:"bold",fontStyle:"italic",fontSize:"14px"},align:"center",children:"К-ть"}),o.includes("name")&&e.jsx(p,{sx:{pl:1},children:"Назва"}),o.includes("vendor")&&e.jsx(p,{sx:{pr:1},align:"right",children:"Продавець"}),o.includes("price")&&e.jsx(p,{sx:{pr:1},align:"right",children:e.jsx(de,{active:!!n,direction:n,onClick:x,sx:{"&.Mui-active .MuiTableSortLabel-icon":{color:"primary.main"}},children:"Ціна"})})]})}),e.jsx(he,{className:"t-body",children:l.map(i=>e.jsxs(V,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[o.includes("sku")&&e.jsx(p,{sx:{whiteSpace:"nowrap",pr:0,pl:1},onClick:async h=>{h.stopPropagation(),await y(i.sku)},children:e.jsx(S,{text:b(i.sku,s)})}),o.includes("stock")&&e.jsx(p,{sx:{pl:1,pr:0},align:"center",children:e.jsx(G,{stock:i.stock})}),o.includes("name")&&e.jsx(p,{sx:{pl:1},onClick:async h=>{h.stopPropagation(),await y(i.name)},children:e.jsx(S,{text:b(i.name,s)})}),o.includes("vendor")&&e.jsx(p,{align:"right",sx:{pr:1},children:e.jsx(F,{vendor:i.vendor})}),o.includes("price")&&e.jsx(p,{sx:{pl:0,pr:1},align:"right",children:i.price})]},m(i)))})]})})},Oe=()=>{const t=q.auth2.getAuthInstance();return Y()<=1&&!t.isSignedIn.get()?e.jsx(pe,{severity:"warning",variant:"outlined",sx:{mt:"60px",cursor:"pointer",maxWidth:"280px",ml:"auto",mr:"auto"},onClick:Z,children:"Треба авторизуватись!"}):null},Ke=()=>{const t=()=>{};return e.jsxs(a,{children:[e.jsx(u,{variant:"h3",gutterBottom:!0,sx:{textAlign:"center",color:"text.secondary",mt:4},children:e.jsx(a,{onClick:t,children:"Вітаю!"})}),e.jsxs(u,{variant:"h4",gutterBottom:!0,sx:{textAlign:"center",color:"text.secondary",mt:4},children:[e.jsx(a,{sx:{mt:4,mb:1},children:"Вам щось підказати?"}),e.jsx(a,{children:"Проконсультувати?"})]}),e.jsx(Oe,{}),e.jsx(B,{type:"safe"}),e.jsx(P,{}),e.jsx(_,{})]})},Ue=()=>e.jsxs(a,{children:[e.jsx(u,{variant:"h3",gutterBottom:!0,sx:{textAlign:"center",color:"text.secondary",mt:4},children:e.jsx(a,{children:"Наразі,"})}),e.jsx(u,{variant:"h4",gutterBottom:!0,sx:{textAlign:"center",color:"text.secondary",mt:4},children:e.jsx(a,{sx:{mt:4},children:"всі механіки зайняті"})}),e.jsx(B,{type:"broken"}),e.jsx(P,{})]}),qe=async()=>{const t=await navigator.clipboard.readText();window.open(`https://www.google.com/search?q=${t}`,"_blank")},Ye=()=>g("/")?e.jsx(d,{size:"small",sx:{color:"text.secondary",mr:"20px"},onClick:qe,children:e.jsx(ye,{})}):null,Ze=()=>{const t=D(),s=async()=>{const r=await navigator.clipboard.readText();await t({to:"/",search:{s:r}})};return g("/")?e.jsx(d,{size:"small",sx:{color:"text.secondary",mr:"20px"},onClick:s,children:e.jsx(ve,{})}):null},_e=()=>{const t=v(),{setView:s}=k();return e.jsx(d,{size:"small",sx:{color:t==="table"?"primary.main":"text.secondary"},onClick:()=>s("table"),children:e.jsx(we,{})})},Qe=()=>e.jsx(a,{sx:{borderRight:"1px solid",borderColor:"primary.main",height:"22px",pl:"2px",pr:"2px"}}),Xe=()=>{const t=v(),{setView:s}=k();return e.jsx(d,{size:"small",sx:{color:t==="tile"?"primary.main":"text.secondary"},onClick:()=>s("tile"),children:e.jsx(be,{})})},Je=()=>{const t=g("/"),s=v(),{toggleSettings:n}=L();if(t&&s=="table")return e.jsx(d,{sx:{ml:"auto",color:"text.secondary"},onClick:n,size:"small",children:e.jsx(Me,{})})},et=()=>v()!=="tile"?null:e.jsx(d,{sx:{ml:"16px",color:"text.secondary"},size:"small",onClick:Q,children:e.jsx(ke,{})}),tt=({uniqueVendors:t,filteredSearch:s,total:n})=>{const{toggleLimitModal:r}=X(),o=g("/"),x=t.length>1;return e.jsxs(a,{onClick:x?r:void 0,sx:{cursor:x?"pointer":"default"},children:[e.jsxs(d,{size:"small",disabled:t.length<2,sx:{position:"relative",color:"text.secondary"},children:[e.jsx(Te,{}),s&&e.jsx(J,{})]}),e.jsx(u,{component:"span",variant:"body2",sx:{fontWeight:"bold",color:o?"text.disabled":"text.secondary"},children:n})]})},st=()=>{const t=g("/favorites"),s=ee(),{setSort:n}=k(),r=()=>n(s==="note"?"date":"note");return t?e.jsxs(d,{size:"small",sx:{mr:2},onClick:r,children:[s==="date"&&e.jsxs(e.Fragment,{children:[e.jsx(I,{sx:{color:"text.primary"}}),e.jsx(T,{sx:{color:"text.secondary",fontSize:"14px"}})]}),s==="note"&&e.jsxs(e.Fragment,{children:[e.jsx(I,{sx:{color:"text.secondary",fontSize:"14px"}}),e.jsx(T,{sx:{color:"text.primary"}})]})]}):null},nt=({total:t,uniqueVendors:s,filteredSearch:n})=>e.jsxs(a,{sx:{display:"flex",alignItems:"center",height:"40px"},children:[e.jsxs(a,{sx:{mr:"auto",display:"flex"},children:[e.jsx(tt,{filteredSearch:n,total:t,uniqueVendors:s}),e.jsx(et,{})]}),e.jsxs(a,{sx:{ml:"auto",display:"flex"},children:[e.jsx(st,{}),e.jsx(Ze,{}),e.jsx(Ye,{}),e.jsx(Je,{}),e.jsxs(ue,{sx:{alignItems:"center"},children:[e.jsx(_e,{}),e.jsx(Qe,{}),e.jsx(Xe,{})]})]})]}),ot=()=>{const[t,s]=j.useState(!1);j.useEffect(()=>{const r=()=>{window.scrollY>300?s(!0):s(!1)};return window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[]);const n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx(me,{in:t,children:e.jsx(je,{color:"primary",onClick:n,sx:{position:"fixed",bottom:"75px",right:"75px"},children:e.jsx(Ce,{})})})},pt=({products:t,search:s})=>{const n=v(),r=te(t),o=se(),x=n==="tile"?Ne:We;if(t.length===0&&s.length===0)return e.jsx(Ke,{});if(t.length===0&&s.length>0)return e.jsx(Ue,{});const l=o.length===0?t:t.filter(i=>o.includes(i.vendor));return e.jsxs(e.Fragment,{children:[e.jsx(nt,{total:l.length,uniqueVendors:r,filteredSearch:o.length>0&&o.length<r.length}),e.jsx(x,{list:l,search:s}),e.jsx(ot,{})]})};export{pt as default};
